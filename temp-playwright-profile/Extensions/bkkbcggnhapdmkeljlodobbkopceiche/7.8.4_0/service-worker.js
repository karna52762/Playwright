/*! For license information please see service-worker.js.LICENSE.txt */
!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(n,i,function(t){return e[t]}.bind(null,i));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=341)}([function(e,t,n){"use strict";n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return _})),n.d(t,"o",(function(){return g})),n.d(t,"t",(function(){return E})),n.d(t,"F",(function(){return y})),n.d(t,"H",(function(){return m})),n.d(t,"E",(function(){return b})),n.d(t,"I",(function(){return O})),n.d(t,"K",(function(){return S})),n.d(t,"J",(function(){return v})),n.d(t,"d",(function(){return T})),n.d(t,"j",(function(){return w})),n.d(t,"Q",(function(){return I})),n.d(t,"r",(function(){return A})),n.d(t,"P",(function(){return P})),n.d(t,"s",(function(){return N})),n.d(t,"D",(function(){return L})),n.d(t,"e",(function(){return D})),n.d(t,"U",(function(){return k})),n.d(t,"w",(function(){return B})),n.d(t,"T",(function(){return F})),n.d(t,"q",(function(){return x})),n.d(t,"z",(function(){return M})),n.d(t,"x",(function(){return U})),n.d(t,"y",(function(){return K})),n.d(t,"p",(function(){return j})),n.d(t,"v",(function(){return H})),n.d(t,"R",(function(){return V})),n.d(t,"u",(function(){return G})),n.d(t,"n",(function(){return W})),n.d(t,"a",(function(){return Y})),n.d(t,"l",(function(){return q})),n.d(t,"M",(function(){return X})),n.d(t,"L",(function(){return Z})),n.d(t,"c",(function(){return z})),n.d(t,"b",(function(){return Q})),n.d(t,"C",(function(){return J})),n.d(t,"k",(function(){return $})),n.d(t,"X",(function(){return ee})),n.d(t,"W",(function(){return te})),n.d(t,"V",(function(){return re})),n.d(t,"G",(function(){return ne})),n.d(t,"f",(function(){return ie})),n.d(t,"B",(function(){return ae})),n.d(t,"S",(function(){return se})),n.d(t,"g",(function(){return oe})),n.d(t,"N",(function(){return ce})),n.d(t,"O",(function(){return ue})),n.d(t,"A",(function(){return le})),n.d(t,"m",(function(){return fe}));var i=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))d.call(t,n)&&__defNormalProp(e,n,t[n]);if(f)for(var n of f(t))h.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__spreadProps=(e,t)=>s(e,l(t));const p=__spreadProps(__spreadValues({},{PAUSED:"paused",SETTINGS:"settings",WHITELIST:"whitelist",SOCIAL_CONTENT_KEYWORDS:"socialContentKeyWords",NUM_OF_BLOCKS:"numOfBlocks",NUM_OF_UNBLOCKS:"numOfUnBlocks",TOTAL_BLOCKS_BY_TAB_ID:"totalBlocksByTabId",TOTAL_BLOCKS_BY_TYPE:"totalBlocksByType",TOTAL_UNBLOCKS_BY_TYPE:"totalUnBlocksByType",BLOCKED_SITES_COUNTER:"counterBlockedSites",UNBLOCKED_SITES_COUNTER:"counterUnBlockedSites",OVERLAY_BLOCKED_LIST:"overlayBlockedList",FIRST_POPUP_BLOCK:"isFirstBlockAdds",DO_NOT_SHOW_NOTIFY_LIST:"doNotShowNotifyList",LAST_NOTIFICATION_DISPLAY:"lastNotificationDisplay",IS_GET_MOBILE_POPUP_MODEL_CLOSED:"isGetMobilePopupModelClosed",SITE_EXPERIENCE:"siteExperience",RATING:"rating"}),{USER:"user",LAST_USER_UPDATE_DATE:"lastUserUpdateDate",BLOCKED_ELEMENTS:"blockedElements",BLOCKED_ELEMENTS_PROMO:"blockedElementsPromo",DEFAULT_WHITELIST:"defaultWhitelist",POPULAR_SITES_FOR_BLOCK_ELEMENTS:"popularSitesForBlockElements",DEFAULT_WHITELIST_LAST_UPDATE:"defaultWhitelistLastUpdate",POPULAR_SITES_FOR_BLOCK_ELEMENTS_LAST_UPDATE:"popularSitesForBlockElementsLastUpdate",LAST_ALIVE_EVENT_SENT_AT:"lastAliveEventSentAt",GENERAL_DATA:"generalData",PROMO_COUPON:"promoCoupon",WHATS_NEW:"whatsNew",DEFAULT_SEGMENT_CONFIG:"segmentConfig",RATING_US_MODAL:"ratingUsModal",FONT_STYLE:"fontStyle",RDID:"randid",PIN_TASKBAR_DATA:"pinTaskbarData",SPECIAL_OFFER_MODAL:"specialOfferModal",INSTALL_SOURCE:"installSource",REFRESH_MODAL:"refreshModal",BADGE_STATES:"badgeStates",INSTALL_EVENT_SENT:"installEventSent",HIDE_TRACKER_HOOK:"hideTrackerHook",HIDE_OPT_IN_HOOK:"hideOptInHook",HIDE_CONTENT_HOOK:"hideContentHook",OPT:"opt",ANALYTICS_EVENT_SAMPLE_CONFIG:"analyticsEventSampleConfig",ANALYTICS_EVENT_SAMPLE_CONFIG_LAST_SYNCED:"analyticsEventSampleConfigLastSynced",ANALYTICS_EVENT_SAMPLE_INFO:"analyticsEventSampleInfo",AB_TESTS_CONFIG:"abtestsConfig",AB_TESTS_CONFIG_LAST_SYNCED:"abtestsConfigLastSynced",HIDE_OPT_IN_FOR_DISAGREED_USERS:"hideOptInForDisagreeUsers",ANALYTICS_DEVICE_ID:"analyticsDeviceId"}),_={ONBOARDING_FLOW:"onboardingFlow",ANALYTICS_INFO:"ANALYTICS_INFO",INSTALL_EVENT_SENT:"installEventSent"},g={CATEGORIES:{OPTIONS:"Options_menu",MAIN_MENU:"Menu",CHECKBOX:"Checkbox",CTA:"Button CTA",NAVBAR:"Navigation bar",MISSING:"Missing Ad",NOTIFICATION:"Notification",RATING:"Rating",EXTENSION:"Extension",REPORTS:"Reports",BLOCK_ELEMENT:"Block Element",COOKIE_CRUMBLER:"Cookie Crumbler",INSITE_NOTIFICATIONS:"In-site Notifications"},ACTIONS:{CLICK:"Click",VIEWED:"Viewed",DAILY_BLOCKS:"Popups blocked per day",BLOCKED_ELEMENT_SITE:"Blocked element site URL"}},E={CONTENT_LOG:"contentLog",GA_EVENT:"trackEvent",ADD_BADGE_STATE:"addBadgeState",REMOVE_BADGE_STATE:"removeBadgeState",CREATE_CONTEXT_MENUS:"createIconContextMenu",SEND_ANALYTICS_EVENT:"sendAnalyticsEvent",KEEN_IO:"KeenIO",ALLOW_ALWAYS:"allowAlways",RESTORE_BLOCKING:"restoreBlocking",REQUEST_TAB_URL:"requestTabUrl",REQUEST_CURRENT_TAB:"requestCurrentTab",OPEN_WEB_APP_URL:"openWebAppUrl",OPEN_URL:"openUrl",UPDATE_RATING:"update-rating",GET_AB_TEST_VALUE:"get-ab-test-value",GET_USER:"getUser",UPDATE_USER_INFO:"updateUserInfo",LOGOUT:"logout",START_BLOCKED_ELEMENTS:"start-blocked-elements",MANUAL_REMOVE_OVERLAY:"manual-remove-overlay",ADD_UNBLOCK_ALL_ELEMENTS_MENU:"add-unblock-all-elements-menu",REMOVE_UNBLOCK_ALL_ELEMENTS_MENU:"remove-unblock-all-elements-menu",UNBLOCK_ALL_ELEMENTS:"unblock-all-elements",GET_DEFAULT_WHITELIST:"get-default-whitelist",GET_POPULAR_SITES_FOR_BLOCK_ELEMENTS:"get-popular-sites-for-block-elements",INSERT_COOKIE_FILTERS:"insert-cookie-filters",ACTIVATE_CC_OR_SHOW_PROMO:"activate-cc-or-show-promo",CHECK_PROMO_MESSAGE:"check-promo-message",SHOW_COUPON_MESSAGE:"show-coupon-message",OPT_IN_AGREE:"opt-in-agree",SEND_ALIVE_EVENT:"send-alive-event",HIDE_AD_ELEMENT:"hide-ad-element",COUNT_AD_ELEMENT:"count-ad-element",UPDATE_SOCIAL_BLOCKER_CONFIG:"update-social-blocker-config",UPDATE_SEGMENT_DATA:"update-segment-data",UPDATE_BLOCK_STAT:"update-block-stat",UPDATE_UNBLOCK_STAT:"update-unblock-stat",UPDATE_BLOCK_COUNT:"update-block-count",UPDATE_UNBLOCK_COUNT:"update-unblock-count",COUNT_COOKIE_MESSAGES:"count-cookie-messages",INJECT_FONTS:"inject-font",FETCH_SETTINGS:"fetch-settings",UPDATE_REMOTE_SETTINGS:"update-remote-settings",EXTENSION_IS_PINNED:"extension-is-pinned",UPDATE_SCRIPT_BLOCKERS_STATE:"update-script-blockers-state",ON_EXTENSION_ENABLED_STATE_UPDATED:"extension-enabled-state-updated",GET_ALL_FEATURES_FLAGS:"get-all-features-flags",GET_SETTINGS:"get-settings",ON_EXTENSION_INFO_UPDATED:"on-extension-info-updated",CLOSE_TRACKER_HOOK:"close-tracker-hook",HIDE_TRACKER_HOOK:"hide-tracker-hook",HIDE_OPT_IN_HOOK:"hide-opt-in-hook",GET_TOTAL_BLOCKED_ITEMS:"get-total-blocked-items",SEND_TOTAL_BLOCKED_ITEMS:"send-total-blocked-items",REDO_LAST_BLOCKED_ITEMS:"redo-last-blocked-items",HIDE_HOOKS:"hide-hooks",REMOVE_ALL_TRACKER_HOOKS:"remove-all-tracker-hooks",IS_CANVAS_SPONSORED:"is-canvas-sponsored",INCREMENT_TRACKER_BLOCKER_SESSION_COUNT:"incrementTrackerBlockerSessionCount",WORKER_BLOCKED_POPUP:"worker-blocked-popup",REDO_LAST_BLOCKED_ITEMS_WORKER:"redo-last-blocked-items-worker",COUNT_PAGE_VISIT:"count-page-visit",GET_COOKIE_SELECTOR_SEGMENTS:"get-cookie-selector-segments",INJECT_YOUTUBE_AB_SCRIPT:"inject-youtube-ab-script",UPDATE_SETTING:"update-setting",GET_FEATURES_LIST:"get-features-list",IS_FEATURE_ENABLED:"is-feature-enabled",INJECT_VIDEO_STREAMING_AB_SCRIPT:"inject-video-streaming-ab-script",GET_REMOTE_CONFIG:"get-remote-config"},y={UPDATE_WHITELIST:"pb-update-whitelist",DISABLE:"inject-script-disable",POPUP_BLOCKED:"blockedWindow",WHITELIST_MATCH:"inject-script-whitelist-match"},m={NO_USER_INTERACTION:"NO_USER_INTERACTION",CAPTURING_ELEMENT:"CAPTURING_ELEMENT",OVERLAYISH:"OVERLAYISH",FULL_SCREEN_WHILE_OPEN:"FULL_SCREEN_WHILE_OPEN",BLUR_CALLED:"BLUR_CALLED",CLICK_ON_ATAG:"CLICK_ON_ATAG",DISPATCH_ON_ATAG:"DISPATCH_ON_ATAG",ARTIFICIAL_MOUSE_CLICK:"ARTIFICIAL_MOUSE_CLICK"},b=__spreadProps(__spreadValues({},m),{BLACKLIST:"BLACKLIST"}),O={POP_BLOCK_PRE_OPEN_1_NO_USER_INT:"POP_BLOCK_PRE_OPEN_1_NO_USER_INT",POP_BLOCK_PRE_OPEN_1_CAP_ELEMENT:"POP_BLOCK_PRE_OPEN_1_CAP_ELEMENT",POP_BLOCK_PRE_OPEN_1_OVERLAYISH:"POP_BLOCK_PRE_OPEN_1_OVERLAYISH",POP_BLOCK_PRE_OPEN_1_FS_ON_OPEN:"POP_BLOCK_PRE_OPEN_1_FS_ON_OPEN",POP_BLOCK_PRE_OPEN_1_BLUR_CALLED:"POP_BLOCK_PRE_OPEN_1_BLUR_CALLED",POP_BLOCK_PRE_OPEN_1_ATAG_CLICK:"POP_BLOCK_PRE_OPEN_1_ATAG_CLICK",POP_BLOCK_PRE_OPEN_1_ATAG_DISPATCH:"POP_BLOCK_PRE_OPEN_1_ATAG_DISPATCH",POP_BLOCK_PRE_OPEN_1_ARTIF_CLICK:"POP_BLOCK_PRE_OPEN_1_ARTIF_CLICK"},S={WINDOW_OPEN_WHITELIST:"WINDOW_OPEN_WHITELIST",WINDOW_OPEN_SAME_DOMAIN:"WINDOW_OPEN_SAME_DOMAIN",WINDOW_OPEN_LOGIN_LINK:"WINDOW_OPEN_LOGIN_LINK",CREATE_ELEMENT_CLICK_WHITELIST:"CREATE_ELEMENT_CLICK_WHITELIST",CREATE_ELEMENT_CLICK_SAME_DOMAIN:"CREATE_ELEMENT_CLICK_SAME_DOMAIN",CREATE_ELEMENT_PARENT_CLICK:"CREATE_ELEMENT_PARENT_CLICK",CREATE_ELEMENT_DISPATCH_EVENT_WHITELIST:"CREATE_ELEMENT_DISPATCH_EVENT_WHITELIST",CREATE_ELEMENT_DISPATCH_EVENT_SAME_DOMAIN:"CREATE_ELEMENT_DISPATCH_EVENT_SAME_DOMAIN",CREATE_EVENT_WHITELIST:"CREATE_EVENT_WHITELIST",CREATE_EVENT_LOGIN_LINK:"CREATE_EVENT_LOGIN_LINK",CREATE_EVENT_SAME_DOMAIN:"CREATE_EVENT_SAME_DOMAIN"},v={POP_WHITE_PRE_OPEN_1_WINOPEN_LIST:"POP_WHITE_PRE_OPEN_1_WINOPEN_LIST",POP_WHITE_PRE_OPEN_1_WINOPEN_DOM:"POP_WHITE_PRE_OPEN_1_WINOPEN_DOM",POP_WHITE_PRE_OPEN_1_WINOPEN_LOGIN:"POP_WHITE_PRE_OPEN_1_WINOPEN_LOGIN",POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_LIST:"POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_LIST",POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_DOM:"POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_DOM",POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_PAR:"POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_PAR",POP_WHITE_PRE_OPEN_1_CR_EL_DISP_LIST:"POP_WHITE_PRE_OPEN_1_CR_EL_DISP_LIST",POP_WHITE_PRE_OPEN_1_CR_EL_DISP_DOM:"POP_WHITE_PRE_OPEN_1_CR_EL_DISP_DOM",POP_WHITE_PRE_OPEN_1_CR_EV_LIST:"POP_WHITE_PRE_OPEN_1_CR_EV_LIST",POP_WHITE_PRE_OPEN_1_CR_EV_LOGIN:"POP_WHITE_PRE_OPEN_1_CR_EV_LOGIN",POP_WHITE_PRE_OPEN_1_CR_EV_DOM:"POP_WHITE_PRE_OPEN_1_CR_EV_DOM"},T={COOKIE:"images/cookie-animation.json",FACEBOOK_END:"images/endTrialFacebookAnimation.json",PIN:"images/pinAnimation.json"},w={PARENT:{id:"parentContextMenu",title:"Poperblocker",contexts:["page","frame","selection","link","editable","image","video","audio"]},OVERLAY:{id:"removeOverlay",title:"Remove overlay",contexts:["page","frame","selection","link","editable","image","video","audio"]},BLOCK_ELEMENT:{id:"blockElement",title:"Hide Element",contexts:["page","frame","selection","link","editable","image","video","audio"]},UNBLOCK_ALL_ELEMENTS:{id:"unblockAllElement",title:"Unblock All Elements",contexts:["page","frame","selection","link","editable","image","video","audio"]}},I={BLOCK_ELEMENT_ROOT:"pb-block-element-root",LIMIT_NOTIFICATION_ROOT:"pb-limit-notification-root",PROMO_ROOT:"pb-feature-promo-root",BLOCKER_ELEMENT_ID:"pb-feature-elementsblocker-root",COOKIE_PROMO_ROOT:"pb-cookie-promo-root",MESSAGE_NOTIFICATION_ROOT:"pb-message-notification-root",ADS_HOOK_ROOT:"pb-ads-hook-root",TRACKER_BLOCKER_HOOK_ROOT:"pb-tracker-blocker-root",OPT_IN_HOOK_ROOT:"opt-in-hook-root"},A={CHROME_EXTENTION_MANAGER:"chrome://extensions",FF_EXTENTION_MANAGER:"about:addons",WEB_APP:"https://app.pbapi.xyz",ANALYTICS_APP:"https://analytics.poperblocker.com",VALID_MESSAGE_DOMAINS:"poperblocker.com,pbapi.xyz".split(","),THANK_YOU_PAGE_CH:"https://poperblocker.com/welcome",THANK_YOU_PAGE_FF:"https://poperblocker.com/welcome-firefox",PRIVACY_POLICY_CH:"https://poperblocker.com/privacy/",PRIVACY_POLICY_FF:"https://addons.mozilla.org/en-US/firefox/addon/poper-blocker-pop-up-blocker/privacy/",UNINSTALL_PAGE_CH:"https://poperblocker.com/uninstall/?",UNINSTALL_PAGE_FF:"https://poperblocker.com/uninstall-firefox/?",FEEDBACK_PAGE:"https://poperblocker.com/feedback.html?from=ext",CONTACT_PAGE:"https://poperblocker.com/contact-form.html",CONTRIBUTE_PAGE:"https://poperblocker.com/contribute?utm_source=Extension_Popup",GOOGLE_FORM:"https://forms.gle/DfoB6hyd7MFtDPP8A",APPSTORE_CH:"https://chrome.google.com/webstore/detail/pop-up-blocker-for-chrome/bkkbcggnhapdmkeljlodobbkopceiche",APPSTORE_FF:"https://addons.mozilla.org/en-US/firefox/addon/poper-blocker-pop-up-blocker/",REVIEW_CH:"https://chromewebstore.google.com/detail/%D7%97%D7%95%D7%A1%D7%9D-%D7%A4%D7%95%D7%A4-%D7%90%D7%A4%D7%99%D7%9D-%D7%9C%D7%9B%D7%A8%D7%95%D7%9D-poper/bkkbcggnhapdmkeljlodobbkopceiche/reviews",REVIEW_FF:"https://addons.mozilla.org/en-US/firefox/addon/poper-blocker-pop-up-blocker/reviews/add",REVIEW_EDGE:"https://microsoftedge.microsoft.com/addons/detail/pop-up-blocker-for-edge%E2%84%A2-/baplddocidbpmmneofgnhkjojmibmpck",TWITTER_SHARE:"https://twitter.com/intent/tweet?hashtags=popups&original_referer=https%3A%2F%2Fpoperblocker.com%3Fref%3Dfb_pp_share&related=socialmediahats&text=I'm%20using%20poper%20blocker%20to%20enjoy%20a%20popup%20free%20browsing%20experience%20pic.twitter.com%2FniqVgqfmAw&url=https%3A%2F%2Fgoo.gl%2FryoaEn&via=poper_blocker",FACEBOOK_SHARE:"https://www.facebook.com/dialog/share?app_id=1911035589168170&display=popup&href=https%3A%2F%2Fpoperblocker.com%3Fref%3Dfb_pp_share%3Fhl%3Den&hashtag=%23For_No_More_Popups_Click_Below",RATE_US_FORM:"https://docs.google.com/forms/d/e/1FAIpQLScqaL8rpA8H-9Qa5WiLpbYXO_Gzlg33AfS0O4qhgQZBglpjtw/formResponse",REPORT_MISSED_POPUP_FORM:"https://docs.google.com/forms/d/e/1FAIpQLSfNBVyVG0f9IWCO_119MGnAZxwZDrb8Yo_X2CxKL9f3MHN6tw/formResponse"},P={AFTER:5,EVERY:100},C=A.WEB_APP+"/api/v1",R=""+A.ANALYTICS_APP,N="?modal=login",L="poper-blocked",D={OVERLAY_CHECK:"https://api2.poperblocker.com/view/update",ANALYTICS_SEND_EVENT:R+"/event",GET_USER:C+"/user",GET_USER_SEGMENT:C+"/segment",LOGOUT:C+"/auth/logout",MANAGE_SUBSCRIPTION:C+"/subscriptions",ANALYTIC_INFO:C+"/analytics/sync",WHITELIST:C+"/whitelist",BLACKLIST:C+"/blacklist",ADS_BLOCKER_BLACKLIST:C+"/adsblocker/blacklist",POPULAR_SITES_FOR_BLOCK_ELEMENTS:C+"/mostPopularSitesForBlockElements",PROMO_COUPON:C+"/promoCoupon",SETTINGS:C+"/settings",REFRESH:C+"/auth/refresh",SOCIALBLOCKER_CONFIG:C+"/socialblocker/config",ADS_BLOCKER_CONFIG:C+"/adsblocker/config",TRACKERS_BLOCKER_CONFIG:C+"/trackersblocker/config",YOUTUBE_BLOCKER_CONFIG:C+"/youtubeblocker/config",GROWTHBOOK:C+"/growthbook",COOKIE_CRUMBLER:C+"/cookieCrumbler",ALIVE:C+"/alive",CONFIG:C+"/extensionConfig",ANALYTICS_EVENT_SAMPLE_CONFIG:C+"/analyticsEventSampleConfig",VERSION:C+"/version"},k=288e5,B=864e5,F=5184e6,x=36e5,M=1,U=60*M,K=36e5,j=12*U,H=24*U,V=1e3,G=41,W="https://fonts.googleapis.com/css2?family=Mulish:wght@200;300;400;500;600;700;800;900&display=swa",Y={adText:/((^|\s)(([aA][dD]\s)|advertisement|sponsored))/i,adChoicesIcon:/(adchoices)/i,containerElementTags:["iframe","div","section","td","ins"],adHintRegex:/((^|\s|_|\.|-)([aA][dD]([sS])?|[a-zA-Z]*Ad(s)?|adtech|adtag|dfp|darla|adv|advertisement|(b|B)anner|adsbygoogle|adwrap|adzerk|safeframe|300[xX]250|160[xX]600|728[xX]90)(\s|$|_|\.|-|[A-Z0-9]))/,elementMinSize:100,textMinSize:30},q={poper20:"poper20",poper30:"poper30"},X=5,Z=5,z={ANALYTICS_INFO_KEY:"ANALYTICS_INFO",ANALYTICS_PLATFORM:"Extension",ANALYTICS_PRODUCT:"PoperBlocker",ANALYTICS_RESOURCE_TYPES:{PAID:"PAID",ORGANIC:"ORGANIC"},ANALYTICS_EVENT_TYPES:{PAGE_RELOADED_FREQUENTLY:"PAGE_RELOADED_FREQUENTLY",EXTENSION_CROSS_PROMO_POPUP:"EXTENSION_CROSS_PROMO_POPUP",EXTENSION_CROSS_PROMO_EXIT:"EXTENSION_CROSS_PROMO_EXIT",EXTENSION_CROSS_PROMO_GET:"EXTENSION_CROSS_PROMO_GET",EXTENSION_INSTALL:"EXTENSION_INSTALL",EXTENSION_UNINSTALL:"EXTENSION_UNINSTALL",EXTENSION_UPGRADE:"EXTENSION_UPGRADE",EXTENSION_INSTALL_GENERAL:"EXTENSION_INSTALL_GENERAL",EXTENSION_OPT_IN_VIEWED:"EXTENSION_OPT_IN_VIEWED",EXTENSION_OPT_IN_CLICKED_AGREE:"EXTENSION_OPT_IN_CLICKED_AGREE",EXTENSION_OPT_OUT_CLICKED_AGREE:"EXTENSION_OPT_OUT_CLICKED_AGREE",POPUP_BLOCKED:"POPUP_BLOCKED",DID_WE_MISS_ONE:"DID_WE_MISS_ONE",ELEMENT_BLOCKED:"ELEMENT_BLOCKED",OVERLAY_BLOCKED:"OVERLAY_BLOCKED",OVERLAY_DETECTED:"OVERLAY_DETECTED",REMOVE_OVERLAY_FOREVER:"REMOVE_OVERLAY_FOREVER",UNDO_OVERLAY_REMOVAL:"UNDO_OVERLAY_REMOVAL",ELEMENT_BLOCKED_UNDO:"ELEMENT_BLOCKED_UNDO",ELEMENT_BLOCKED_SAVE:"ELEMENT_BLOCKED_SAVE",BLOCK_ELEMENT_PROMOTION_NOTIFICATION_VIEW:"BLOCK_ELEMENT_PROMOTION_NOTIFICATION_VIEW",BLOCK_ELEMENT_FREE_BLOCKS:"BLOCK_ELEMENT_FREE_BLOCKS",BLOCK_ELEMENT_NO_BLOCKS_VIEW:"BLOCK_ELEMENT_NO_BLOCKS_VIEW",BLOCK_ELEMENT_UNBLOCK_ELEMENTS:"BLOCK_ELEMENT_UNBLOCK_ELEMENTS",WHITELIST_ADD:"WHITELIST_ADD",WHITELIST_REMOVE:"WHITELIST_REMOVE",SETTINGS_PAGE_VIEW:"SETTINGS_PAGE_VIEW",COOKIE_CRUMBLER_TRIAL_START:"COOKIE_CRUMBLER_TRIAL_START",COOKIE_CRUMBLER_HIDE_FOREVER:"COOKIE_CRUMBLER_HIDE_FOREVER",COOKIE_CRUMBLER_IN_TRIAL:"COOKIE_CRUMBLER_IN_TRIAL",COOKIE_CRUMBLER_END_OF_TRIAL:"COOKIE_CRUMBLER_END_OF_TRIAL",COOKIE_CRUMBLER_IN_TRIAL_CLICK:"COOKIE_CRUMBLER_IN_TRIAL_CLICK",COOKIE_CRUMBLER_USE_CASE_CLOSE:"COOKIE_CRUMBLER_USE_CASE_CLOSE",COOKIE_CRUMBLER_TRIAL_PROMOTION_NOTIFICATION_CLICK:"COOKIE_CRUMBLER_TRIAL_PROMOTION_NOTIFICATION_CLICK",COOKIE_CRUMBLER_USE_CASE_VIEW:"COOKIE_CRUMBLER_USE_CASE_VIEW",COOKIE_CRUMBLER_USE_CASE_CLICK:"COOKIE_CRUMBLER_USE_CASE_CLICK",COOKIES_OVERLAY_BLOCKED:"COOKIES_OVERLAY_BLOCKED",ALIVE:"ALIVE",IN_PRODUCT_PROMOTION_DIALOG_CLICK:"IN_PRODUCT_PROMOTION_DIALOG_CLICK",IN_PRODUCT_PROMOTION_DIALOG_VIEW:"IN_PRODUCT_PROMOTION_DIALOG_VIEW",IN_SITE_PUSH_NOTIFICATION_ALLOW_PERMISSIONS:"IN_SITE_PUSH_NOTIFICATION_ALLOW_PERMISSIONS",IN_SITE_PUSH_NOTIFICATION_DENY_PERMISSIONS:"IN_SITE_PUSH_NOTIFICATION_DENY_PERMISSIONS",IN_SITE_PUSH_NOTIFICATION_ON:"IN_SITE_PUSH_NOTIFICATION_ON",IN_SITE_PUSH_NOTIFICATION_OFF:"IN_SITE_PUSH_NOTIFICATION_OFF",BLOCK_ALL_DISTRACTIONS_BUTTON_CLICK:"BLOCK_ALL_DISTRACTIONS_BUTTON_CLICK",EXPAND_NOT_BLOCKED_DROPDOWN_CLICK:"EXPAND_NOT_BLOCKED_DROPDOWN_CLICK",SEGMENTATION_PROMOTION_VIEW:"SEGMENTATION_PROMOTION_VIEW",SEGMENTATION_PROMOTION_CLICK:"SEGMENTATION_PROMOTION_CLICK",ADBLOCKER_PROMOTION_VIEW:"ADBLOCKER_PROMOTION_VIEW",ADBLOCKER_PROMOTION_CLICK:"ADBLOCKER_PROMOTION_CLICK",MONETIZATION_NOIFICATION_VIEW:"MONETIZATION_NOIFICATION_VIEW",MONETIZATION_NOIFICATION_CTA_CLICK:"MONETIZATION_NOIFICATION_CTA_CLICK",MONETIZATION_NOIFICATION_COPY_CODE_CLICK:"MONETIZATION_NOIFICATION_COPY_CODE_CLICK",SOCIAL_BLOCKER_FEED_PROMOTION_VIEW:"SOCIAL_BLOCKER_FEED_PROMOTION_VIEW",SOCIAL_BLOCKER_FEED_AD_DETECTED:"SOCIAL_BLOCKER_FEED_AD_DETECTED",SOCIAL_BLOCKER_FEED_PROMOTION_OPEN:"SOCIAL_BLOCKER_FEED_PROMOTION_OPEN",SOCIAL_BLOCKER_FEED_PROMOTION_START_TRIAL:"SOCIAL_BLOCKER_FEED_PROMOTION_START_TRIAL",FIRST_POPUP_BLOCKED_NOTIFICATION_VIEW:"FIRST_POPUP_BLOCKED_NOTIFICATION_VIEW",FIRST_POPUP_BLOCKED_NOTIFICATION_CLICKED:"FIRST_POPUP_BLOCKED_NOTIFICATION_CLICKED",CLICK_COOKIE_PROMOTION_DISCOUNT:"CLICK_COOKIE_PROMOTION_DISCOUNT",PIN_TASKBAR_POPUP_VIEW:"PIN_TASKBAR_POPUP_VIEW",PIN_TASKBAR_POPUP_DISMISS_CLICK:"PIN_TASKBAR_POPUP_DISMISS_CLICK",TRIAL_MIGRATION:"TRIAL_MIGRATION",YOUTUBE_PLAYER_ADS_FETCH_BLOCKED:"YOUTUBE_PLAYER_ADS_FETCH_BLOCKED",VIDEO_STREAM_VAST_REQUEST_BLOCKED:"VIDEO_STREAM_VAST_REQUEST_BLOCKED",ADSBLOCKER_HOOK_SHOW:"ADSBLOCKER_HOOK_SHOW",ADSBLOCKER_HOOK_SHOW_POSTTRIAL:"ADSBLOCKER_HOOK_SHOW_POSTTRIAL",ADSBLOCKER_HOOK_CLICK:"ADSBLOCKER_HOOK_CLICK",ADSBLOCKER_HOOK_CLICK_POSTTRIAL:"ADSBLOCKER_HOOK_CLICK_POSTTRIAL",ADSBLOCKER_HOOK_DISMISS:"ADSBLOCKER_HOOK_DISMISS",ADSBLOCKER_HOOK_DISMISS_POSTTRIAL:"ADSBLOCKER_HOOK_DISMISS_POSTTRIAL",RATE_US_VIEW:"RATE_US_VIEW",RATE_US_POST_FEEDBACK_VIEW:"RATE_US_POST_FEEDBACK_VIEW",RATE_US_CLICK_DISMISS:"RATE_US_CLICK_DISMISS",RATE_US_CLICK_SUBMIT:"RATE_US_CLICK_SUBMIT",RATE_US_CLICK_STAR:"RATE_US_CLICK_STAR",RATE_US_CLICK_DISMISS_FEEDBACK:"RATE_US_CLICK_DISMISS_FEEDBACK",SOCIAL_CONTENT_INFEED_BANER_VIEW:"SOCIAL_CONTENT_INFEED_BANER_VIEW",SOCIAL_CONTENT_SHOW_POST_CLICK:"SOCIAL_CONTENT_SHOW_POST_CLICK",PANEL_ADREFRESH_CLICK_DISMISS:"PANEL_ADREFRESH_CLICK_DISMISS",PANEL_ADREFRESH_VIEW:"PANEL_ADREFRESH_VIEW",PANEL_ADREFRESH_CLICK_REFRESH:"PANEL_ADREFRESH_CLICK_REFRESH",PANEL_ADREFRESH_CLICK_GOPRO:"PANEL_ADREFRESH_CLICK_GOPRO",PANEL_ADREFRESH_PRO_VIEW:"PANEL_ADREFRESH_PRO_VIEW",PANEL_ADREFRESH_PRO_CLICK_REFRESH:"PANEL_ADREFRESH_PRO_CLICK_REFRESH",PANEL_SOCIAL_CONTENT_CLICK_SETUP:"PANEL_SOCIAL_CONTENT_CLICK_SETUP",PANEL_SUBEXP_DIALOG_VIEW:"PANEL_SUBEXP_DIALOG_VIEW",PANEL_SUBEXP_DIALOG_DISMISS_CLICK:"PANEL_SUBEXP_DIALOG_DISMISS_CLICK",PANEL_SUBEXP_DIALOG_RENEW_CLICK:"PANEL_SUBEXP_DIALOG_RENEW_CLICK",PANEL_SUBEXP_DIALOG_REMINDER_CLICK:"PANEL_SUBEXP_DIALOG_REMINDER_CLICK",PANEL_EULA_DIALOG_VIEW:"PANEL_EULA_DIALOG_VIEW",PANEL_EULA_DIALOG_CLOSE:"PANEL_EULA_DIALOG_CLOSE",PANEL_EULA_DIALOG_AGREE_CLICK:"PANEL_EULA_DIALOG_AGREE_CLICK",PANEL_EULA_DIALOG_DISAGREE_CLICK:"PANEL_EULA_DIALOG_DISAGREE_CLICK",PANEL_OVERLAY_BANNER_RED_VIEW:"PANEL_OVERLAY_BANNER_RED_VIEW",PANEL_OVERLAY_BANNER_RED_ACTIVATE_CLICK:"PANEL_OVERLAY_BANNER_RED_ACTIVATE_CLICK",OPT_IN_HOOK_DIALOG_VIEW_CONTROL:"OPT_IN_HOOK_DIALOG_VIEW_CONTROL",OPT_IN_HOOK_DIALOG_CLICK_CLOSE_CONTROL:"OPT_IN_HOOK_DIALOG_CLICK_CLOSE_CONTROL",OPT_IN_HOOK_DIALOG_CLICK_CTA_CONTROL:"OPT_IN_HOOK_DIALOG_CLICK_CTA_CONTROL",CONTENT_BLOCKER_HOOK_CLICK_CLOSE:"CONTENT_BLOCKER_HOOK_CLICK_CLOSE",CONTENT_BLOCKER_HOOK_CLICK_CTA:"CONTENT_BLOCKER_HOOK_CLICK_CTA",CONTENT_BLOCKER_HOOK_VIEW:"CONTENT_BLOCKER_HOOK_VIEW",PANEL_RECOVER_POPUPS_CTA_CLICK:"PANEL_RECOVER_POPUPS_CTA_CLICK",POP_WHITE_PST_OPEN_1_SRC:"POP_WHITE_PST_OPEN_1_SRC",POP_WHITE_PST_OPEN_1_TRGT:"POP_WHITE_PST_OPEN_1_TRGT",POP_BLOCK_PST_OPEN_1_BLACKLIST:"POP_BLOCK_PST_OPEN_1_BLACKLIST",POPUP_RECOVERED:"POPUP_RECOVERED",EULA_AGREED:"EULA_AGREED",FINISHED_ONBOARDING:"FINISHED_ONBOARDING",FIRST_APP_OPEN:"FIRST_APP_OPEN",UUID_INITIALIZED:"UUID_INITIALIZED",EXT_NTF_OVERLAY_INACTIVE_SHOW:"EXT_NTF_OVERLAY_INACTIVE_SHOW"},PAGE:{PANEL:"PANEL",PANEL_SETTINGS_TAB:"PANEL_SETTINGS_TAB"},FEATURE:{SCREEN:"SCREEN",WHATS_NEW_CARD:"WHATS_NEW_CARD",WHATS_NEW_CARD_CTA:"WHATS_NEW_CARD_CTA",SPECIAL_OFFER_CARD:"SPECIAL_OFFER_CARD",SPECIAL_OFFER_CARD_PROCTA:"SPECIAL_OFFER_CARD_PROCTA",SPECIAL_OFFER_CARD_REMIND_LATER:"SPECIAL_OFFER_CARD_REMIND_LATER",SPECIAL_OFFER_CARD_X:"SPECIAL_OFFER_CARD_X",EXTENSION_DISABLED_CARD:"EXTENSION_DISABLED_CARD",EXTENSION_DISABLED_CARD_CTA:"EXTENSION_DISABLED_CARD_CTA",HEADER_GO_PRO:"HEADER_GO_PRO",HEADER_MENU:"HEADER_MENU",DROP_MENU_SETTINGS:"DROP_MENU_SETTINGS",DROP_MENU_LOGIN:"DROP_MENU_LOGIN",DROP_MENU_LOGOUT:"DROP_MENU_LOGOUT",DROP_MENU_DISABLE:"DROP_MENU_DISABLE",DROP_MENU_ENABLE:"DROP_MENU_ENABLE",WHITELIST_SITE:"WHITELIST_SITE",HIDE_DISTRACTIONS:"HIDE_DISTRACTIONS",HIDE_DISTRACTIONS_BACK:"HIDE_DISTRACTIONS_BACK",HIDE_DISTRACTIONS_REMOVE_ELEMENT:"HIDE_DISTRACTIONS_REMOVE_ELEMENT",HIDE_DISTRACTIONS_REMOVE_OVERLAY:"HIDE_DISTRACTIONS_REMOVE_OVERLAY",HIDE_DISTRACTIONS_REPORT_MISSED_POPUP:"HIDE_DISTRACTIONS_REPORT_MISSED_POPUP",HIDE_DISTRACTIONS_REPORT_MISSED_POPUP_CONFIRMATION:"HIDE_DISTRACTIONS_REPORT_MISSED_POPUP_CONFIRMATION",STATISTICS_TAB:"STATISTICS_TAB",STATISTICS_TAB_UN_BLOCKED:"STATISTICS_TAB_UN_BLOCKED",STATISTICS_TAB_BLOCKED:"STATISTICS_TAB_BLOCKED",STATISTICS_TAB_GO_PRO_CTA:"STATISTICS_TAB_GO_PRO_CTA",SETTINGS_TAB:"SETTINGS_TAB",POPUPS:"POPUPS",OVERLAYS:"OVERLAYS",COOKIE_CRUMBLER:"COOKIE_CRUMBLER",FACEBOOK:"FACEBOOK",PUSH_NOTIFICATION:"PUSH_NOTIFICATION",ADS_BLOCKER:"ADS_BLOCKER",YOUTUBE_BLOCKER:"YOUTUBE_BLOCKER",ADVANCED_SETTINGS:"ADVANCED_SETTINGS",SOCIAL_CONTENT_BLOCKER:"SOCIAL_CONTENT_BLOCKER",TRACKERS_BLOCKER:"TRACKERS_BLOCKER",VIDEO_STREAM_AD_BLOCKER:"VIDEO_STREAM_AD_BLOCKER"},EVENT_TYPE:{VIEW:"VIEW",CLICK:"CLICK",CLOSE:"CLOSE",TOGGLE_ON:"TOGGLE_ON",TOGGLE_OFF:"TOGGLE_OFF",PANEL_SPECIAL_OFFER_X_CLICK:"PANEL_SPECIAL_OFFER_X_CLICK",PANEL_SPECIAL_OFFER_MAYBELATER_CLICK:"PANEL_SPECIAL_OFFER_MAYBELATER_CLICK",PANEL_SPECIAL_OFFER_GOPRO_CLICK:"PANEL_SPECIAL_OFFER_GOPRO_CLICK",PANEL_SPECIAL_OFFER_GOPRO_VIEW:"PANEL_SPECIAL_OFFER_GOPRO_VIEW",START_TRIAL:"START_TRIAL",BLOCKED:"BLOCKED"},TIERS:{FREE:"FREE",PREMIUM:"PREMIUM",ANONYMOUS:"ANONYMOUS"}},Q={SEGMENT_ALARM:"segmentUpdate",BLACKLIST_SYNC_ALARM:"blacklistSync",ABTESTS_SYNC_ALARM:"abTestsSync"},J={CONTENT_SETTINGS:"contentSettings",ALL_URLS:"<all_urls>",BLOCK:"block",ASK:"ask"},$={HIDDEN_PROPERTY:"{display: none !important ; visibility : hidden !important ; opacity : 0 !important}",DISPLAY:"display",VISIBILITY:"visibility",OPACITY:"opacity"},ee="pbYtHANDLED",te="youtube.com",re={HIDE:"hide",CLICK:"click",VIDEO:"video"},ne={COLORS:{orange:"#ffc866",green:" #2ebd92",gray:" #435667",HOVER:{orange:"#FFE3B0",green:" #BCF2E2",gray:"#94a9bd"}}},ie={EXTENSION_OFF:{BadgeColor:"#c53929",TextColor:"#FFFFFF",BadgeIcon:"/images/icon128_disabled.png",InitialText:"OFF"},WHATSNEW:{BadgeColor:"#5B96EE",TextColor:"#FFFFFF",InitialText:"NEW",BadgeIcon:"/images/icon128.png"},OPT_OUT:{BadgeColor:"#D80032",TextColor:"#FFFFFF",InitialText:"!",BadgeIcon:"/images/icon128.png"},STATS_COUNT:{BadgeColor:"#8ab4f8",TextColor:"#FFFFFF",InitialText:"",BadgeIcon:"/images/icon128.png"}},ae={PAYMENT_PENDING:0,PAYMENT_RECIEVED:1,PAYMENT_DEFERED:3,CANCELED:4,REFUNDED:5,PAUSED:6},se={REMINDER_INTERVAL:24,REMINDER_TMP_INTERVAL:12,PERIOD_DAYS_TO_DISPLAY:7,FEATURE_ACTIVE_DATE:"2023-09-11 00:00:00"},oe={IFRAME_SOCIAL_HOOK:"IFRAME_SOCIAL_HOOK",IFRAME_COOKIE_HOOK:"IFRAME_COOKIE_HOOK",IFRAME_ADS_HOOK_PREFIX:"IFRAME_ADS_HOOK_",IFRAME_TRACKER_HOOK:"IFRAME_TRACKER_HOOK",EXTENSION_PANEL_SETTINGS_PREFIX:"EXTENSION_PANEL_SETTINGS_",EXTENSION_PANEL_GO_PRO:"EXTENSION_PANEL_GO_PRO",EXTENSION_PANEL_STATS_GO_PRO:"EXTENSION_PANEL_STATS_GO_PRO",EXTENSION_PANEL_SPECIAL_OFFER_CTA:"EXTENSION_PANEL_SPECIAL_OFFER_CTA"},ce={PreOpen:"PreOpen",PostOpen:"PostOpen"},ue={Target:"target",Source:"source"},le={EXT_PANEL_OVERLAY_BANNER_RED:"extPanelOverlayBannedRed",EXT_PANEL_EULA_DIALOG:"extPanelEulaDialog",EXT_NTF_OVERLAY_INACTIVE:"extNtfOverlayInactive",EXT_OVERLAY_TOGGLE:"extOverlayToggle",EXT_COOKIE_TOGGLE:"extCookieToggle",EXT_OPT_IN_HOOK:"extOptInHook"},fe={COOKIE_CRUMBLER:"cookieCrumbler",DETECT_OVERLAYS:"detectOverlays",SOCIAL_ADS_BLOCKING:"facebookAdds",ADS_BLOCKER:"adsBlocker",HIDE_ELEMENTS:"hideElements",YOUTUBE_BLOCKER:"youtubeBlocker",TRACKERS_BLOCKER:"trackersBlocker",POPUPS:"popups",PUSH_NOTIFICATION:"pushNotification",SOCIAL_CONTENT_BLOCKER:"socialContentBlocker",VIDEO_STREAM_AD_BLOCKER:"videoStreamAdBlocker"}},,function(e,t,n){"use strict";var i=n(24);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";n.d(t,"h",(function(){return getBrowser})),n.d(t,"j",(function(){return getI18N})),n.d(t,"k",(function(){return getI18NWithParams})),n.d(t,"o",(function(){return isDomainInList})),n.d(t,"D",(function(){return sendGAEvent})),n.d(t,"F",(function(){return sendMessageToWorker})),n.d(t,"J",(function(){return sendToWorker})),n.d(t,"l",(function(){return getManifest})),n.d(t,"q",(function(){return isFireFoxIncognito})),n.d(t,"H",(function(){return sendToActiveTab})),n.d(t,"I",(function(){return sendToAllTabs})),n.d(t,"m",(function(){return getTabById})),n.d(t,"i",(function(){return getCurrentTab})),n.d(t,"c",(function(){return copyTextToClipboard})),n.d(t,"g",(function(){return getActiveTab})),n.d(t,"L",(function(){return updateSegmentData})),n.d(t,"t",(function(){return isPremium})),n.d(t,"r",(function(){return isKeysExists})),n.d(t,"s",(function(){return isPermissionGranted})),n.d(t,"C",(function(){return requestPermission})),n.d(t,"a",(function(){return checkIsPinned})),n.d(t,"b",(function(){return cleanDomain})),n.d(t,"n",(function(){return getUserStatus})),n.d(t,"u",(function(){return isPremiumUser})),n.d(t,"f",(function(){return generateAnalyticsEventName})),n.d(t,"e",(function(){return generateAnalyticsEventAndSendToWorker})),n.d(t,"p",(function(){return isExtensionEnabled})),n.d(t,"v",(function(){return isProductionEnv})),n.d(t,"E",(function(){return sendGoogleForm})),n.d(t,"G",(function(){return sendMissedPopupGoogleForm})),n.d(t,"y",(function(){return openSettingPage})),n.d(t,"w",(function(){return openMobileDownloadPage})),n.d(t,"B",(function(){return replaceAll})),n.d(t,"x",(function(){return openReviewPage})),n.d(t,"A",(function(){return openSocialSettingsFromPanel})),n.d(t,"z",(function(){return openSettingsFromPanel})),n.d(t,"d",(function(){return debounce})),n.d(t,"K",(function(){return throttle}));var i=n(0),s=n(18),l=n(2),f=n(14),d=n(5),h=n(7),p=n(8);const getBrowser=()=>/firefox/i.test(navigator.userAgent)?"FF":"CH",getI18N=(e,t)=>l.a.i18n.getMessage(e)||l.a.i18n.getMessage(t||e)||e,getI18NWithParams=(e,...t)=>t.reduce((e,t)=>e.replace("%s",t),getI18N(e)),isDomainInList=(e,t)=>{t=t||[];for(let n=0;n<t.length;n++){const i=t[n];if(new RegExp("\\b[(www\\.)|.*.]?"+i+"\\b").test(e))return!0}return!1},sendGAEvent=(e,t,n,s)=>new Promise(f=>{l.a.runtime.sendMessage({name:i.t.GA_EVENT,category:e,action:t,label:n,isCount:s},()=>f())}),sendMessageToWorker=e=>l.a.runtime.sendMessage(e),sendToWorker=e=>l.a.runtime.sendMessage(e),getManifest=()=>l.a.runtime.getManifest(),isFireFoxIncognito=()=>new Promise(e=>{if("FF"!=getBrowser())return e(!1);l.a.tabs.query({currentWindow:!0,active:!0},t=>{const n=t[0].id;l.a.tabs.executeScript(n,{code:"isI=browser.extension.inIncognitoContext; isI;"},t=>l.a.runtime.lastError?e(!1):e(!(!t||!Array.isArray(t))&&t[0]))})}),sendToActiveTab=(e,t)=>{l.a.tabs&&l.a.tabs.query({active:!0,lastFocusedWindow:!0},(function(n){const i=n&&n[0]&&n[0].id;i&&l.a.tabs.sendMessage(i,{name:e,data:t||""})}))},sendToAllTabs=(e,t)=>{l.a.tabs&&l.a.tabs.query({},n=>{for(const i of n){const n=i.id;n&&l.a.tabs.sendMessage(n,{name:e,data:t||""})}})},getTabById=async(e,{currentWindow:t}={currentWindow:!0})=>{var n;return null!=(n=(await l.a.tabs.query(t?{currentWindow:t}:{})).find(t=>t.id===e))?n:null},getCurrentTab=async()=>new Promise(e=>{sendMessageToWorker({name:i.t.REQUEST_CURRENT_TAB}).then(t=>{e(t)})}),copyTextToClipboard=e=>{const t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},getActiveTab=()=>new Promise(e=>{l.a.tabs.query({active:!0,lastFocusedWindow:!0},t=>{e(t[0])})}),updateSegmentData=async()=>{l.a.storage.local.get([i.h.DEFAULT_SEGMENT_CONFIG],async e=>{var t;const n=e[i.h.DEFAULT_SEGMENT_CONFIG],f=await Object(s.a)();if(null==f?void 0:f.uuid){const e=await Object(p.a)(i.e.GET_USER_SEGMENT,{headers:{id:f.uuid}});if(200===e.status){const s=await e.json(),f=null!=(t=null==n?void 0:n.lastDisplayTime)?t:Date.now()-31*i.w,d={config:s,updateTime:Date.now(),lastDisplayTime:f,lastUpdateTime:Date.now()};l.a.storage.local.set({[i.h.DEFAULT_SEGMENT_CONFIG]:d})}}})},isPremium=async()=>{var e;return!!(null==(e=(await d.c.get([i.h.USER])).user)?void 0:e.isPremium)},isKeysExists=(e,t)=>e.every(e=>e in t),isPermissionGranted=e=>new Promise(t=>l.a.permissions.contains(e,t)),requestPermission=e=>new Promise(t=>l.a.permissions.request(e,t)),checkIsPinned=async()=>({isPinned:(await l.a.custom.action.getUserSettings()).isOnToolbar});function cleanDomain(e){if(!e)return e;let t=e.trim();if(/^chrome-extension?:\/\//.test(t))return t;/^https?:\/\//.test(t)||(t="http://"+t);try{return new URL(t).hostname.replace(/^www\d*\./,"")}catch(e){return t}}const getUserStatus=e=>{let t=f.a.Anonymous;return(null==e?void 0:e.id)&&(t=f.a.Free,(null==e?void 0:e.isPremium)&&(t=f.a.Premium)),t},isPremiumUser=e=>!!(null==e?void 0:e.isPremium),generateAnalyticsEventName=(e,t,n)=>`${i.c.PAGE[e]}_${i.c.FEATURE[t]}_${i.c.EVENT_TYPE[n]}`,generateAnalyticsEventAndSendToWorker=(e,t,n,s)=>{let l=void 0;s&&(l={payload:JSON.stringify(s)}),sendMessageToWorker({name:i.t.SEND_ANALYTICS_EVENT,eventType:generateAnalyticsEventName(e,t,n),eventPayload:l})},isExtensionEnabled=async()=>!!!await d.d.get(i.h.PAUSED),isProductionEnv=()=>!0,sendGoogleForm=async(e,t,n,s,l,f,d)=>{try{await fetch(`${i.r.RATE_US_FORM}?entry.492049526=${d}&entry.1525226020=${e}&entry.375126611=${t}&entry.1913270847=${n}&entry.911859707=${s}&entry.1339946149=${l}&entry.1635427313=${f}`,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"}})}catch(e){}},sendMissedPopupGoogleForm=async(e,t,n,s,l,f)=>{try{const d=l?"Production":"Staging",h=`${i.r.REPORT_MISSED_POPUP_FORM}?entry.1545216463=${f}&entry.791342156=${e}&entry.904998852=${t}&entry.1693153242=${n}&entry.382366330=${s}&entry.422640230=${d}`;await fetch(h,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"}})}catch(e){}},openSettingPage=async()=>{await sendMessageToWorker({name:i.t.OPEN_WEB_APP_URL,url:"/settings"})},openMobileDownloadPage=async()=>{await sendMessageToWorker({name:i.t.OPEN_WEB_APP_URL,url:"/dashboard/download-app"})},replaceAll=(e,t,n)=>{const i=new RegExp(`\\b${t}\\b`,"gi");return e.replace(i,n)},openReviewPage=()=>{let e="";switch(Object(h.b)()){case h.a.CHROME:e=i.r.REVIEW_CH;break;case h.a.EDGE:e=i.r.REVIEW_EDGE;break;case h.a.FIREFOX:e=i.r.REVIEW_FF}e&&sendMessageToWorker({name:i.t.OPEN_URL,url:e})},openSocialSettingsFromPanel=async()=>{await sendMessageToWorker({name:i.t.OPEN_WEB_APP_URL,url:"/dashboard/social"}),window.close()},openSettingsFromPanel=async()=>{await sendMessageToWorker({name:i.t.OPEN_WEB_APP_URL,url:"/settings"}),window.close()},debounce=(e,t)=>{let n;return(...i)=>{clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...i)},t)}},throttle=(e,t)=>{let n=0;return(...i)=>{const s=Date.now();s-n>=t&&(n=s,e(...i))}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return Storage})),n.d(t,"c",(function(){return f}));var i=n(2),s=(e=>(e.Local="local",e.Sync="sync",e))(s||{});class Storage{constructor(e){this.storageAreaName=e}get(e){return new Promise((t,n)=>{this.getAll(e).then(n=>{e||t(n),t(n&&e in n?n[e]:null)}).catch(n)})}getAll(...e){return new Promise((t,n)=>{i.a.storage[this.storageAreaName].get(e,e=>{var s;if(e)t(e);else{const e=null==(s=i.a.runtime)?void 0:s.lastError;e?n(e):t(null)}})})}set(e,t){return new Promise((n,s)=>{i.a.storage[this.storageAreaName].set({[e]:t},()=>{var e;const t=null==(e=i.a.runtime)?void 0:e.lastError;t?s(t):n()})})}remove(e){return new Promise((t,n)=>{let s=0;e.forEach(l=>{i.a.storage[this.storageAreaName].remove(l,()=>{var l;const f=null==(l=i.a.runtime)?void 0:l.lastError;f?n(f):++s==e.length&&t()})})})}}new Storage("sync");const l=new Storage("local");t.d=l;const f={get:async e=>i.a.storage.local.get(e),set:async e=>{await i.a.storage.local.set(e)},remove:async e=>i.a.storage.local.remove(e),getSync:async e=>i.a.storage.sync.get(e),setSync:async e=>{await i.a.storage.sync.set(e)},removeSync:async e=>i.a.storage.sync.remove(e)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return getBrowserName}));var i=(e=>(e.CHROME="chrome",e.FIREFOX="firefox",e.OPERA="opera",e.EDGE="edge",e.SAFARI="safari",e.UNKNOWN="unknown",e))(i||{});const getBrowserName=()=>{try{const e=navigator.userAgent;if(e.match(/opera|opr\//i))return"opera";if(e.match(/firefox|fxios/i))return"firefox";if(e.match(/edg/i))return"edge";if(e.match(/safari/i)&&!e.match(/chrome|chromium|crios/i))return"safari";if(e.match(/chrome|chromium|crios/i))return"chrome"}catch(e){}return"unknown"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return fetchWebApi}));const fetchWebApi=(e,t={})=>fetch(e,t)},function(e,t,n){"use strict";n.d(t,"b",(function(){return isObject})),n.d(t,"c",(function(){return isString})),n.d(t,"a",(function(){return getRecordEntries}));const isObject=e=>null!=e&&"object"==typeof e,isString=e=>null!=e&&"string"==typeof e,getRecordEntries=e=>Object.entries(e)},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return sendRuntimeMessage})),n.d(t,"a",(function(){return sendAnalyticsEventMessage})),n.d(t,"b",(function(){return sendPopupBlockAnalyticsEventMessage}));var i=n(0),s=n(3),l=Object.defineProperty,f=Object.defineProperties,d=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))p.call(t,n)&&__defNormalProp(e,n,t[n]);if(h)for(var n of h(t))_.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__objRest=(e,t)=>{var n={};for(var i in e)p.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&h)for(var i of h(e))t.indexOf(i)<0&&_.call(e,i)&&(n[i]=e[i]);return n};const sendRuntimeMessage=e=>Object(s.F)(e),sendAnalyticsEventMessage=e=>{var t=e,{type:n}=t,l=__objRest(t,["type"]);return Object(s.F)({name:i.t.SEND_ANALYTICS_EVENT,eventType:n,eventPayload:{payload:JSON.stringify(l)}})},sendPopupBlockAnalyticsEventMessage=e=>{var t,n,l=e,{type:h,targetUrl:p,sourceUrl:_}=l,g=__objRest(l,["type","targetUrl","sourceUrl"]);return Object(s.F)({name:i.t.SEND_ANALYTICS_EVENT,eventType:h,eventPayload:{payload:JSON.stringify((t=__spreadValues({},g),n={targetUrl:p,sourceUrl:_,targetDomain:Object(s.b)(p),sourceDomain:Object(s.b)(_)},f(t,d(n))))}})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return uuidToAnalyticsInfo})),n.d(t,"a",(function(){return isValidUuid}));var i=n(7),s=n(0),l=n(9),f=n(28),d=n(3),h=n(2);const getLocale=()=>{const e=h.a.i18n.getUILanguage().replace("_","-");return e.length<7?e:"en-US"},getUserAgent=()=>{switch(Object(i.b)()){case i.a.CHROME:return"Chrome";case i.a.FIREFOX:return"Firefox";case i.a.EDGE:return"Microsoft Edge";case i.a.OPERA:return"Opera";case i.a.SAFARI:return"Safari";case i.a.UNKNOWN:return"Unknown"}},uuidToAnalyticsInfo=e=>({uuid:e,country:getLocale(),resource:s.c.ANALYTICS_RESOURCE_TYPES.ORGANIC,user_agent:getUserAgent(),install_version:Object(d.l)().version}),isValidUuid=e=>Object(l.c)(e)&&Object(f.a)(e)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=(e=>(e.Anonymous="anonymous",e.Free="free",e.Premium="premium",e))(i||{})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(55);const{logger:i}=n(98)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return getAnalyticsInfoFromStorage})),n.d(t,"b",(function(){return setAnalyticsInfoToStorage}));var i=n(5),s=n(0),l=n(9),f=n(13);const getAnalyticsInfoFromStorage=async e=>{try{const n=await new i.b(e).get(s.c.ANALYTICS_INFO_KEY);return t=n,Object(l.b)(t)&&"uuid"in t&&Object(f.a)(t.uuid)&&"country"in t&&Object(l.c)(t.country)&&"resource"in t&&Object(l.c)(t.resource)&&"user_agent"in t&&Object(l.c)(t.user_agent)?n:void 0}catch(e){return}var t},setAnalyticsInfoToStorage=async(e,t)=>{try{await new i.b(e).set(s.c.ANALYTICS_INFO_KEY,t)}catch(e){return}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return getOrInitAnalyticsInfo})),n.d(t,"b",(function(){return syncAnalyticsInfoWithWebApp}));var i=n(19),s=n(13),l=n(0),f=n(9),d=n(8);const getAnalyticsInfoFromWebApp=async()=>{try{const e=await Object(d.a)(l.e.ANALYTIC_INFO);if(200!==e.status)throw new Error("Invalid response status");const t=await e.json();if(!(e=>Object(f.b)(e)&&("uuid"in e&&"string"==typeof e.uuid||!("uuid"in e)))(t))throw new Error("Invalid response");return Object(s.a)(t.uuid)?Object(s.b)(t.uuid):void 0}catch(e){return}},syncAnalyticsInfoWithWebApp=async({uuid:e})=>{try{await Object(d.a)(l.e.ANALYTIC_INFO,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e})})}catch(e){return Promise.resolve()}};var h=n(71),p=n(17),_=n(5);const getOrInitAnalyticsInfo=async()=>{const e=await Object(p.a)(_.a.Sync);if(!e){const e=await(async()=>{let e=await Object(p.a)(_.a.Sync);return e||(e=await Object(p.a)(_.a.Local)),e||(e=await getAnalyticsInfoFromWebApp()),e||(e=Object(s.b)(Object(h.a)())),e})();return await(async e=>{await Object(p.b)(_.a.Sync,e),await syncAnalyticsInfoWithWebApp(e)})(e),await Object(i.e)(),e}return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return fetchWithTokenRefreshIfNeeded})),n.d(t,"b",(function(){return getUser})),n.d(t,"e",(function(){return updateUserInfo})),n.d(t,"d",(function(){return logoutWebApp})),n.d(t,"c",(function(){return getUserInfo}));var i=n(0),s=n(5),l=n(8);const fetchWithTokenRefreshIfNeeded=async(e,t,n)=>{const s=await Object(l.a)(e,t);if(s.status===n)return s;if(401===s.status){if(204===(await Object(l.a)(i.e.REFRESH,{method:"POST",headers:{"Content-Type":"application/json"}})).status){const i=await Object(l.a)(e,t);if(i.status===n)return i}return{status:s.status,message:s.statusText}}},getUser=async()=>{try{const e=await fetchWithTokenRefreshIfNeeded(i.e.GET_USER,{},200);if(200===e.status){const t=await e.json();return await s.d.set(i.h.USER,t.user),await s.d.set(i.h.LAST_USER_UPDATE_DATE,Date.now()),t.user||null}throw new Error(`Failed to get user. Response status: '${e.status}'`)}catch(e){return await s.d.remove([i.h.LAST_USER_UPDATE_DATE]),null}},updateUserInfo=async()=>{if(!await s.d.get(i.h.USER))return;const e=await s.d.get(i.h.LAST_USER_UPDATE_DATE);(!e||Date.now()-e>=i.U)&&await getUser()},logoutWebApp=async()=>200===(await Object(l.a)(i.e.LOGOUT)).status,getUserInfo=async()=>{var e;return null!=(e=(await s.c.get([i.h.USER])).user)?e:null}},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return OptEntity}));var i=n(0),s=n(25),l=n(5),f=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),d=(e=>(e[e.UNKNOWN=-1]="UNKNOWN",e[e.OUT=0]="OUT",e[e.IN=1]="IN",e))(d||{});class OptEntity extends s.a{constructor(){super(...arguments),__publicField(this,"state",-1)}getKey(){return i.h.OPT}getLegacyKeys(){return[]}toDTO(){return{state:this.state}}getVersion(){return 1}migrate(e){if(!(e>0))return new Promise(e=>{l.d.get(i.h.SETTINGS).then(t=>{t&&void 0!==t.isOptIn?this.state=t.isOptIn?1:0:this.state=-1,e()})})}static async getOrCreate(){return await(new OptEntity).load()}}},function(e,t,n){"use strict";t.a={twitter_share_link:"https://twitter.com/intent/tweet?hashtags=popups&original_referer=https%3A%2F%2Fpoperblocker.com%3Fref%3Dfb_pp_share&related=socialmediahats&text=I'm%20using%20poper%20blocker%20to%20enjoy%20a%20popup%20free%20browsing%20experience%20pic.twitter.com%2FniqVgqfmAw&url=https%3A%2F%2Fgoo.gl%2FryoaEn&via=poper_blocker",facebook_share_link:"https://www.facebook.com/dialog/share?app_id=1911035589168170&display=popup&href=https%3A%2F%2Fpoperblocker.com%3Fref%3Dfb_pp_share%3Fhl%3Den&hashtag=%23For_No_More_Popups_Click_Below",blockedTypes:{win:"win",tab:"tab",overlay:"overlay",ad:"ad",cookie:"cookie",fbAd:"fbAd",linkedinAd:"linkedinAd",xAd:"xAd",tracker:"tracker",instagramAd:"instagramAd",redditAd:"redditAd",pinterestAd:"pinterestAd",youtubeAd:"youtubeAd",keywords:"keywords"}}},function(e,t,n){"use strict";n.d(t,"f",(function(){return getPrivacyPolicy})),n.d(t,"h",(function(){return getTabUrl})),n.d(t,"a",(function(){return executeCode})),n.d(t,"j",(function(){return randId})),n.d(t,"d",(function(){return getManifestInfo})),n.d(t,"g",(function(){return getRandomInt})),n.d(t,"b",(function(){return getAbsoluteURL})),n.d(t,"c",(function(){return getI18N})),n.d(t,"i",(function(){return prevntBrowserBlock})),n.d(t,"e",(function(){return getParentByLevel}));var i=n(21),s=n(0),l=n(2);function getPrivacyPolicy(e=null){const t=i.a["privacy_policy_"+function getBrowser(){if(/firefox/i.test(navigator.userAgent))return"FF";return"CH"}()];return e?e.replace(/%s/,t):t}function getTabUrl(){return new Promise(e=>{l.a.runtime.sendMessage({name:"requestTabUrl"},t=>{try{let n=new URL(t.url);e({domain:n.hostname,href:n.href})}catch(t){e({domain:document.domain,href:location.href})}})})}function executeCode(e){let t=document.createElement("script");t.textContent=e,function insertBeforeRoot(e){const t=document.head;if(t)t.appendChild(e);else{const t=document.documentElement;t.insertBefore(e,t.firstChild)}}(t),t.remove()}const getRandId=async()=>new Promise(e=>{l.a.storage.local.get(s.h.RDID,t=>{e(t[s.h.RDID])})});async function randId(){if(!await getRandId()){var rr=function(){return(65536*(1+Math.random(Date.now()+14))|0).toString(28).substring(1)};const e=rr()+rr()+rr()+rr()+rr()+rr()+rr()+rr()+rr();l.a.storage.local.set({[s.h.RDID]:e})}return await getRandId()}function getManifestInfo(){return l.a.runtime.getManifest()}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e))+e}function getAbsoluteURL(e){return/^about:blank/i.test(e)||/^(https?:)?\/\//.test(e)?e:e=location.origin+(/^\//.test(e)?"":"/")+e}function getI18N(e,t){return l.a.i18n.getMessage(e)||l.a.i18n.getMessage(t||e)||e}const prevntBrowserBlock=(e,t)=>{let n=[];switch(e){case"allowOnce":case"allowAlways":n=t;break;case"twitter":n=[t.config.twitter_share_link,"poper_share","width=730,height=260,top=150,left="+(screen.availWidth/2-365)];break;case"facebook":n=[t.config.facebook_share_link,"poper_share","width=730,height=360,top=150,left="+(screen.availWidth/2-365)];break;default:return}/^https?\:/.test(n[0])||/^about:blank/i.test(n[0])||(n[0]="http:"+(/^\/\//.test(n[0])?"":"//")+n[0]),/firefox/i.test(navigator.userAgent)&&(n[0]="firefox/ff-open.html?u="+encodeURIComponent(n[0])),window.open(n[0]||"",n[1]||"",n[2]||"")},getParentByLevel=(e,t)=>{let n=e;for(let e=t;e>0;e--){if(!n)return n;n=n.parentNode}return n}},function(e,t,n){"use strict";n.d(t,"c",(function(){return s}));var i=n(42);n.d(t,"b",(function(){return i.b})),n.d(t,"a",(function(){return i.a}));const{externalCommunication:s}=n(120)},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return h}));var i=(e=>(e.INSTALL="install",e.UPDATE="update",e.CHROME_UPDATE="chrome_update",e.SHARED_MODULE_UPDATE="shared_module_update",e))(i||{});const s=("chrome","chrome"),l=["safari-ios"].includes(s),f=["chrome","edge"].includes(s),d=["firefox","safari-ios","safari-macos"].includes(s),h=f?chrome:d?browser:{runtime:{sendMessage:()=>{}}};h.custom={runtime:{setUninstallURL:e=>{f&&chrome.runtime.setUninstallURL(e)},OnInstalledReason:i},contextMenus:{create:async e=>new Promise(t=>{f&&chrome.contextMenus.create(e,()=>(t(e.id),h.runtime.lastError)),t(null)}),remove:e=>{if(f)return chrome.contextMenus.remove(e,()=>h.runtime.lastError)},removeAll:()=>{if(f)return chrome.contextMenus.removeAll()},onClicked:{addListener:e=>{f&&chrome.contextMenus.onClicked.addListener(e)},removeListener:e=>{f&&chrome.contextMenus.onClicked.removeListener(e)}}},webNavigation:{onCreatedNavigationTarget:{addListener:e=>{f&&chrome.webNavigation.onCreatedNavigationTarget.addListener(e)},removeListener:e=>{f&&chrome.webNavigation.onCreatedNavigationTarget.removeListener(e)}}},webRequest:{onBeforeRequest:{addListener:(e,t,n)=>{f&&chrome.webRequest.onBeforeRequest.addListener(e,t,n)},removeListener:e=>{f&&chrome.webRequest.onBeforeRequest.removeListener(e)}}},declarativeNetRequest:{onRuleMatchedDebug:{addListener:e=>{f&&chrome.declarativeNetRequest.onRuleMatchedDebug.addListener(e)},removeListener:e=>{f&&chrome.declarativeNetRequest.onRuleMatchedDebug.removeListener(e)}}},action:{setIcon:e=>{if(f)return chrome.action.setIcon(e)},setBadgeText:e=>{if(f)return chrome.action.setBadgeText(e)},setBadgeBackgroundColor:e=>{if(f)return chrome.action.setBadgeBackgroundColor(e)},setBadgeTextColor:e=>{if(f)return chrome.action.setBadgeTextColor(e)},getUserSettings:async()=>f||"firefox"===s?chrome.action.getUserSettings():{isOnToolbar:!0}},contentSettings:{notifications:{set:e=>!!f&&(chrome.contentSettings.notifications.set(e),!0)}},windows:{onRemoved:{addListener:e=>{f&&chrome.windows.onRemoved.addListener(e)},removeListener:e=>{f&&chrome.windows.onRemoved.removeListener(e)}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Entity}));var i=n(5),s=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class Entity{constructor(e=new i.b(i.a.Local)){this.storage=e,__publicField(this,"v")}async load(){const e=[...this.getLegacyKeys(),this.getKey()].filter(e=>void 0!==e);if(!e)return this;const t=await this.storage.getAll(...e);return t?(this.getLegacyKeys().filter(e=>e in t).forEach(e=>{this.mergeObject(t[e])}),this.getKey()in t&&this.mergeObject(t[this.getKey()]),(!this.v||this.v<this.getVersion())&&(await this.migrate(this.v?this.v:0),await this.save()),this):this}async save(){const e=Object.assign({},this.toDTO(),{v:this.getVersion()});return this.storage.set(this.getKey(),e)}mergeObject(e){Object.keys(e).forEach(t=>{this[t]=e[t]})}}},,,function(e,t,n){"use strict";var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;t.a=function validate(e){return"string"==typeof e&&i.test(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return prefixLogger}));const prefixLogger=(e,t)=>{const prefixMethod=n=>i=>{e[n](`${t}: ${i}`)};return{debug:prefixMethod("debug"),error:prefixMethod("error")}}},function(e,t,n){"use strict";var i=n(3),s=n(0),l=n(5);t.a=new class WhitelistHelper{list(e=!0){return new Promise(t=>{l.d.getAll(s.h.WHITELIST,s.h.DEFAULT_WHITELIST).then(n=>{const i=n[s.h.DEFAULT_WHITELIST]||[],l=n[s.h.WHITELIST]||[];t(e?[...i,...l]:[...l])})})}add(e){return this.list().then(t=>{t.push(e),l.d.set(s.h.WHITELIST,t)})}remove(e){return this.list().then(t=>{t=t.filter(t=>t!==e),l.d.set(s.h.WHITELIST,t)})}async containsDomain(e,t={}){const{tailOnly:n=!1,addDefault:s=!0}=t,l=await this.list(s);return e=Object(i.b)(e),l.some(t=>{t.includes("http")||(t="http://"+t);const i=new URL(t).hostname,s=null==i?void 0:i.split("www.").filter(e=>e)[0];return n?e.endsWith(s):s===e})}}},function(e,t,n){"use strict";var i=n(20),s=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);t.a=new class OptManager{constructor(){__publicField(this,"onOptStateChangedListener")}async optIn(){const e=await i.a.getOrCreate();return e.state=i.b.IN,e.save().then(()=>this.onOptStateChanged(e.state))}async optOut(){const e=await i.a.getOrCreate();return e.state=i.b.OUT,e.save().then(()=>this.onOptStateChanged(e.state))}async isOptIn(){return(await i.a.getOrCreate()).state==i.b.IN}async getOptInCurrentState(){return(await i.a.getOrCreate()).state}async isOptInStatusUnknown(){return(await i.a.getOrCreate()).state==i.b.UNKNOWN}setOptStateChangedListener(e){this.onOptStateChangedListener=e}onOptStateChanged(e){this.onOptStateChangedListener&&this.onOptStateChangedListener(e)}}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(5),s=n(0),l=n(8),f=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const d=new class RemoteConfig{constructor(){__publicField(this,"lastConfigFetchTsStorageKey","remoteConfigLastFetch"),__publicField(this,"configStorageKey","remoteConfig")}async getConfig(e){const t=Date.now(),n=await i.d.get(this.lastConfigFetchTsStorageKey)||0;let s=await this.getConfigFromStorage();return(!s||t-432e5>n)&&(await this.updateConfig(),s=await this.getConfigFromStorage()),s[e]||{}}async getConfigFromStorage(){return await i.d.get(this.configStorageKey)}async updateConfig(){const e=await Object(l.a)(s.e.CONFIG,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json();await i.d.set(this.configStorageKey,t),await this.updateLastUpdate()}}async updateLastUpdate(){await i.d.set(this.lastConfigFetchTsStorageKey,Date.now())}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return BlockedItemsCounter})),n.d(t,"c",(function(){return UnblockedItemsCounter})),n.d(t,"b",(function(){return BlockedItemsPerTab}));var i=n(0),s=n(21),l=n(25),f=n(3),d=n(59),h=n(9),p=n(2),_=Object.defineProperty,g=Object.defineProperties,E=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&__defNormalProp(e,n,t[n]);if(y)for(var n of y(t))b.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__spreadProps=(e,t)=>g(e,E(t)),__publicField=(e,t,n)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,n),n);const O="UPDATE",S="PRUNE",v="CLEAR_IF_DOMAIN_CHANGED";class BlockedItemsCounter extends l.a{constructor(){super(...arguments),__publicField(this,"pop",0),__publicField(this,"win",0),__publicField(this,"tab",0),__publicField(this,"overlay",0),__publicField(this,"ad",0),__publicField(this,"cookie",0),__publicField(this,"fbAd",0),__publicField(this,"linkedinAd",0),__publicField(this,"xAd",0),__publicField(this,"tracker",0),__publicField(this,"instagramAd",0),__publicField(this,"redditAd",0),__publicField(this,"pinterestAd",0),__publicField(this,"socialContent",0),__publicField(this,"youtubeAd",0),__publicField(this,"chatgptMessage",0),__publicField(this,"keywords",0)}getKey(){return i.h.TOTAL_BLOCKS_BY_TYPE}getLegacyKeys(){return[]}toDTO(){return{pop:this.pop,win:this.win,tab:this.tab,overlay:this.overlay,ad:this.ad,cookie:this.cookie,fbAd:this.fbAd,linkedinAd:this.linkedinAd,xAd:this.xAd,tracker:this.tracker,instagramAd:this.instagramAd,redditAd:this.redditAd,pinterestAd:this.pinterestAd,socialContent:this.socialContent,youtubeAd:this.youtubeAd,chatgptMessage:this.chatgptMessage,keywords:this.keywords}}getVersion(){return 1}migrate(){return Promise.resolve()}}class UnblockedItemsCounter extends BlockedItemsCounter{getKey(){return i.h.TOTAL_UNBLOCKS_BY_TYPE}}const copyBlockedPerTabId=e=>__spreadProps(__spreadValues({},e),{totalBlocksByType:__spreadValues({},e.totalBlocksByType)}),copyBlockedPerTabs=e=>Object.fromEntries(Object(h.a)(e).map(([e,t])=>[e,copyBlockedPerTabId(t)]));class BlockedItemsPerTab extends l.a{constructor(){super(...arguments),__publicField(this,"value",{})}load(){return super.load()}getRaw(){return __spreadProps(__spreadValues({},this.toDTO()),{v:this.getVersion()})}getAll(){return copyBlockedPerTabs(this.value)}getAllTabIds(){return Object.keys(this.value).map(e=>Number(e))}getByTabId(e){return this.value[e]?copyBlockedPerTabId(this.value[e]):void 0}setByTabId(e,t){this.value[e]=t}deleteByTabId(e){delete this.value[e]}getKey(){return i.h.TOTAL_BLOCKS_BY_TAB_ID}getLegacyKeys(){return[]}toDTO(){return{value:copyBlockedPerTabs(this.value)}}getVersion(){return 2}migrate(e){return 1===e&&(this.value=Object.fromEntries(Object.entries(this).map(e=>{const[t,n]=e;return isNaN(Number(t))?void 0:[t,n]}).filter(d.a))),Promise.resolve()}}t.d=new class BlockingManager{constructor(){__publicField(this,"queue",[]),__publicField(this,"inProcess",!1)}async getTotalBlocksByType(){return await(new BlockedItemsCounter).load()}async getTotalUnBlocksByType(){return await(new UnblockedItemsCounter).load()}async getTotalBlockForKeys(...e){const t=await this.getTotalBlocksByType();let n=0;return e.forEach(e=>{n+=e in t?t[e]:0}),n}async getTotalBlocksPerTab(){return await(new BlockedItemsPerTab).load()}updateTotalBlocksByTabId(e){this.addActionToQueue({data:e,type:O})}addActionToQueue(e){this.queue.push(e),this.inProcess||(this.inProcess=!0,this.processActionQueue())}async runUpdate(e){const t=e.tabId,n=e.count||1,i=await Object(f.m)(t,{currentWindow:!1}),s=new URL(i.url).host,l=await this.getTotalBlocksPerTab();let d=l.getByTabId(t);d&&d.host===s||(d={host:s,lastUpdated:Date.now(),totalCount:0,totalBlocksByType:this.getEmptyBlockList()}),d.totalBlocksByType[e.type]+=n,d.lastUpdated=Date.now(),d.host=s,l.setByTabId(t,d),await l.save(),await this.updateStatsTotals(e)}async updateStatsTotals(e){const t=await this.getTotalBlocksByType();t[e.type]+=e.count||1,await t.save()}async updateUnblockStatsStatsTotals(e){const t=await this.getTotalUnBlocksByType();t[e.type]+=e.count||1,await t.save()}async clearTotalBlocksOfTabIdIfNeeded(e,t){e&&this.addActionToQueue({data:{tabId:e,host:t},type:v})}async runClearIfDomainChanged({tabId:e,host:t}){const n=await this.getTotalBlocksPerTab(),i=n.getByTabId(e);i&&i.host!==t&&n.deleteByTabId(e),n.save()}pruneTotalBlocksPerTab(){this.addActionToQueue({type:S})}getEmptyBlockList(){return{pop:0,win:0,tab:0,overlay:0,ad:0,cookie:0,fbAd:0,linkedinAd:0,xAd:0,tracker:0,instagramAd:0,redditAd:0,pinterestAd:0,youtubeAd:0,chatgptMessage:0,keywords:0}}updateBlockedItemCount(e,t,n){const i=e;return"pop"==t.block?t.args&&t.args[2]&&/(?:(?:width=)|(?:height=))/.test(t.args[2])?i.win=(i.win||0)+1:i.tab=(i.tab||0)+1:void 0!==i[t.block]?i[t.block]=i[t.block]+(n||1):t.block in s.a.blockedTypes?i[t.block]=n||1:console.error("Error: Undefined block type ",t.block),i}async processActionQueue(){try{for(;this.queue.length>0;){const e=this.queue.shift();switch(e.type){case O:await this.runUpdate(e.data);break;case S:await this.runPrune();break;case v:await this.runClearIfDomainChanged(e.data)}}}catch(e){console.error(e)}finally{this.inProcess=!1}}async runPrune(){const e=(await p.a.tabs.query({})).map(({id:e})=>e),t=await this.getTotalBlocksPerTab();t.getAllTabIds().forEach(n=>{e.includes(n)||t.deleteByTabId(n)}),await t.save()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=(e=>(e.WEB_APP="web-app",e.EXTENSION="extension",e))(i||{})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=(e=>(e.reloadTracker="reloadTracker",e.adsBlocker="adsBlocker",e.cookieCrumble="cookieCrumble",e.trackerBlocker="trackerBlocker",e.youtubeBlocker="youtubeBlocker",e.socialConfig="socialConfig",e.contentConfig="contentConfig",e.videoStreamAdBlocker="videoStreamAdBlocker",e))(i||{})},,function(e,t,n){"use strict";n.d(t,"a",(function(){return clog}));var i=n(0),s=n(12);const clog=(e,t)=>{Object(s.c)({name:i.t.CONTENT_LOG,message:"content: "+e,data:t})}},function(e,t,n){"use strict";var i=n(81);n.d(t,"a",(function(){return i.a}))},,function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));const i={ON_LOGOUT:"on-logout",ON_EXTENSION_INFO_UPDATED:"on-extension-info-updated",SETTINGS_CHANGED_IN_EXTENSION:"settings-changed-in-extension",UPDATE_EXTENSION_ID:"update-extension-id"},s={SYNC_SETTINGS:"sync-settings",GET_FEATURES_LIST:"get-features-list",EXTENSION_IS_PINNED:"extension-is-pinned",LOGOUT:"logout",GET_SETTINGS:"get-settings",GET_EXTENSION_INFO:"get-extension-info",GET_EXTENSION_STATUS:"get-extension-status",UPDATE_EXTENSION_STATUS:"update-extension-status",UPDATE_RATING:"update-rating",GET_IS_RATE_US_SHOULD_BE_DISPLAYED:"get-is-rate-us-should-be-displayed",NOTIFY_EXTENSION_ON_SETTINGS_CHANGE:"notify-extension-on-settings-change",REQUEST_EXTENSION_ID:"request-extension-id",OPEN_URL:"openUrl",LOGIN:"login",SUBSCRIPTION_SUCCESS:"subscription-success",OPT_IN_AGREE:"opt-in-agree",OPT_IN_DISAGREE:"opt-in-disagree"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(25),s=n(0),l=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const f=class _RateUsEntity extends i.a{constructor(){super(...arguments),__publicField(this,"shouldBeDisplayed",!1),__publicField(this,"shouldBeDisplayedThankMsg",!1),__publicField(this,"rating",0),__publicField(this,"userFeedback",""),__publicField(this,"isFeedbackSubmit",!1)}getKey(){return s.h.RATING_US_MODAL}getLegacyKeys(){return[]}toDTO(){return{shouldBeDisplayed:this.shouldBeDisplayed,shouldBeDisplayedThankMsg:this.shouldBeDisplayedThankMsg,rating:this.rating,userFeedback:this.userFeedback,isFeedbackSubmit:this.isFeedbackSubmit}}getVersion(){return 1}migrate(){}async enable(){return this.shouldBeDisplayed=!0,this.isFeedbackSubmit=!1,await this.save(),this}async disable(){return this.isFeedbackSubmit=!0,await this.save(),this}getShouldBeDisplayed(){return(this.shouldBeDisplayed||this.shouldBeDisplayedThankMsg)&&!this.isFeedbackSubmit}async displayThankMsg(){return this.shouldBeDisplayedThankMsg=!0,await this.save(),this}async setUserRating(e=0){return this.rating=e,await this.save(),this}async setUserFeedback(e=""){return this.userFeedback=e,await this.save(),this}getUserFeedback(){return{rating:this.rating,userFeedback:this.userFeedback}}getShouldBeDisplayedThankMsg(){return this.shouldBeDisplayedThankMsg}};__publicField(f,"getDefault",()=>new f);let d=f},,function(e,t,n){"use strict";n.d(t,"b",(function(){return isError})),n.d(t,"a",(function(){return getErrorMessage}));const isError=e=>"object"==typeof e&&e&&"message"in e&&e.message&&"string"==typeof e.message,getErrorMessage=e=>isError(e)?e.message:"Unknown error"},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(0),s=n(15),l=n(51);const f={[i.c.ANALYTICS_EVENT_TYPES.POP_BLOCK_PST_OPEN_1_BLACKLIST]:{sampleSize:200},[i.c.ANALYTICS_EVENT_TYPES.POP_WHITE_PST_OPEN_1_SRC]:{sampleSize:200},[i.c.ANALYTICS_EVENT_TYPES.POP_WHITE_PST_OPEN_1_TRGT]:{sampleSize:200},[i.I.POP_BLOCK_PRE_OPEN_1_NO_USER_INT]:{sampleSize:200},[i.I.POP_BLOCK_PRE_OPEN_1_CAP_ELEMENT]:{sampleSize:200},[i.I.POP_BLOCK_PRE_OPEN_1_OVERLAYISH]:{sampleSize:200},[i.I.POP_BLOCK_PRE_OPEN_1_FS_ON_OPEN]:{sampleSize:200},[i.I.POP_BLOCK_PRE_OPEN_1_BLUR_CALLED]:{sampleSize:200},[i.I.POP_BLOCK_PRE_OPEN_1_ATAG_CLICK]:{sampleSize:200},[i.I.POP_BLOCK_PRE_OPEN_1_ATAG_DISPATCH]:{sampleSize:200},[i.I.POP_BLOCK_PRE_OPEN_1_ARTIF_CLICK]:{sampleSize:200},[i.J.POP_WHITE_PRE_OPEN_1_WINOPEN_LIST]:{sampleSize:200},[i.J.POP_WHITE_PRE_OPEN_1_WINOPEN_DOM]:{sampleSize:200},[i.J.POP_WHITE_PRE_OPEN_1_WINOPEN_LOGIN]:{sampleSize:200},[i.J.POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_LIST]:{sampleSize:200},[i.J.POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_DOM]:{sampleSize:200},[i.J.POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_PAR]:{sampleSize:200},[i.J.POP_WHITE_PRE_OPEN_1_CR_EL_DISP_LIST]:{sampleSize:200},[i.J.POP_WHITE_PRE_OPEN_1_CR_EL_DISP_DOM]:{sampleSize:200},[i.J.POP_WHITE_PRE_OPEN_1_CR_EV_LIST]:{sampleSize:200},[i.J.POP_WHITE_PRE_OPEN_1_CR_EV_LOGIN]:{sampleSize:200},[i.J.POP_WHITE_PRE_OPEN_1_CR_EV_DOM]:{sampleSize:200},[i.c.ANALYTICS_EVENT_TYPES.COOKIES_OVERLAY_BLOCKED]:{sampleSize:10}},d={[i.c.ANALYTICS_EVENT_TYPES.POP_BLOCK_PST_OPEN_1_BLACKLIST]:{count:0},[i.c.ANALYTICS_EVENT_TYPES.POP_WHITE_PST_OPEN_1_SRC]:{count:0},[i.c.ANALYTICS_EVENT_TYPES.POP_WHITE_PST_OPEN_1_TRGT]:{count:0},[i.I.POP_BLOCK_PRE_OPEN_1_NO_USER_INT]:{count:0},[i.I.POP_BLOCK_PRE_OPEN_1_CAP_ELEMENT]:{count:0},[i.I.POP_BLOCK_PRE_OPEN_1_OVERLAYISH]:{count:0},[i.I.POP_BLOCK_PRE_OPEN_1_FS_ON_OPEN]:{count:0},[i.I.POP_BLOCK_PRE_OPEN_1_BLUR_CALLED]:{count:0},[i.I.POP_BLOCK_PRE_OPEN_1_ATAG_CLICK]:{count:0},[i.I.POP_BLOCK_PRE_OPEN_1_ATAG_DISPATCH]:{count:0},[i.I.POP_BLOCK_PRE_OPEN_1_ARTIF_CLICK]:{count:0},[i.J.POP_WHITE_PRE_OPEN_1_WINOPEN_LIST]:{count:0},[i.J.POP_WHITE_PRE_OPEN_1_WINOPEN_DOM]:{count:0},[i.J.POP_WHITE_PRE_OPEN_1_WINOPEN_LOGIN]:{count:0},[i.J.POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_LIST]:{count:0},[i.J.POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_DOM]:{count:0},[i.J.POP_WHITE_PRE_OPEN_1_CR_EL_CLCK_PAR]:{count:0},[i.J.POP_WHITE_PRE_OPEN_1_CR_EL_DISP_LIST]:{count:0},[i.J.POP_WHITE_PRE_OPEN_1_CR_EL_DISP_DOM]:{count:0},[i.J.POP_WHITE_PRE_OPEN_1_CR_EV_LIST]:{count:0},[i.J.POP_WHITE_PRE_OPEN_1_CR_EV_LOGIN]:{count:0},[i.J.POP_WHITE_PRE_OPEN_1_CR_EV_DOM]:{count:0},[i.c.ANALYTICS_EVENT_TYPES.COOKIES_OVERLAY_BLOCKED]:{count:0}};var h=Object.defineProperty,p=Object.defineProperties,_=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))E.call(t,n)&&__defNormalProp(e,n,t[n]);if(g)for(var n of g(t))y.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__spreadProps=(e,t)=>p(e,_(t));const m=(({unsampledSendAnalyticsEvent:e})=>{const t=new l.SyncStoredLocalValue(i.h.ANALYTICS_EVENT_SAMPLE_CONFIG,i.h.ANALYTICS_EVENT_SAMPLE_CONFIG_LAST_SYNCED,{eventNameToSampleConfig:f}),n=Object(l.createSyncedValueService)({outdatedAfterInMs:i.y,storage:t,logger:s.a,fetchProps:{endpoint:i.e.ANALYTICS_EVENT_SAMPLE_CONFIG},responseToValue:e=>e.config}),h=new l.SampleService(i.h.ANALYTICS_EVENT_SAMPLE_INFO,d);return async(t,i)=>{var s;if((e=>Object.keys(f).includes(e))(t)){const{value:{eventNameToSampleConfig:l}}=await n.syncIfNecessary(),d=null!=(s=l[t])?s:f[t];return h.sample(()=>{e(t,__spreadProps(__spreadValues({},i),{payload:JSON.stringify(__spreadProps(__spreadValues({},(null==i?void 0:i.payload)?JSON.parse(i.payload):{}),{sampleSize:d.sampleSize}))}))},t,d)}return e(t,i)}})({unsampledSendAnalyticsEvent:n(64).c})},,function(e,t,n){"use strict";var i=n(104);n.o(i,"SampleService")&&n.d(t,"SampleService",(function(){return i.SampleService})),n.o(i,"StoredValueImpl")&&n.d(t,"StoredValueImpl",(function(){return i.StoredValueImpl})),n.o(i,"SyncStoredLocalValue")&&n.d(t,"SyncStoredLocalValue",(function(){return i.SyncStoredLocalValue})),n.o(i,"createSyncedValueService")&&n.d(t,"createSyncedValueService",(function(){return i.createSyncedValueService})),n.o(i,"getSettingsMessagePayload")&&n.d(t,"getSettingsMessagePayload",(function(){return i.getSettingsMessagePayload})),n.o(i,"toggleAutoOptInFeatures")&&n.d(t,"toggleAutoOptInFeatures",(function(){return i.toggleAutoOptInFeatures}));var s=n(272);n.o(s,"SampleService")&&n.d(t,"SampleService",(function(){return s.SampleService})),n.o(s,"StoredValueImpl")&&n.d(t,"StoredValueImpl",(function(){return s.StoredValueImpl})),n.o(s,"SyncStoredLocalValue")&&n.d(t,"SyncStoredLocalValue",(function(){return s.SyncStoredLocalValue})),n.o(s,"createSyncedValueService")&&n.d(t,"createSyncedValueService",(function(){return s.createSyncedValueService})),n.o(s,"getSettingsMessagePayload")&&n.d(t,"getSettingsMessagePayload",(function(){return s.getSettingsMessagePayload})),n.o(s,"toggleAutoOptInFeatures")&&n.d(t,"toggleAutoOptInFeatures",(function(){return s.toggleAutoOptInFeatures}));var l=n(105);n.o(l,"SampleService")&&n.d(t,"SampleService",(function(){return l.SampleService})),n.o(l,"StoredValueImpl")&&n.d(t,"StoredValueImpl",(function(){return l.StoredValueImpl})),n.o(l,"SyncStoredLocalValue")&&n.d(t,"SyncStoredLocalValue",(function(){return l.SyncStoredLocalValue})),n.o(l,"createSyncedValueService")&&n.d(t,"createSyncedValueService",(function(){return l.createSyncedValueService})),n.o(l,"getSettingsMessagePayload")&&n.d(t,"getSettingsMessagePayload",(function(){return l.getSettingsMessagePayload})),n.o(l,"toggleAutoOptInFeatures")&&n.d(t,"toggleAutoOptInFeatures",(function(){return l.toggleAutoOptInFeatures}));var f=n(278);n.o(f,"SampleService")&&n.d(t,"SampleService",(function(){return f.SampleService})),n.o(f,"StoredValueImpl")&&n.d(t,"StoredValueImpl",(function(){return f.StoredValueImpl})),n.o(f,"SyncStoredLocalValue")&&n.d(t,"SyncStoredLocalValue",(function(){return f.SyncStoredLocalValue})),n.o(f,"createSyncedValueService")&&n.d(t,"createSyncedValueService",(function(){return f.createSyncedValueService})),n.o(f,"getSettingsMessagePayload")&&n.d(t,"getSettingsMessagePayload",(function(){return f.getSettingsMessagePayload})),n.o(f,"toggleAutoOptInFeatures")&&n.d(t,"toggleAutoOptInFeatures",(function(){return f.toggleAutoOptInFeatures}));var d=n(281);n.d(t,"toggleAutoOptInFeatures",(function(){return d.a}));var h=n(283);n.d(t,"getSettingsMessagePayload",(function(){return h.a}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n(36),s=n(0);const l={[s.m.POPUPS]:{enabled:!0,storageKey:"popups",isPremium:!1,available:[i.a.EXTENSION,i.a.WEB_APP],defaultState:!0,isOptIn:!1},[s.m.DETECT_OVERLAYS]:{enabled:!0,storageKey:"detectOverlays",isPremium:!1,available:[i.a.EXTENSION,i.a.WEB_APP],isOptIn:!0,remoteConfigKey:"overlays",defaultState:!1},[s.m.PUSH_NOTIFICATION]:{enabled:!0,storageKey:"pushNotification",isPremium:!1,available:[i.a.EXTENSION],isOptIn:!1,defaultState:!1},[s.m.COOKIE_CRUMBLER]:{enabled:!0,storageKey:"cookieCrumbler",isPremium:!1,available:[i.a.EXTENSION,i.a.WEB_APP],isOptIn:!0,defaultState:!1},[s.m.YOUTUBE_BLOCKER]:{enabled:!0,storageKey:"youtubeBlocker",isPremium:!1,available:[i.a.EXTENSION,i.a.WEB_APP],defaultState:!0,isOptIn:!1},[s.m.VIDEO_STREAM_AD_BLOCKER]:{enabled:!0,storageKey:"videoStreamAdBlocker",isPremium:!1,available:[i.a.EXTENSION,i.a.WEB_APP],defaultState:!0,isOptIn:!1},[s.m.HIDE_ELEMENTS]:{enabled:!0,storageKey:"hideElements",isPremium:!1,available:[i.a.WEB_APP],isOptIn:!1,defaultState:!0},[s.m.SOCIAL_CONTENT_BLOCKER]:{enabled:!0,storageKey:"socialContentBlocker",isPremium:!1,available:[i.a.EXTENSION,i.a.WEB_APP],isOptIn:!1,defaultState:!0},[s.m.TRACKERS_BLOCKER]:{enabled:!0,storageKey:"trackersBlocker",isPremium:!0,available:[i.a.EXTENSION,i.a.WEB_APP],defaultState:!1,isOptIn:!1},[s.m.SOCIAL_ADS_BLOCKING]:{enabled:!0,storageKey:"facebookAdds",isPremium:!0,available:[i.a.EXTENSION,i.a.WEB_APP],defaultState:!1,isOptIn:!1},[s.m.ADS_BLOCKER]:{enabled:!0,storageKey:"adsBlocker",isPremium:!0,available:[i.a.EXTENSION,i.a.WEB_APP],defaultState:!1,isOptIn:!1}};var f=n(65),d=n(86),h=n(5),p=n(15),_=Object.defineProperty,g=Object.defineProperties,E=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&__defNormalProp(e,n,t[n]);if(y)for(var n of y(t))b.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__publicField=(e,t,n)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,n),n);const O=class _FeaturesRegistry{constructor(){__publicField(this,"storageKey",s.h.SETTINGS),__publicField(this,"featuresConfig"),__publicField(this,"loadingPromise"),this.loadingPromise=this.initializeFeatures()}static getInstance(){return _FeaturesRegistry.instance||(_FeaturesRegistry.instance=new _FeaturesRegistry),_FeaturesRegistry.instance}async getAllFeatureConfigs(e){if(await this.ensureConfigurationLoaded(),!e)return this.featuresConfig;const t=Object.entries(this.featuresConfig).filter(([,t])=>void 0!==e.isPremium?e.isPremium?!0===t.isPremium:!t.isPremium:void 0===e.isOptIn||(e.isOptIn?!0===t.isOptIn:!t.isOptIn));return Object.fromEntries(t)}async getFeatureConfig(e){return await this.ensureConfigurationLoaded(),this.featuresConfig[e]}async setFeatureConfig(e,t){this.featuresConfig&&(this.featuresConfig[e]=t,await this.persistSettings())}async getFeaturesAsRemoteKeyUserValueMap(){const e=await this.getAllFeatureConfigs();return Object.entries(e).reduce((e,[t,n])=>{var i;return e[null!=(i=n.remoteConfigKey)?i:t]=n.userValue,e},{})}async initializeFeatures(){const e=await h.c.get([this.storageKey]),t=Object.entries(l);this.featuresConfig=t.reduce((t,[n,i])=>{var s,l,f;const d=n;let h;var p;return h=e.settings?null!=(l=null!=(s=e.settings[d])?s:i.defaultState)&&l:null!=(f=i.defaultState)&&f,t[d]=(p=__spreadValues({},i),g(p,E({userValue:h}))),t},{}),await this.applyAbTests(),await this.persistSettings(),this.loadingPromise=void 0,p.a.debug("FeaturesRegistry: config loaded")}async applyAbTests(){if(!this.featuresConfig)return;const e=Object.entries(this.featuresConfig).filter(([,e])=>e.abTest),t=await f.a();for(const[n,i]of e){if(!i.abTest)continue;const e=n;if(t.getVariant(i.abTest.growthBookTestName)===d.b.TREATMENT){const t=i.abTest.configPropertyToggle,n=!this.featuresConfig[e][t];this.featuresConfig[e][t]=n}}}async ensureConfigurationLoaded(){if(this.loadingPromise&&await this.loadingPromise,!this.featuresConfig)throw new Error("Features config not loaded")}async persistSettings(){if(this.featuresConfig){const e=await h.c.get([this.storageKey]),t=Object.entries(this.featuresConfig).reduce((e,[t,n])=>(e[t]=n.userValue,e),{});await h.c.set({settings:__spreadValues(__spreadValues({},e.settings),t)}),p.a.debug("FeaturesRegistry: Persisted settings")}}};__publicField(O,"instance");let S=O},,function(e,t){},,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(25),s=n(0),l=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const f=class _SpecialOfferEntity extends i.a{constructor(){super(...arguments),__publicField(this,"shouldBeDisplayed",!0),__publicField(this,"installTime",-1),__publicField(this,"openSettingsPanelNumber",0),__publicField(this,"maybeLaterTime",-1)}getLegacyKeys(){return[]}toDTO(){return{shouldBeDisplayed:this.shouldBeDisplayed,installTime:this.installTime,openSettingsPanelNumber:this.openSettingsPanelNumber,maybeLaterTime:this.maybeLaterTime}}getVersion(){return 1}migrate(){}async countOpenSettingsPanel(){return this.openSettingsPanelNumber++,await this.save(),this}getKey(){return s.h.SPECIAL_OFFER_MODAL}async initIfNeeded(){return-1===this.installTime&&await this.init(),this}isTimeToDisplayModal(){const e=Date.now()-this.installTime-14*s.w>0,t=Date.now()-this.maybeLaterTime-2*s.w>0,n=-1===this.maybeLaterTime&&(e||this.openSettingsPanelNumber>12),i=this.maybeLaterTime>-1&&t;return this.shouldBeDisplayed&&(n||i)}async disable(){return this.shouldBeDisplayed=!1,await this.save(),this}async enable(){return this.shouldBeDisplayed=!0,await this.save(),this}async updateMaybeLaterTime(){return this.maybeLaterTime=Date.now(),await this.save(),this}async init(){return this.installTime=Date.now(),this.shouldBeDisplayed=!0,this.openSettingsPanelNumber=0,this.maybeLaterTime=-1,await this.save(),this}};__publicField(f,"getDefault",()=>new f);let d=f},,function(e,t,n){"use strict";n.d(t,"a",(function(){return isNotNullOrUndefined}));const isNotNullOrUndefined=e=>null!=e},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));const i="y1fnpS6qpprLb5Lm",s="data-"+i,l="youtubeAdBlocked"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l}));const i="zWsHSVgkwMpxLAiUBKOh",s="data-"+i,l="vastBlocked"},function(e,t,n){"use strict";n.d(t,"a",(function(){return getGeneralEventInfo})),n.d(t,"b",(function(){return trackEvent})),n.d(t,"c",(function(){return unsampledSendAnalyticsEvent}));var i=n(0),s=n(103),l=n(3),f=n(87),d=n(18),h=n(8),p=n(310),_=n.n(p),g=n(15),E=n(45),y=n(71),m=n(5),b=n(20),O=n(53),S=Object.defineProperty,v=Object.defineProperties,T=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))I.call(t,n)&&__defNormalProp(e,n,t[n]);if(w)for(var n of w(t))A.call(t,n)&&__defNormalProp(e,n,t[n]);return e};const getGeneralEventInfo=()=>{const{version:e}=Object(l.l)(),t=_.a.getParser(navigator.userAgent),n=t.getBrowserName(),s=t.getOSName(),f=t.getPlatformType();return{platform:i.c.ANALYTICS_PLATFORM,product:i.c.ANALYTICS_PRODUCT,timestamp:(new Date).getTime(),browser:n,os:s,device:f,version:e}},trackEvent=async(e,t,n)=>{g.a.debug("[TrackEvent] Sending event "+e);try{await Object(h.a)(i.e.ANALYTICS_SEND_EVENT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((l=t,f=__spreadValues({event_type:e},n),{ev:s.Buffer.from(Array.from(JSON.stringify(f)).map((e,t)=>e.charCodeAt(0)-(l.length+2*t)).toString()).toString("base64"),se:l}))})}catch(e){g.a.debug("Failed to track event: "+Object(E.a)(e))}var l,f},unsampledSendAnalyticsEvent=async(e,t={})=>{var n;const s=await Object(d.a)(),h=await(async()=>{let{analyticsDeviceId:e}=await m.c.get([i.h.ANALYTICS_DEVICE_ID]);return e||(e=Object(y.a)(),await m.c.set({[i.h.ANALYTICS_DEVICE_ID]:e})),e})(),{user:p,opt:_,lastUserUpdateDate:E,socialContentKeyWords:S}=await m.c.get([i.h.USER,i.h.OPT,i.h.LAST_USER_UPDATE_DATE,i.h.SOCIAL_CONTENT_KEYWORDS]),w=await Object(l.p)(),I=await O.a.getInstance().getFeaturesAsRemoteKeyUserValueMap(),{installEventSent:A}=await m.c.getSync([i.i.INSTALL_EVENT_SENT]),P=!!p&&void 0!==E,C=p?p.isPremium?i.c.TIERS.PREMIUM:i.c.TIERS.FREE:i.c.TIERS.ANONYMOUS,R=(null==_?void 0:_.state)===b.b.IN?["Opt in"]:[],N=null!=(n=null==p?void 0:p.premiumDetails)?n:{},L=A?new Date(A).toISOString():void 0,D=null!=S?S:[],{uuid:k,country:B,resource:F,user_agent:x,install_version:M}=s,U=__spreadValues(__spreadValues((K=__spreadValues({tier:C,permissions:R,premiumDetails:N,is_logged_in:P,featuresUsed:I,appFirstInstall:L,is_pro_user:Boolean(p&&p.isPremium),device_id:h,isExtensionEnabled:w,socialContentKeywords:D},getGeneralEventInfo()),v(K,T({uuid:k,country:B,resource:F,user_agent:x}))),M&&{install_version:M}),t);var K;g.a.debug("[UnsampledSendAnalyticsEvent] Sending event "+e),Object(f.a)(e,U),await trackEvent(e,s.uuid,U)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return getInstance})),n.d(t,"b",(function(){return sync}));n(282),n(121);var i=n(0),s=n(51),l=/^[a-zA-Z:_][a-zA-Z0-9:_.-]*$/,f={revert:function revert(){}},d=new Map,h=new Set;function getElementRecord(e){var t=d.get(e);return t||(t={element:e,attributes:{}},d.set(e,t)),t}function createElementPropertyRecord(e,t,n,i,s){var l=n(e),f={isDirty:!1,originalValue:l,virtualValue:l,mutations:[],el:e,_positionTimeout:null,observer:new MutationObserver((function(){if("position"!==t||!f._positionTimeout){"position"===t&&(f._positionTimeout=setTimeout((function(){f._positionTimeout=null}),1e3));var i=n(e);"position"===t&&i.parentNode===f.virtualValue.parentNode&&i.insertBeforeNode===f.virtualValue.insertBeforeNode||i!==f.virtualValue&&(f.originalValue=i,s(f))}})),mutationRunner:s,setValue:i,getCurrentValue:n};return"position"===t&&e.parentNode?f.observer.observe(e.parentNode,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):f.observer.observe(e,function getObserverInit(e){return"html"===e?{childList:!0,subtree:!0,attributes:!0,characterData:!0}:{childList:!1,subtree:!1,attributes:!0,attributeFilter:[e]}}(t)),f}function queueIfNeeded(e,t){var n=t.getCurrentValue(t.el);t.virtualValue=e,e&&"string"!=typeof e?n&&e.parentNode===n.parentNode&&e.insertBeforeNode===n.insertBeforeNode||(t.isDirty=!0,runDOMUpdates()):e!==n&&(t.isDirty=!0,runDOMUpdates())}function htmlMutationRunner(e){var t=e.originalValue;e.mutations.forEach((function(e){return t=e.mutate(t)})),queueIfNeeded(function getTransformedHTML(e){b||(b=document.createElement("div"));return b.innerHTML=e,b.innerHTML}(t),e)}function classMutationRunner(e){var t=new Set(e.originalValue.split(/\s+/).filter(Boolean));e.mutations.forEach((function(e){return e.mutate(t)})),queueIfNeeded(Array.from(t).filter(Boolean).join(" "),e)}function attrMutationRunner(e){var t=e.originalValue;e.mutations.forEach((function(e){return t=e.mutate(t)})),queueIfNeeded(t,e)}function positionMutationRunner(e){var t=e.originalValue;e.mutations.forEach((function(e){var n=function _loadDOMNodes(e){var t=e.parentSelector,n=e.insertBeforeSelector,i=document.querySelector(t);if(!i)return null;var s=n?document.querySelector(n):null;return n&&!s?null:{parentNode:i,insertBeforeNode:s}}(e.mutate());t=n||t})),queueIfNeeded(t,e)}var p=function getHTMLValue2(e){return e.innerHTML},_=function setHTMLValue2(e,t){return e.innerHTML=t};function getElementHTMLRecord(e){var t=getElementRecord(e);return t.html||(t.html=createElementPropertyRecord(e,"html",p,_,htmlMutationRunner)),t.html}var g=function getElementPosition2(e){return{parentNode:e.parentElement,insertBeforeNode:e.nextElementSibling}},E=function setElementPosition2(e,t){t.insertBeforeNode&&!t.parentNode.contains(t.insertBeforeNode)||t.parentNode.insertBefore(e,t.insertBeforeNode)};function getElementPositionRecord(e){var t=getElementRecord(e);return t.position||(t.position=createElementPropertyRecord(e,"position",g,E,positionMutationRunner)),t.position}var y=function setClassValue2(e,t){return t?e.className=t:e.removeAttribute("class")},m=function getClassValue2(e){return e.className};function getElementClassRecord(e){var t=getElementRecord(e);return t.classes||(t.classes=createElementPropertyRecord(e,"class",m,y,classMutationRunner)),t.classes}var b,O;function getElementAttributeRecord(e,t){var n=getElementRecord(e);return n.attributes[t]||(n.attributes[t]=createElementPropertyRecord(e,t,function getAttrValue2(e){return function(t){var n;return null!=(n=t.getAttribute(e))?n:null}}(t),function setAttrValue2(e){return function(t,n){return null!==n?t.setAttribute(e,n):t.removeAttribute(e)}}(t),attrMutationRunner)),n.attributes[t]}function setPropertyValue(e,t,n){if(n.isDirty){n.isDirty=!1;var i=n.virtualValue;n.mutations.length||function deleteElementPropertyRecord(e,t){var n,i,s=d.get(e);if(s)if("html"===t)null==(n=s.html)||null==(i=n.observer)||i.disconnect(),delete s.html;else if("class"===t){var l,f;null==(l=s.classes)||null==(f=l.observer)||f.disconnect(),delete s.classes}else if("position"===t){var h,p;null==(h=s.position)||null==(p=h.observer)||p.disconnect(),delete s.position}else{var _,g,E;null==(_=s.attributes)||null==(g=_[t])||null==(E=g.observer)||E.disconnect(),delete s.attributes[t]}}(e,t),n.setValue(e,i)}}function setValue(e,t){e.html&&setPropertyValue(t,"html",e.html),e.classes&&setPropertyValue(t,"class",e.classes),e.position&&setPropertyValue(t,"position",e.position),Object.keys(e.attributes).forEach((function(n){setPropertyValue(t,n,e.attributes[n])}))}function runDOMUpdates(){d.forEach(setValue)}function refreshElementsSet(e){if("position"!==e.kind||1!==e.elements.size){var t=new Set(e.elements);document.querySelectorAll(e.selector).forEach((function(n){t.has(n)||(e.elements.add(n),function startMutating(e,t){var n=null;"html"===e.kind?n=getElementHTMLRecord(t):"class"===e.kind?n=getElementClassRecord(t):"attribute"===e.kind?n=getElementAttributeRecord(t,e.attribute):"position"===e.kind&&(n=getElementPositionRecord(t)),n&&(n.mutations.push(e),n.mutationRunner(n))}(e,n))}))}}function revertMutation(e){e.elements.forEach((function(t){return function stopMutating(e,t){var n=null;if("html"===e.kind?n=getElementHTMLRecord(t):"class"===e.kind?n=getElementClassRecord(t):"attribute"===e.kind?n=getElementAttributeRecord(t,e.attribute):"position"===e.kind&&(n=getElementPositionRecord(t)),n){var i=n.mutations.indexOf(e);-1!==i&&n.mutations.splice(i,1),n.mutationRunner(n)}}(e,t)})),e.elements.clear(),h.delete(e)}function refreshAllElementSets(){h.forEach(refreshElementsSet)}function newMutation(e){return"undefined"==typeof document?f:(h.add(e),refreshElementsSet(e),{revert:function revert2(){revertMutation(e)}})}function html(e,t){return newMutation({kind:"html",elements:new Set,mutate:t,selector:e})}function position(e,t){return newMutation({kind:"position",elements:new Set,mutate:t,selector:e})}function classes(e,t){return newMutation({kind:"class",elements:new Set,mutate:t,selector:e})}function attribute(e,t,n){return l.test(t)?"class"===t||"className"===t?classes(e,(function(e){var t=n(Array.from(e).join(" "));e.clear(),t&&t.split(/\s+/g).filter(Boolean).forEach((function(t){return e.add(t)}))})):newMutation({kind:"attribute",attribute:t,elements:new Set,mutate:n,selector:e}):f}!function connectGlobalObserver(){"undefined"!=typeof document&&(O||(O=new MutationObserver((function(){refreshAllElementSets()}))),refreshAllElementSets(),O.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!1,characterData:!1}))}();var S={html:html,classes:classes,attribute:attribute,position:position,declarative:function declarative(e){var t=e.selector,n=e.action,i=e.value,s=e.attribute,l=e.parentSelector,d=e.insertBeforeSelector;if("html"===s){if("append"===n)return html(t,(function(e){return e+(null!=i?i:"")}));if("set"===n)return html(t,(function(){return null!=i?i:""}))}else if("class"===s){if("append"===n)return classes(t,(function(e){i&&e.add(i)}));if("remove"===n)return classes(t,(function(e){i&&e.delete(i)}));if("set"===n)return classes(t,(function(e){e.clear(),i&&e.add(i)}))}else if("position"===s){if("set"===n&&l)return position(t,(function(){return{insertBeforeSelector:d,parentSelector:l}}))}else{if("append"===n)return attribute(t,s,(function(e){return null!==e?e+(null!=i?i:""):null!=i?i:""}));if("set"===n)return attribute(t,s,(function(){return null!=i?i:""}));if("remove"===n)return attribute(t,s,(function(){return null}))}return f}};function hashFnv32a(e){let t=2166136261;const n=e.length;for(let i=0;i<n;i++)t^=e.charCodeAt(i),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}function hash(e,t,n){return 2===n?hashFnv32a(hashFnv32a(e+t)+"")%1e4/1e4:1===n?hashFnv32a(t+e)%1e3/1e3:null}function inRange(e,t){return e>=t[0]&&e<t[1]}function getUrlRegExp(e){try{const t=e.replace(/([^\\])\//g,"$1\\/");return new RegExp(t)}catch(e){return void console.error(e)}}function _evalSimpleUrlTarget(e,t){try{const n=new URL(t.replace(/^([^:/?]*)\./i,"https://$1.").replace(/\*/g,"_____"),"https://_____"),i=[[e.host,n.host,!1],[e.pathname,n.pathname,!0]];return n.hash&&i.push([e.hash,n.hash,!1]),n.searchParams.forEach((t,n)=>{i.push([e.searchParams.get(n)||"",t,!1])}),!i.some(e=>!function _evalSimpleUrlPart(e,t,n){try{let i=t.replace(/[*.+?^${}()|[\]\\]/g,"\\$&").replace(/_____/g,".*");n&&(i="\\/?"+i.replace(/(^\/|\/$)/g,"")+"\\/?");return new RegExp("^"+i+"$","i").test(e)}catch(e){return!1}}(e[0],e[1],e[2]))}catch(e){return!1}}function _evalURLTarget(e,t,n){try{const i=new URL(e,"https://_");if("regex"===t){const e=getUrlRegExp(n);return!!e&&(e.test(i.href)||e.test(i.href.substring(i.origin.length)))}return"simple"===t&&_evalSimpleUrlTarget(i,n)}catch(e){return!1}}function getBucketRanges(e,t,n){(t=void 0===t?1:t)<0?t=0:t>1&&(t=1);const i=function getEqualWeights(e){return e<=0?[]:new Array(e).fill(1/e)}(e);(n=n||i).length!==e&&(n=i);const s=n.reduce((e,t)=>t+e,0);(s<.99||s>1.01)&&(n=i);let l=0;return n.map(e=>{const n=l;return l+=e,[n,n+t*e]})}const base64ToBuf=e=>Uint8Array.from(atob(e),e=>e.charCodeAt(0));async function decrypt(e,t,n){if(t=t||"",!(n=n||globalThis.crypto&&globalThis.crypto.subtle))throw new Error("No SubtleCrypto implementation found");try{const i=await n.importKey("raw",base64ToBuf(t),{name:"AES-CBC",length:128},!0,["encrypt","decrypt"]),[s,l]=e.split("."),f=await n.decrypt({name:"AES-CBC",iv:base64ToBuf(s)},i,base64ToBuf(l));return(new TextDecoder).decode(f)}catch(e){throw new Error("Failed to decrypt")}}function util_toString(e){return"string"==typeof e?e:JSON.stringify(e)}function paddedVersionString(e){"number"==typeof e&&(e+=""),e&&"string"==typeof e||(e="0");const t=e.replace(/(^v|\+.*$)/g,"").split(/[-.]/);return 3===t.length&&t.push("~"),t.map(e=>e.match(/^[0-9]+$/)?e.padStart(5," "):e).join("-")}const v={};function evalCondition(e,t){if("$or"in t)return evalOr(e,t.$or);if("$nor"in t)return!evalOr(e,t.$nor);if("$and"in t)return function evalAnd(e,t){for(let n=0;n<t.length;n++)if(!evalCondition(e,t[n]))return!1;return!0}(e,t.$and);if("$not"in t)return!evalCondition(e,t.$not);for(const[n,i]of Object.entries(t))if(!evalConditionValue(i,getPath(e,n)))return!1;return!0}function getPath(e,t){const n=t.split(".");let i=e;for(let e=0;e<n.length;e++){if(!i||"object"!=typeof i||!(n[e]in i))return null;i=i[n[e]]}return i}function evalConditionValue(e,t){if("string"==typeof e)return t+""===e;if("number"==typeof e)return 1*t===e;if("boolean"==typeof e)return!!t===e;if(null===e)return null===t;if(Array.isArray(e)||!isOperatorObject(e))return JSON.stringify(t)===JSON.stringify(e);for(const n in e)if(!evalOperatorCondition(n,t,e[n]))return!1;return!0}function isOperatorObject(e){const t=Object.keys(e);return t.length>0&&t.filter(e=>"$"===e[0]).length===t.length}function isIn(e,t){return Array.isArray(e)?e.some(e=>t.includes(e)):t.includes(e)}function evalOperatorCondition(e,t,n){switch(e){case"$veq":return paddedVersionString(t)===paddedVersionString(n);case"$vne":return paddedVersionString(t)!==paddedVersionString(n);case"$vgt":return paddedVersionString(t)>paddedVersionString(n);case"$vgte":return paddedVersionString(t)>=paddedVersionString(n);case"$vlt":return paddedVersionString(t)<paddedVersionString(n);case"$vlte":return paddedVersionString(t)<=paddedVersionString(n);case"$eq":return t===n;case"$ne":return t!==n;case"$lt":return t<n;case"$lte":return t<=n;case"$gt":return t>n;case"$gte":return t>=n;case"$exists":return n?null!=t:null==t;case"$in":return!!Array.isArray(n)&&isIn(t,n);case"$nin":return!!Array.isArray(n)&&!isIn(t,n);case"$not":return!evalConditionValue(n,t);case"$size":return!!Array.isArray(t)&&evalConditionValue(n,t.length);case"$elemMatch":return function elemMatch(e,t){if(!Array.isArray(e))return!1;const n=isOperatorObject(t)?e=>evalConditionValue(t,e):e=>evalCondition(e,t);for(let t=0;t<e.length;t++)if(e[t]&&n(e[t]))return!0;return!1}(t,n);case"$all":if(!Array.isArray(t))return!1;for(let e=0;e<n.length;e++){let i=!1;for(let s=0;s<t.length;s++)if(evalConditionValue(n[e],t[s])){i=!0;break}if(!i)return!1}return!0;case"$regex":try{return function getRegex(e){return v[e]||(v[e]=new RegExp(e.replace(/([^\\])\//g,"$1\\/"))),v[e]}(n).test(t)}catch(e){return!1}case"$type":return function getType(e){if(null===e)return"null";if(Array.isArray(e))return"array";const t=typeof e;return["string","number","boolean","object","undefined"].includes(t)?t:"unknown"}(t)===n;default:return console.error("Unknown operator: "+e),!1}}function evalOr(e,t){if(!t.length)return!0;for(let n=0;n<t.length;n++)if(evalCondition(e,t[n]))return!0;return!1}var T=Object.defineProperty,w=Object.defineProperties,I=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))P.call(t,n)&&__defNormalProp(e,n,t[n]);if(A)for(var n of A(t))C.call(t,n)&&__defNormalProp(e,n,t[n]);return e};const R={staleTTL:6e4,maxAge:864e5,cacheKey:"gbFeaturesCache",backgroundSync:!0,maxEntries:10,disableIdleStreams:!1,idleStreamInterval:2e4},N={fetch:globalThis.fetch?globalThis.fetch.bind(globalThis):void 0,SubtleCrypto:globalThis.crypto?globalThis.crypto.subtle:void 0,EventSource:globalThis.EventSource},L={fetchFeaturesCall:e=>{let{host:t,clientKey:n,headers:i}=e;return N.fetch("".concat(t,"/api/features/").concat(n),{headers:i})},fetchRemoteEvalCall:e=>{let{host:t,clientKey:n,payload:i,headers:s}=e;const l={method:"POST",headers:__spreadValues({"Content-Type":"application/json"},s),body:JSON.stringify(i)};return N.fetch("".concat(t,"/api/eval/").concat(n),l)},eventSourceCall:e=>{let{host:t,clientKey:n,headers:i}=e;return i?new N.EventSource("".concat(t,"/sub/").concat(n),{headers:i}):new N.EventSource("".concat(t,"/sub/").concat(n))},startIdleListener:()=>{let e;if(!("undefined"!=typeof window&&"undefined"!=typeof document))return;const onVisibilityChange=()=>{"visible"===document.visibilityState?(window.clearTimeout(e),function onVisible(){x.forEach(e=>{e&&"idle"===e.state&&enableChannel(e)})}()):"hidden"===document.visibilityState&&(e=window.setTimeout(onHidden,R.idleStreamInterval))};return document.addEventListener("visibilitychange",onVisibilityChange),()=>document.removeEventListener("visibilitychange",onVisibilityChange)},stopIdleListener:()=>{}};try{globalThis.localStorage&&(N.localStorage=globalThis.localStorage)}catch(e){}const D=new Map;let k=!1;const B=new Map,F=new Map,x=new Map,M=new Set;async function refreshFeatures(e,t,n,i,s,l){l||(R.backgroundSync=!1);const f=await async function fetchFeaturesWithCache(e,t,n,i){const s=getKey(e),l=getCacheKey(e),f=new Date,d=new Date(f.getTime()-R.maxAge+R.staleTTL);await async function initializeCache(){if(k)return;k=!0;try{if(N.localStorage){const e=await N.localStorage.getItem(R.cacheKey);if(e){const t=JSON.parse(e);t&&Array.isArray(t)&&t.forEach(e=>{let[t,n]=e;var i,s;B.set(t,(i=__spreadValues({},n),s={staleAt:new Date(n.staleAt)},w(i,I(s))))}),cleanupCache()}}}catch(e){}if(!R.disableIdleStreams){const e=L.startIdleListener();e&&(L.stopIdleListener=e)}}();const h=B.get(l);return h&&!i&&(t||h.staleAt>f)&&h.staleAt>d?(h.sse&&M.add(s),h.staleAt<f?fetchFeatures(e):startAutoRefresh(e),h.data):await function promiseTimeout(e,t){return new Promise(n=>{let i,s=!1;const finish=e=>{s||(s=!0,i&&clearTimeout(i),n(e||null))};t&&(i=setTimeout(()=>finish(),t)),e.then(e=>finish(e)).catch(()=>finish())})}(fetchFeatures(e),n)}(e,i,t,n);s&&f&&await refreshInstance(e,f)}function onHidden(){x.forEach(e=>{e&&(e.state="idle",disableChannel(e))})}async function updatePersistentCache(){try{if(!N.localStorage)return;await N.localStorage.setItem(R.cacheKey,JSON.stringify(Array.from(B.entries())))}catch(e){}}function getKey(e){const[t,n]=e.getApiInfo();return"".concat(t,"||").concat(n)}function getCacheKey(e){const t=getKey(e);if(!e.isRemoteEval())return t;const n=e.getAttributes(),i=e.getCacheKeyAttributes()||Object.keys(e.getAttributes()),s={};i.forEach(e=>{s[e]=n[e]});const l=e.getForcedVariations(),f=e.getUrl();return"".concat(t,"||").concat(JSON.stringify({ca:s,fv:l,url:f}))}function cleanupCache(){const e=Array.from(B.entries()).map(e=>{let[t,n]=e;return{key:t,staleAt:n.staleAt.getTime()}}).sort((e,t)=>e.staleAt-t.staleAt),t=Math.min(Math.max(0,B.size-R.maxEntries),B.size);for(let n=0;n<t;n++)B.delete(e[n].key)}function onNewFeatureData(e,t,n){const i=n.dateUpdated||"",s=new Date(Date.now()+R.staleTTL),l=B.get(t);if(l&&i&&l.version===i)return l.staleAt=s,void updatePersistentCache();B.set(t,{data:n,version:i,staleAt:s,sse:M.has(e)}),cleanupCache(),updatePersistentCache();const f=D.get(e);f&&f.forEach(e=>refreshInstance(e,n))}async function refreshInstance(e,t){t=await e.decryptPayload(t,void 0,N.SubtleCrypto),await e.refreshStickyBuckets(t),e.setExperiments(t.experiments||e.getExperiments()),e.setFeatures(t.features||e.getFeatures())}async function fetchFeatures(e){const{apiHost:t,apiRequestHeaders:n}=e.getApiHosts(),i=e.getClientKey(),s=e.isRemoteEval(),l=getKey(e),f=getCacheKey(e);let d=F.get(f);if(!d){d=(s?L.fetchRemoteEvalCall({host:t,clientKey:i,payload:{attributes:e.getAttributes(),forcedVariations:e.getForcedVariations(),forcedFeatures:Array.from(e.getForcedFeatures().entries()),url:e.getUrl()},headers:n}):L.fetchFeaturesCall({host:t,clientKey:i,headers:n})).then(e=>{if(!e.ok)throw new Error("HTTP error: ".concat(e.status));return"enabled"===e.headers.get("x-sse-support")&&M.add(l),e.json()}).then(t=>(onNewFeatureData(l,f,t),startAutoRefresh(e),F.delete(f),t)).catch(e=>(F.delete(f),Promise.resolve({}))),F.set(f,d)}return await d}function startAutoRefresh(e){const t=getKey(e),n=getCacheKey(e),{streamingHost:i,streamingHostRequestHeaders:s}=e.getApiHosts(),l=e.getClientKey();if(R.backgroundSync&&M.has(t)&&N.EventSource){if(x.has(t))return;const e={src:null,host:i,clientKey:l,headers:s,cb:i=>{try{if("features-updated"===i.type){const e=D.get(t);e&&e.forEach(e=>{fetchFeatures(e)})}else if("features"===i.type){const e=JSON.parse(i.data);onNewFeatureData(t,n,e)}e.errors=0}catch(t){onSSEError(e)}},errors:0,state:"active"};x.set(t,e),enableChannel(e)}}function onSSEError(e){if("idle"!==e.state&&(e.errors++,e.errors>3||e.src&&2===e.src.readyState)){const t=Math.pow(3,e.errors-3)*(1e3+1e3*Math.random());disableChannel(e),setTimeout(()=>{["idle","active"].includes(e.state)||enableChannel(e)},Math.min(t,3e5))}}function disableChannel(e){e.src&&(e.src.onopen=null,e.src.onerror=null,e.src.close(),e.src=null,"active"===e.state&&(e.state="disabled"))}function enableChannel(e){e.src=L.eventSourceCall({host:e.host,clientKey:e.clientKey,headers:e.headers}),e.state="active",e.src.addEventListener("features",e.cb),e.src.addEventListener("features-updated",e.cb),e.src.onerror=()=>onSSEError(e),e.src.onopen=()=>{e.errors=0}}var U=Object.defineProperty,K=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,GrowthBook_defNormalProp=(e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GrowthBook_spreadValues=(e,t)=>{for(var n in t||(t={}))j.call(t,n)&&GrowthBook_defNormalProp(e,n,t[n]);if(K)for(var n of K(t))H.call(t,n)&&GrowthBook_defNormalProp(e,n,t[n]);return e};const V="undefined"!=typeof window&&"undefined"!=typeof document,G=function loadSDKVersion(){let e;try{e="0.34.0"}catch(t){e=""}return e}();class GrowthBook_GrowthBook{constructor(e){if(e=e||{},this.version=G,this._ctx=this.context=e,this._renderer=null,this._trackedExperiments=new Set,this._trackedFeatures={},this.debug=!1,this._subscriptions=new Set,this._rtQueue=[],this._rtTimer=0,this.ready=!1,this._assigned=new Map,this._forcedFeatureValues=new Map,this._attributeOverrides={},this._activeAutoExperiments=new Map,this._triggeredExpKeys=new Set,this._loadFeaturesCalled=!1,e.remoteEval){if(e.decryptionKey)throw new Error("Encryption is not available for remoteEval");if(!e.clientKey)throw new Error("Missing clientKey");let t=!1;try{t=!!new URL(e.apiHost||"").hostname.match(/growthbook\.io$/i)}catch(e){}if(t)throw new Error("Cannot use remoteEval on GrowthBook Cloud")}else if(e.cacheKeyAttributes)throw new Error("cacheKeyAttributes are only used for remoteEval");e.features&&(this.ready=!0),V&&e.enableDevMode&&(window._growthbook=this,document.dispatchEvent(new Event("gbloaded"))),e.experiments&&(this.ready=!0,this._updateAllAutoExperiments()),e.clientKey&&!e.remoteEval&&this._refresh({},!0,!1)}async loadFeatures(e){e&&e.autoRefresh&&(this._ctx.subscribeToChanges=!0),this._loadFeaturesCalled=!0,await this._refresh(e,!0,!0),this._canSubscribe()&&function subscribe(e){const t=getKey(e),n=D.get(t)||new Set;n.add(e),D.set(t,n)}(this)}async refreshFeatures(e){await this._refresh(e,!1,!0)}getApiInfo(){return[this.getApiHosts().apiHost,this.getClientKey()]}getApiHosts(){const e=this._ctx.apiHost||"https://cdn.growthbook.io";return{apiHost:e.replace(/\/*$/,""),streamingHost:(this._ctx.streamingHost||e).replace(/\/*$/,""),apiRequestHeaders:this._ctx.apiHostRequestHeaders,streamingHostRequestHeaders:this._ctx.streamingHostRequestHeaders}}getClientKey(){return this._ctx.clientKey||""}isRemoteEval(){return this._ctx.remoteEval||!1}getCacheKeyAttributes(){return this._ctx.cacheKeyAttributes}async _refresh(e,t,n){if(e=e||{},!this._ctx.clientKey)throw new Error("Missing clientKey");await refreshFeatures(this,e.timeout,e.skipCache||this._ctx.enableDevMode,t,n,!1!==this._ctx.backgroundSync)}_render(){this._renderer&&this._renderer()}setFeatures(e){this._ctx.features=e,this.ready=!0,this._render()}async setEncryptedFeatures(e,t,n){const i=await decrypt(e,t||this._ctx.decryptionKey,n);this.setFeatures(JSON.parse(i))}setExperiments(e){this._ctx.experiments=e,this.ready=!0,this._updateAllAutoExperiments()}async setEncryptedExperiments(e,t,n){const i=await decrypt(e,t||this._ctx.decryptionKey,n);this.setExperiments(JSON.parse(i))}async decryptPayload(e,t,n){return e.encryptedFeatures&&(e.features=JSON.parse(await decrypt(e.encryptedFeatures,t||this._ctx.decryptionKey,n)),delete e.encryptedFeatures),e.encryptedExperiments&&(e.experiments=JSON.parse(await decrypt(e.encryptedExperiments,t||this._ctx.decryptionKey,n)),delete e.encryptedExperiments),e}async setAttributes(e){this._ctx.attributes=e,this._ctx.stickyBucketService&&await this.refreshStickyBuckets(),this._ctx.remoteEval?await this._refreshForRemoteEval():(this._render(),this._updateAllAutoExperiments())}async setAttributeOverrides(e){this._attributeOverrides=e,this._ctx.stickyBucketService&&await this.refreshStickyBuckets(),this._ctx.remoteEval?await this._refreshForRemoteEval():(this._render(),this._updateAllAutoExperiments())}async setForcedVariations(e){this._ctx.forcedVariations=e||{},this._ctx.remoteEval?await this._refreshForRemoteEval():(this._render(),this._updateAllAutoExperiments())}setForcedFeatures(e){this._forcedFeatureValues=e,this._render()}async setURL(e){if(this._ctx.url=e,this._ctx.remoteEval)return await this._refreshForRemoteEval(),void this._updateAllAutoExperiments(!0);this._updateAllAutoExperiments(!0)}getAttributes(){return GrowthBook_spreadValues(GrowthBook_spreadValues({},this._ctx.attributes),this._attributeOverrides)}getForcedVariations(){return this._ctx.forcedVariations||{}}getForcedFeatures(){return this._forcedFeatureValues||new Map}getStickyBucketAssignmentDocs(){return this._ctx.stickyBucketAssignmentDocs||{}}getUrl(){return this._ctx.url||""}getFeatures(){return this._ctx.features||{}}getExperiments(){return this._ctx.experiments||[]}subscribe(e){return this._subscriptions.add(e),()=>{this._subscriptions.delete(e)}}_canSubscribe(){return!1!==this._ctx.backgroundSync&&this._ctx.subscribeToChanges}async _refreshForRemoteEval(){this._ctx.remoteEval&&this._loadFeaturesCalled&&await this._refresh({},!1,!0).catch(()=>{})}getAllResults(){return new Map(this._assigned)}destroy(){this._subscriptions.clear(),this._assigned.clear(),this._trackedExperiments.clear(),this._trackedFeatures={},this._rtQueue=[],this._rtTimer&&clearTimeout(this._rtTimer),function unsubscribe(e){D.forEach(t=>t.delete(e))}(this),V&&window._growthbook===this&&delete window._growthbook,this._activeAutoExperiments.forEach(e=>{e.undo()}),this._activeAutoExperiments.clear(),this._triggeredExpKeys.clear()}setRenderer(e){this._renderer=e}forceVariation(e,t){this._ctx.forcedVariations=this._ctx.forcedVariations||{},this._ctx.forcedVariations[e]=t,this._ctx.remoteEval?this._refreshForRemoteEval():(this._updateAllAutoExperiments(),this._render())}run(e){const t=this._run(e,null);return this._fireSubscriptions(e,t),t}triggerExperiment(e){if(this._triggeredExpKeys.add(e),!this._ctx.experiments)return null;return this._ctx.experiments.filter(t=>t.key===e).map(e=>e.manual?this._runAutoExperiment(e):null).filter(e=>null!==e)}_runAutoExperiment(e,t){const n=this._activeAutoExperiments.get(e);if(e.manual&&!this._triggeredExpKeys.has(e.key)&&!n)return null;const i=this.run(e),s=JSON.stringify(i.value);if(!t&&i.inExperiment&&n&&n.valueHash===s)return i;if(n&&this._undoActiveAutoExperiment(e),i.inExperiment){const t=this._applyDOMChanges(i.value);t&&this._activeAutoExperiments.set(e,{undo:t,valueHash:s})}return i}_undoActiveAutoExperiment(e){const t=this._activeAutoExperiments.get(e);t&&(t.undo(),this._activeAutoExperiments.delete(e))}_updateAllAutoExperiments(e){const t=this._ctx.experiments||[],n=new Set(t);this._activeAutoExperiments.forEach((e,t)=>{n.has(t)||(e.undo(),this._activeAutoExperiments.delete(t))}),t.forEach(t=>{this._runAutoExperiment(t,e)})}_fireSubscriptions(e,t){const n=e.key,i=this._assigned.get(n);i&&i.result.inExperiment===t.inExperiment&&i.result.variationId===t.variationId||(this._assigned.set(n,{experiment:e,result:t}),this._subscriptions.forEach(n=>{try{n(e,t)}catch(e){console.error(e)}}))}_trackFeatureUsage(e,t){if("override"===t.source)return;const n=JSON.stringify(t.value);if(this._trackedFeatures[e]!==n){if(this._trackedFeatures[e]=n,this._ctx.onFeatureUsage)try{this._ctx.onFeatureUsage(e,t)}catch(e){}V&&window.fetch&&(this._rtQueue.push({key:e,on:t.on}),this._rtTimer||(this._rtTimer=window.setTimeout(()=>{this._rtTimer=0;const e=[...this._rtQueue];this._rtQueue=[],this._ctx.realtimeKey&&window.fetch("https://rt.growthbook.io/?key=".concat(this._ctx.realtimeKey,"&events=").concat(encodeURIComponent(JSON.stringify(e))),{cache:"no-cache",mode:"no-cors"}).catch(()=>{})},this._ctx.realtimeInterval||2e3)))}}_getFeatureResult(e,t,n,i,s,l){const f={value:t,on:!!t,off:!t,source:n,ruleId:i||""};return s&&(f.experiment=s),l&&(f.experimentResult=l),this._trackFeatureUsage(e,f),f}isOn(e){return this.evalFeature(e).on}isOff(e){return this.evalFeature(e).off}getFeatureValue(e,t){const n=this.evalFeature(e).value;return null===n?t:n}feature(e){return this.evalFeature(e)}evalFeature(e){return this._evalFeature(e)}_evalFeature(e,t){if((t=t||{evaluatedFeatures:new Set}).evaluatedFeatures.has(e))return this._getFeatureResult(e,null,"cyclicPrerequisite");if(t.evaluatedFeatures.add(e),t.id=e,this._forcedFeatureValues.has(e))return this._getFeatureResult(e,this._forcedFeatureValues.get(e),"override");if(!this._ctx.features||!this._ctx.features[e])return this._getFeatureResult(e,null,"unknownFeature");const n=this._ctx.features[e];if(n.rules)e:for(const i of n.rules){if(i.parentConditions)for(const n of i.parentConditions){const i=this._evalFeature(n.id,t);if("cyclicPrerequisite"===i.source)return this._getFeatureResult(e,null,"cyclicPrerequisite");if(!evalCondition({value:i.value},n.condition||{})){if(n.gate)return this._getFeatureResult(e,null,"prerequisite");continue e}}if(i.filters&&this._isFilteredOut(i.filters))continue;if("force"in i){if(i.condition&&!this._conditionPasses(i.condition))continue;if(!this._isIncludedInRollout(i.seed||e,i.hashAttribute,this._ctx.stickyBucketService&&!i.disableStickyBucketing?i.fallbackAttribute:void 0,i.range,i.coverage,i.hashVersion))continue;return i.tracks&&i.tracks.forEach(e=>{this._track(e.experiment,e.result)}),this._getFeatureResult(e,i.force,"force",i.id)}if(!i.variations)continue;const n={variations:i.variations,key:i.key||e};"coverage"in i&&(n.coverage=i.coverage),i.weights&&(n.weights=i.weights),i.hashAttribute&&(n.hashAttribute=i.hashAttribute),i.fallbackAttribute&&(n.fallbackAttribute=i.fallbackAttribute),i.disableStickyBucketing&&(n.disableStickyBucketing=i.disableStickyBucketing),void 0!==i.bucketVersion&&(n.bucketVersion=i.bucketVersion),void 0!==i.minBucketVersion&&(n.minBucketVersion=i.minBucketVersion),i.namespace&&(n.namespace=i.namespace),i.meta&&(n.meta=i.meta),i.ranges&&(n.ranges=i.ranges),i.name&&(n.name=i.name),i.phase&&(n.phase=i.phase),i.seed&&(n.seed=i.seed),i.hashVersion&&(n.hashVersion=i.hashVersion),i.filters&&(n.filters=i.filters),i.condition&&(n.condition=i.condition);const s=this._run(n,e);if(this._fireSubscriptions(n,s),s.inExperiment&&!s.passthrough)return this._getFeatureResult(e,s.value,"experiment",i.id,n,s)}return this._getFeatureResult(e,void 0===n.defaultValue?null:n.defaultValue,"defaultValue")}_isIncludedInRollout(e,t,n,i,s,l){if(!i&&void 0===s)return!0;const{hashValue:f}=this._getHashAttribute(t,n);if(!f)return!1;const d=hash(e,f,l||1);return null!==d&&(i?inRange(d,i):void 0===s||d<=s)}_conditionPasses(e){return evalCondition(this.getAttributes(),e)}_isFilteredOut(e){return e.some(e=>{const{hashValue:t}=this._getHashAttribute(e.attribute);if(!t)return!0;const n=hash(e.seed,t,e.hashVersion||2);return null===n||!e.ranges.some(e=>inRange(n,e))})}_run(e,t){const n=e.key,i=e.variations.length;if(i<2)return this._getResult(e,-1,!1,t);if(!1===this._ctx.enabled)return this._getResult(e,-1,!1,t);if((e=this._mergeOverrides(e)).urlPatterns&&!function isURLTargeted(e,t){if(!t.length)return!1;let n=!1,i=!1;for(let s=0;s<t.length;s++){const l=_evalURLTarget(e,t[s].type,t[s].pattern);if(!1===t[s].include){if(l)return!1}else n=!0,l&&(i=!0)}return i||!n}(this._getContextUrl(),e.urlPatterns))return this._getResult(e,-1,!1,t);const s=function getQueryStringOverride(e,t,n){if(!t)return null;const i=t.split("?")[1];if(!i)return null;const s=i.replace(/#.*/,"").split("&").map(e=>e.split("=",2)).filter(t=>{let[n]=t;return n===e}).map(e=>{let[,t]=e;return parseInt(t)});return s.length>0&&s[0]>=0&&s[0]<n?s[0]:null}(n,this._getContextUrl(),i);if(null!==s)return this._getResult(e,s,!1,t);if(this._ctx.forcedVariations&&n in this._ctx.forcedVariations){const i=this._ctx.forcedVariations[n];return this._getResult(e,i,!1,t)}if("draft"===e.status||!1===e.active)return this._getResult(e,-1,!1,t);const{hashAttribute:l,hashValue:f}=this._getHashAttribute(e.hashAttribute,this._ctx.stickyBucketService&&!e.disableStickyBucketing?e.fallbackAttribute:void 0);if(!f)return this._getResult(e,-1,!1,t);let d=-1,h=!1,p=!1;if(this._ctx.stickyBucketService&&!e.disableStickyBucketing){const{variation:t,versionIsBlocked:n}=this._getStickyBucketVariation(e.key,e.bucketVersion,e.minBucketVersion,e.meta);h=t>=0,d=t,p=!!n}if(!h){if(e.filters){if(this._isFilteredOut(e.filters))return this._getResult(e,-1,!1,t)}else if(e.namespace&&!function inNamespace(e,t){const n=hash("__"+t[0],e,1);return null!==n&&(n>=t[1]&&n<t[2])}(f,e.namespace))return this._getResult(e,-1,!1,t);if(e.include&&!function isIncluded(e){try{return e()}catch(e){return console.error(e),!1}}(e.include))return this._getResult(e,-1,!1,t);if(e.condition&&!this._conditionPasses(e.condition))return this._getResult(e,-1,!1,t);if(e.parentConditions)for(const n of e.parentConditions){const i=this._evalFeature(n.id);if("cyclicPrerequisite"===i.source)return this._getResult(e,-1,!1,t);if(!evalCondition({value:i.value},n.condition||{}))return this._getResult(e,-1,!1,t)}if(e.groups&&!this._hasGroupOverlap(e.groups))return this._getResult(e,-1,!1,t)}if(e.url&&!this._urlIsValid(e.url))return this._getResult(e,-1,!1,t);const _=hash(e.seed||n,f,e.hashVersion||1);if(null===_)return this._getResult(e,-1,!1,t);if(!h){d=function chooseVariation(e,t){for(let n=0;n<t.length;n++)if(inRange(e,t[n]))return n;return-1}(_,e.ranges||getBucketRanges(i,void 0===e.coverage?1:e.coverage,e.weights))}if(p)return this._getResult(e,-1,!1,t,void 0,!0);if(d<0)return this._getResult(e,-1,!1,t);if("force"in e)return this._getResult(e,void 0===e.force?-1:e.force,!1,t);if(this._ctx.qaMode)return this._getResult(e,-1,!1,t);if("stopped"===e.status)return this._getResult(e,-1,!1,t);const g=this._getResult(e,d,!0,t,_,h);if(this._ctx.stickyBucketService&&!e.disableStickyBucketing){const{changed:t,key:n,doc:i}=this._generateStickyBucketAssignmentDoc(l,util_toString(f),{[this._getStickyBucketExperimentKey(e.key,e.bucketVersion)]:g.key});t&&(this._ctx.stickyBucketAssignmentDocs=this._ctx.stickyBucketAssignmentDocs||{},this._ctx.stickyBucketAssignmentDocs[n]=i,this._ctx.stickyBucketService.saveAssignments(i))}return this._track(e,g),g}log(e,t){this.debug&&(this._ctx.log?this._ctx.log(e,t):console.log(e,t))}_track(e,t){if(!this._ctx.trackingCallback)return;const n=e.key,i=t.hashAttribute+t.hashValue+n+t.variationId;if(!this._trackedExperiments.has(i)){this._trackedExperiments.add(i);try{this._ctx.trackingCallback(e,t)}catch(e){console.error(e)}}}_mergeOverrides(e){const t=e.key,n=this._ctx.overrides;return n&&n[t]&&"string"==typeof(e=Object.assign({},e,n[t])).url&&(e.url=getUrlRegExp(e.url)),e}_getHashAttribute(e,t){let n=e||"id",i="";return this._attributeOverrides[n]?i=this._attributeOverrides[n]:this._ctx.attributes?i=this._ctx.attributes[n]||"":this._ctx.user&&(i=this._ctx.user[n]||""),!i&&t&&(this._attributeOverrides[t]?i=this._attributeOverrides[t]:this._ctx.attributes?i=this._ctx.attributes[t]||"":this._ctx.user&&(i=this._ctx.user[t]||""),i&&(n=t)),{hashAttribute:n,hashValue:i}}_getResult(e,t,n,i,s,l){let f=!0;(t<0||t>=e.variations.length)&&(t=0,f=!1);const{hashAttribute:d,hashValue:h}=this._getHashAttribute(e.hashAttribute,this._ctx.stickyBucketService&&!e.disableStickyBucketing?e.fallbackAttribute:void 0),p=e.meta?e.meta[t]:{},_={key:p.key||""+t,featureId:i,inExperiment:f,hashUsed:n,variationId:t,value:e.variations[t],hashAttribute:d,hashValue:h,stickyBucketUsed:!!l};return p.name&&(_.name=p.name),void 0!==s&&(_.bucket=s),p.passthrough&&(_.passthrough=p.passthrough),_}_getContextUrl(){return this._ctx.url||(V?window.location.href:"")}_urlIsValid(e){const t=this._getContextUrl();if(!t)return!1;const n=t.replace(/^https?:\/\//,"").replace(/^[^/]*\//,"/");return!!e.test(t)||!!e.test(n)}_hasGroupOverlap(e){const t=this._ctx.groups||{};for(let n=0;n<e.length;n++)if(t[e[n]])return!0;return!1}_applyDOMChanges(e){if(!V)return;const t=[];if(e.css){const n=document.createElement("style");n.innerHTML=e.css,document.head.appendChild(n),t.push(()=>n.remove())}if(e.js){const n=document.createElement("script");n.innerHTML=e.js,document.head.appendChild(n),t.push(()=>n.remove())}return e.domMutations&&e.domMutations.forEach(e=>{t.push(S.declarative(e).revert)}),()=>{t.forEach(e=>e())}}_deriveStickyBucketIdentifierAttributes(e){const t=new Set,n=e&&e.features?e.features:this.getFeatures(),i=e&&e.experiments?e.experiments:this.getExperiments();return Object.keys(n).forEach(e=>{const i=n[e];if(i.rules)for(const e of i.rules)e.variations&&(t.add(e.hashAttribute||"id"),e.fallbackAttribute&&t.add(e.fallbackAttribute))}),i.map(e=>{t.add(e.hashAttribute||"id"),e.fallbackAttribute&&t.add(e.fallbackAttribute)}),Array.from(t)}async refreshStickyBuckets(e){if(this._ctx.stickyBucketService){const t=this._getStickyBucketAttributes(e);this._ctx.stickyBucketAssignmentDocs=await this._ctx.stickyBucketService.getAllAssignments(t)}}_getStickyBucketAssignments(){const e={};return Object.values(this._ctx.stickyBucketAssignmentDocs||{}).forEach(t=>{t.assignments&&Object.assign(e,t.assignments)}),e}_getStickyBucketVariation(e,t,n,i){t=t||0,n=n||0,i=i||[];const s=this._getStickyBucketExperimentKey(e,t),l=this._getStickyBucketAssignments();if(n>0)for(let t=0;t<=n;t++){if(void 0!==l[this._getStickyBucketExperimentKey(e,t)])return{variation:-1,versionIsBlocked:!0}}const f=l[s];if(void 0===f)return{variation:-1};const d=i.findIndex(e=>e.key===f);return d<0?{variation:-1}:{variation:d}}_getStickyBucketExperimentKey(e,t){return t=t||0,"".concat(e,"__").concat(t)}_getStickyBucketAttributes(e){const t={};return this._ctx.stickyBucketIdentifierAttributes=this._ctx.stickyBucketIdentifierAttributes?this._ctx.stickyBucketIdentifierAttributes:this._deriveStickyBucketIdentifierAttributes(e),this._ctx.stickyBucketIdentifierAttributes.forEach(e=>{const{hashValue:n}=this._getHashAttribute(e);t[e]=util_toString(n)}),t}_generateStickyBucketAssignmentDoc(e,t,n){const i="".concat(e,"||").concat(t),s=this._ctx.stickyBucketAssignmentDocs&&this._ctx.stickyBucketAssignmentDocs[i]&&this._ctx.stickyBucketAssignmentDocs[i].assignments||{},l=GrowthBook_spreadValues(GrowthBook_spreadValues({},s),n);return{key:i,doc:{attributeName:e,attributeValue:t,assignments:l},changed:JSON.stringify(s)!==JSON.stringify(l)}}}var W=n(86);var Y=n(85),q=n(15),X=n(29);const Z={features:{},outdatedAfterInMs:0},sync=async()=>{await Object(Y.a)({logger:Object(X.a)(q.a,"ABTests"),storage:new s.StoredValueImpl(i.h.AB_TESTS_CONFIG,Z),fetchProps:{endpoint:i.e.GROWTHBOOK}}).update()},createABTestsService=async({logger:e,analyticsService:t,storedABTestConfig:n})=>{const initVariantsFromStoredValue=async()=>{const i=await t.getUserAttributes();e.debug("Loading variants from stored value: "+i.id);const{features:s}=await n.getOrDefault();return new GrowthBook_GrowthBook({attributes:i,features:s,trackingCallback:(e,n)=>t.experimentStarted(i.id,e.key,n.key)})},convertRawToABTestGeneralValue=e=>{if((e=>"string"==typeof e||"boolean"==typeof e||null===e)(e)&&null!==e&&("boolean"==typeof e||(e=>Object.values(W.b).includes(e))(e)))return e};await(async()=>{null===await n.get()&&await sync()})();let i=await initVariantsFromStoredValue();return{getAllRaw:()=>Object.fromEntries(Object.keys(i.getFeatures()).map(e=>[e,i.evalFeature(e).value])),getAll:()=>Object.fromEntries(Object.values(W.a).map(e=>{const{value:t}=i.evalFeature(e);return[e,convertRawToABTestGeneralValue(t)]})),load:async()=>{i=await initVariantsFromStoredValue()},getVariant:e=>{const{value:t}=i.evalFeature(e);return convertRawToABTestGeneralValue(t)}}};var z=n(2),Q=n(18),J=n(17),$=n(3),ee=n(5),te=n(64),re=n(110),ne=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class service_AnalyticsServiceImpl{constructor(e){this.logger=e,__publicField(this,"getUserAttributes",async()=>{const{uuid:e,install_version:t}=await Object(Q.a)(),{version:n}=Object($.l)();return{id:e,version:n,installVersion:t}}),__publicField(this,"experimentStarted",async(e,t,n)=>{var i;const s=await Object(J.a)(ee.a.Sync);s&&s.uuid===e?(null==(i=s.startedExperiments)?void 0:i[t])||(this.logger.debug(`Tracking experiment started: ${t} = ${n}`),s.startedExperiments||(s.startedExperiments={}),s.startedExperiments[t]=n,await Object(J.b)(ee.a.Sync,s),await Object(te.b)("EXPERIMENT_STARTED",e,{uuid:e,experimentName:t,variantName:n})):this.logger.debug(`Wrong uuid. Expected: ${e}, Found: ${(null==s?void 0:s.uuid)||"none"}`)}),this.experimentStarted=Object(re.a)(this.experimentStarted)}}let ie=null;const getInstance=()=>(null===ie&&(ie=(async()=>{const e=Object(X.a)(q.a,"ABTests"),t=await createABTestsService({logger:e,analyticsService:new service_AnalyticsServiceImpl(e),storedABTestConfig:new s.StoredValueImpl(i.h.AB_TESTS_CONFIG,Z)});return z.a.storage.onChanged.addListener(async n=>{n[i.h.AB_TESTS_CONFIG]&&(e.debug("AB tests config changed, reloading cached values"),await t.load())}),t})()),ie)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return openWebApp}));var i=n(2),s=n(80);const openWebApp=async e=>{await i.a.tabs.create({url:Object(s.a)(e)})}},,,,function(e,t,n){"use strict";var i,s=new Uint8Array(16);function rng(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(s)}for(var l=n(28),f=[],d=0;d<256;++d)f.push((d+256).toString(16).substr(1));var h=function stringify(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase();if(!Object(l.a)(n))throw TypeError("Stringified UUID is invalid");return n};t.a=function v4(e,t,n){var i=(e=e||{}).random||(e.rng||rng)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=i[s];return t}return h(i)}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(25),s=n(0),l=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const f=class _PinToTaskbarEntity extends i.a{constructor(){super(...arguments),__publicField(this,"isDisplayed",!1),__publicField(this,"installTime",-1)}getKey(){return s.h.PIN_TASKBAR_DATA}getLegacyKeys(){return[]}toDTO(){return{isDisplayed:this.isDisplayed,installTime:this.installTime}}getVersion(){return 1}migrate(){}async setDisplayed(e){return this.isDisplayed=e,await this.save(),this}isTimeToDisplayPromo(){return!this.isDisplayed}async init(){return this.installTime=Date.now(),this.isDisplayed=!1,await this.save(),this}};__publicField(f,"getDefault",()=>new f);let d=f},,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));const{tools:{initDevTools:i,devWrap:s,getResetProps:l}}=n(112)},function(e,t,n){"use strict";n.d(t,"a",(function(){return getWebAppUrl}));var i=n(0);const getWebAppUrl=e=>{const t=new URL(e,i.r.WEB_APP);return t.searchParams.append("originSource","EXTENSION"),t.href}},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n(53),s=n(19),l=n(3),f=n(0),d=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class EventHandler{constructor(){__publicField(this,"listeners",new Set)}addListener(e){return this.listeners.add(e),()=>{this.removeListener(e)}}removeListener(e){return this.listeners.delete(e)}removeAllListeners(){this.listeners.clear()}emit(e){this.listeners.forEach(t=>{try{t(e)}catch(e){console.error("Error in event listener:",e)}})}listenerCount(){return this.listeners.size}}var h=n(15),p=Object.defineProperty,_=Object.defineProperties,g=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,FeaturesManager_defNormalProp=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FeaturesManager_publicField=(e,t,n)=>(FeaturesManager_defNormalProp(e,"symbol"!=typeof t?t+"":t,n),n);const b=class _FeaturesManager{constructor(){FeaturesManager_publicField(this,"featureStateChangeEvent"),FeaturesManager_publicField(this,"featuresRegistry"),this.featuresRegistry=i.a.getInstance(),this.featureStateChangeEvent=new EventHandler}static getInstance(){return _FeaturesManager.instance||(_FeaturesManager.instance=new _FeaturesManager),_FeaturesManager.instance}async isFeatureEnabled(e){const[t,n]=await Promise.all([Object(l.p)(),this.featuresRegistry.getFeatureConfig(e)]);return!(!n.enabled||!t)&&(n.userValue&&n.isPremium&&!await this.isUserPremium()?(await this.featuresRegistry.setFeatureConfig(e,((e,t)=>_(e,g(t)))(((e,t)=>{for(var n in t||(t={}))y.call(t,n)&&FeaturesManager_defNormalProp(e,n,t[n]);if(E)for(var n of E(t))m.call(t,n)&&FeaturesManager_defNormalProp(e,n,t[n]);return e})({},n),{userValue:!1})),!1):(h.a.debug(`FeatureManager: ${e} is ${n.userValue?"enabled":"disabled"}`),n.userValue))}async toggleFeatureState(e,t){const n=!0===t,i={toggleResult:!0},s=await this.featuresRegistry.getFeatureConfig(e),l=s.userValue;return n?s.isPremium&&!await this.isUserPremium()?(s.userValue=!1,i.toggleResult=!1):s.userValue=!0:s.userValue=!1,l!==s.userValue&&(h.a.debug(`FeatureManager: ${e} value changed to ${s.userValue}`),await this.featuresRegistry.setFeatureConfig(e,s),this.emitFeatureStateChange({featureKey:e,newValue:s.userValue,oldValue:l})),i}async getFeaturesByTier(e){const t=Object.entries(await this.featuresRegistry.getAllFeatureConfigs()),filterFeatures=t=>!!t.enabled&&(!(null==e?void 0:e.available)||t.available.includes(e.available));return{freeFeatures:t.filter(([,e])=>!e.isPremium&&filterFeatures(e)).map(([e])=>e),premiumFeatures:t.filter(([,e])=>e.isPremium&&filterFeatures(e)).map(([e])=>e)}}async getAllFeaturesState(){const e=await this.featuresRegistry.getAllFeatureConfigs();return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,t.userValue]))}emitFeatureStateChange(e){this.featureStateChangeEvent.emit(e),Object(l.H)(f.t.UPDATE_SETTING,{featureId:e.featureKey,value:e.newValue})}async isUserPremium(){var e;return!!(null==(e=await Object(s.c)())?void 0:e.isPremium)}};FeaturesManager_publicField(b,"instance");let O=b},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return setDefaultConfig})),n.d(t,"c",(function(){return syncConfigOnUpdate})),n.d(t,"a",(function(){return m}));var i=n(0),s=n(75),l=n(57),f=n(43),d=n(5),h=n(2),p=n(15),_=Object.defineProperty,g=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))E.call(t,n)&&__defNormalProp(e,n,t[n]);if(g)for(var n of g(t))y.call(t,n)&&__defNormalProp(e,n,t[n]);return e};const m={[i.h.IS_GET_MOBILE_POPUP_MODEL_CLOSED]:!1,[i.h.WHITELIST]:[],[i.h.SOCIAL_CONTENT_KEYWORDS]:[],[i.h.DO_NOT_SHOW_NOTIFY_LIST]:{},[i.h.OVERLAY_BLOCKED_LIST]:{},[i.h.LAST_NOTIFICATION_DISPLAY]:{},[i.h.BLOCKED_SITES_COUNTER]:{},[i.h.TOTAL_BLOCKS_BY_TYPE]:{pop:0,win:0,tab:0,overlay:0,ad:0,cookie:0,fbAd:0,linkedinAd:0,xAd:0,tracker:0,instagramAd:0,redditAd:0,pinterestAd:0,socialContent:0,youtubeAd:0,chatgptMessage:0,keywords:0},[i.h.TOTAL_BLOCKS_BY_TAB_ID]:{value:{}},[i.h.NUM_OF_BLOCKS]:0,[i.h.UNBLOCKED_SITES_COUNTER]:{},[i.h.TOTAL_UNBLOCKS_BY_TYPE]:{pop:0,win:0,tab:0,overlay:0,ad:0,cookie:0,fbAd:0,linkedinAd:0,xAd:0,tracker:0,instagramAd:0,redditAd:0,pinterestAd:0,socialContent:0,chatgptMessage:0,youtubeAd:0,keywords:0},[i.h.NUM_OF_UNBLOCKS]:0,[i.h.PAUSED]:!1,[i.h.SETTINGS]:{},[i.h.FIRST_POPUP_BLOCK]:!0,rating:{showCount:0,nextDisplay:i.P.AFTER,complete:!1},siteExperience:"clean"},setDefaultConfig=async()=>{await d.c.set(m),await setDefaultSyncConfig();const e=Date.now();s.a.getDefault().init(),l.a.getDefault().init(),f.a.getDefault().enable();const t={installTime:e},n={newUser:!0,lastUpdateTime:e,count:0,cycle:0,coolDown:!1};await d.c.set({[i.h.GENERAL_DATA]:t,[i.h.PROMO_COUPON]:n,[i.h.FIRST_POPUP_BLOCK]:!0}),p.a.debug("Config: Set default config")},setDefaultSyncConfig=async()=>{if(!(await d.c.getSync([i.i.ONBOARDING_FLOW])).onboardingFlow){if(await wasExtensionPreviouslyInstalledForUser())return;await d.c.setSync({onboardingFlow:{optInGaEventSent:!1,pagesVisitedCounter:0}})}},wasExtensionPreviouslyInstalledForUser=async()=>!!(await d.c.getSync([i.i.INSTALL_EVENT_SENT])).installEventSent,syncConfigOnUpdate=async()=>{h.a.storage.local.get(null,async e=>{var t,n,s,f,d;const _={[i.h.WHITELIST]:[],[i.h.SOCIAL_CONTENT_KEYWORDS]:[],[i.h.NUM_OF_BLOCKS]:0,[i.h.PAUSED]:!1,[i.h.BLOCKED_SITES_COUNTER]:{},[i.h.SETTINGS]:m[i.h.SETTINGS],[i.h.FIRST_POPUP_BLOCK]:!0,[i.h.TOTAL_BLOCKS_BY_TYPE]:m[i.h.TOTAL_BLOCKS_BY_TYPE],[i.h.TOTAL_BLOCKS_BY_TAB_ID]:m[i.h.TOTAL_BLOCKS_BY_TAB_ID],[i.h.NUM_OF_UNBLOCKS]:0,[i.h.UNBLOCKED_SITES_COUNTER]:{},[i.h.TOTAL_UNBLOCKS_BY_TYPE]:m[i.h.TOTAL_UNBLOCKS_BY_TYPE]};(await l.a.getDefault().load()).initIfNeeded(),e.pb_numOfBlocks>=0&&!e.settings?(_[i.h.NUM_OF_BLOCKS]=e.pb_numOfBlocks,_[i.h.SETTINGS][i.m.DETECT_OVERLAYS]=e.pb_detectOverlays||"In"===e.isOpted,e.pb_totalBlocksByType&&(_[i.h.TOTAL_BLOCKS_BY_TYPE]={pop:e.pb_totalBlocksByType.pop,win:e.pb_totalBlocksByType.win,tab:e.pb_totalBlocksByType.tab,overlay:e.pb_totalBlocksByType.overlay,ad:e.pb_totalBlocksByType.ad,cookie:e.pb_totalBlocksByType.cookie,fbAd:e.pb_totalBlocksByType.fbAd,xAd:e.pb_totalBlocksByType.twitterAd,linkedinAd:e.pb_totalBlocksByType.linkedinAd,instagramAd:e.pb_totalBlocksByType.instagramAd,redditAd:e.pb_totalBlocksByType.redditAd,pinterestAd:e.pb_totalBlocksByType.pinterestAd,tracker:e.pb_totalBlocksByType.tracker,socialContent:e.pb_totalBlocksByType.socialContent,youtubeAd:e.pb_totalBlocksByType.youtubeAd,chatgptMessage:e.pb_totalBlocksByType.chatgptMessage,keywords:e.pb_totalBlocksByType.keywords},_[i.h.BLOCKED_SITES_COUNTER]=e.pb_counterBlockedSites),e.pb_whitelistManager&&e.pb_whitelistManager.userWhitelist&&(_[i.h.WHITELIST]=e.pb_whitelistManager.userWhitelist||[]),h.a.storage.local.set(__spreadValues(__spreadValues({},m),_))):e.pb_numOfBlocks>=0?(e.settings.isOptIn=e.pb_detectOverlays||"In"===e.isOpted,e.settings[i.m.POPUPS]=void 0===(null==(t=e.settings)?void 0:t[i.m.POPUPS])||e.settings[i.m.POPUPS],e.settings[i.m.HIDE_ELEMENTS]=void 0===(null==(n=e.settings)?void 0:n[i.m.HIDE_ELEMENTS])||e.settings[i.m.HIDE_ELEMENTS],e.settings[i.m.DETECT_OVERLAYS]=e.pb_detectOverlays||"In"===e.isOpted,h.a.storage.local.set({[i.h.SETTINGS]:__spreadValues({},e.settings)})):(p.a.debug("syncConfigOnUpdate: "+JSON.stringify({settings:e.settings})),e.settings[i.m.POPUPS]=void 0===(null==(s=e.settings)?void 0:s[i.m.POPUPS])||e.settings[i.m.POPUPS],e.settings[i.m.HIDE_ELEMENTS]=void 0===(null==(f=e.settings)?void 0:f[i.m.HIDE_ELEMENTS])||e.settings[i.m.HIDE_ELEMENTS],h.a.storage.local.set({[i.h.IS_GET_MOBILE_POPUP_MODEL_CLOSED]:null!=(d=e[i.h.IS_GET_MOBILE_POPUP_MODEL_CLOSED])?d:m[i.h.IS_GET_MOBILE_POPUP_MODEL_CLOSED],[i.h.SETTINGS]:__spreadValues({},e.settings)}))})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return createStoredValueService}));var i=n(29),s=n(104);const createStoredValueService=({storage:e,logger:t,fetchProps:n,responseToValue:l=(e=>e)})=>{const f=Object(i.a)(t,`StoredValue '${n.endpoint}'`);return{update:async()=>{const t=await Object(s.fetchData)(n);if(t){f.debug("New value received");const n=l(t);return await e.store(n),{success:!0,value:n}}f.debug("Keeping old/default");return{success:!1,value:await e.getOrDefault()}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));const i={},s={CONTROL:"control",TEST:"test",TREATMENT:"treatment"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return ga4Event}));var i=n(18),s=n(3),l=n(7),f=n(65),d=Object.defineProperty,h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))p.call(t,n)&&__defNormalProp(e,n,t[n]);if(h)for(var n of h(t))_.call(t,n)&&__defNormalProp(e,n,t[n]);return e};const decode=e=>atob(atob(atob(e))),ga4Event=async(e,t)=>{const n=decode("VW5rd2QxSnJUbE5PYTFaSVRqQktVUT09"),d=decode("Vld4c05tVnRTbE5PVlVaVlUxZHNTMVZXU2tWa01rcHlUbGhLY2xGUlBUMD0="),h=await Object(i.a)();let p={};t&&t.payload&&(p=JSON.parse(t.payload)),p.browser=Object(l.b)(),p.version=Object(s.l)().version;try{const e=(await f.a()).getAll();p=__spreadValues(__spreadValues({},p),e)}catch(e){console.error(e)}p=(e=>{const t=e?Object.keys(e):[],n={};return t.forEach(t=>{let i=Object(s.B)(t,"-","_");i.length>=40&&(i=i.substring(0,40)),n[i]=e[t]}),n})(p);try{fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${n}&api_secret=${d}`,{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:JSON.stringify({client_id:null==h?void 0:h.uuid,events:[{name:e,params:__spreadValues({},p)}]})})}catch(e){console.error(e)}}},,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"logger",(function(){return i}));const i={error:()=>{},debug:()=>{}}},,,,,function(e,t,n){"use strict";(function(e){var i=n(115),s=n(116),l=n(117);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,n){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}function from(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function fromArrayBuffer(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=fromArrayLike(e,t);return e}(e,t,n,i):"string"==typeof t?function fromString(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|byteLength(t,n),s=(e=createBuffer(e,i)).write(t,n);s!==i&&(e=e.slice(0,s));return e}(e,t,n):function fromObject(e,t){if(Buffer.isBuffer(t)){var n=0|checked(t.length);return 0===(e=createBuffer(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function isnan(e){return e!=e}(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&l(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function fromArrayLike(e,t){var n=t.length<0?0:0|checked(t.length);e=createBuffer(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}function slowToString(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function swap(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function bidirectionalIndexOf(e,t,n,i,s){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=s?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(s)return-1;n=e.length-1}else if(n<0){if(!s)return-1;n=0}if("string"==typeof t&&(t=Buffer.from(t,i)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,i,s);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,i,s);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,i,s){var l,f=1,d=e.length,h=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;f=2,d/=2,h/=2,n/=2}function read(e,t){return 1===f?e[t]:e.readUInt16BE(t*f)}if(s){var p=-1;for(l=n;l<d;l++)if(read(e,l)===read(t,-1===p?0:l-p)){if(-1===p&&(p=l),l-p+1===h)return p*f}else-1!==p&&(l-=l-p),p=-1}else for(n+h>d&&(n=d-h),l=n;l>=0;l--){for(var _=!0,g=0;g<h;g++)if(read(e,l+g)!==read(t,g)){_=!1;break}if(_)return l}return-1}function hexWrite(e,t,n,i){n=Number(n)||0;var s=e.length-n;i?(i=Number(i))>s&&(i=s):i=s;var l=t.length;if(l%2!=0)throw new TypeError("Invalid hex string");i>l/2&&(i=l/2);for(var f=0;f<i;++f){var d=parseInt(t.substr(2*f,2),16);if(isNaN(d))return f;e[n+f]=d}return f}function utf8Write(e,t,n,i){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,i)}function asciiWrite(e,t,n,i){return blitBuffer(function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function latin1Write(e,t,n,i){return asciiWrite(e,t,n,i)}function base64Write(e,t,n,i){return blitBuffer(base64ToBytes(t),e,n,i)}function ucs2Write(e,t,n,i){return blitBuffer(function utf16leToBytes(e,t){for(var n,i,s,l=[],f=0;f<e.length&&!((t-=2)<0);++f)n=e.charCodeAt(f),i=n>>8,s=n%256,l.push(s),l.push(i);return l}(t,e.length-n),e,n,i)}function base64Slice(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var i=[],s=t;s<n;){var l,f,d,h,p=e[s],_=null,g=p>239?4:p>223?3:p>191?2:1;if(s+g<=n)switch(g){case 1:p<128&&(_=p);break;case 2:128==(192&(l=e[s+1]))&&(h=(31&p)<<6|63&l)>127&&(_=h);break;case 3:l=e[s+1],f=e[s+2],128==(192&l)&&128==(192&f)&&(h=(15&p)<<12|(63&l)<<6|63&f)>2047&&(h<55296||h>57343)&&(_=h);break;case 4:l=e[s+1],f=e[s+2],d=e[s+3],128==(192&l)&&128==(192&f)&&128==(192&d)&&(h=(15&p)<<18|(63&l)<<12|(63&f)<<6|63&d)>65535&&h<1114112&&(_=h)}null===_?(_=65533,g=1):_>65535&&(_-=65536,i.push(_>>>10&1023|55296),_=56320|1023&_),i.push(_),s+=g}return function decodeCodePointsArray(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return n}(i)}t.Buffer=Buffer,t.SlowBuffer=function SlowBuffer(e){+e!=e&&(e=0);return Buffer.alloc(+e)},t.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,n){return from(null,e,t,n)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,n){return function alloc(e,t,n,i){return assertSize(t),t<=0?createBuffer(e,t):void 0!==n?"string"==typeof i?createBuffer(e,t).fill(n,i):createBuffer(e,t).fill(n):createBuffer(e,t)}(null,e,t,n)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=function isBuffer(e){return!(null==e||!e._isBuffer)},Buffer.compare=function compare(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,s=0,l=Math.min(n,i);s<l;++s)if(e[s]!==t[s]){n=e[s],i=t[s];break}return n<i?-1:i<n?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!l(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=Buffer.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var f=e[n];if(!Buffer.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(i,s),s+=f.length}return i},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function toString(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function inspect(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function compare2(e,t,n,i,s){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),t<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=n)return 0;if(i>=s)return-1;if(t>=n)return 1;if(this===e)return 0;for(var l=(s>>>=0)-(i>>>=0),f=(n>>>=0)-(t>>>=0),d=Math.min(l,f),h=this.slice(i,s),p=e.slice(t,n),_=0;_<d;++_)if(h[_]!==p[_]){l=h[_],f=p[_];break}return l<f?-1:f<l?1:0},Buffer.prototype.includes=function includes(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer.prototype.indexOf=function indexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer.prototype.write=function write(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var s=this.length-t;if((void 0===n||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var l=!1;;)switch(i){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":return asciiWrite(this,e,t,n);case"latin1":case"binary":return latin1Write(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),l=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function asciiSlice(e,t,n){var i="";n=Math.min(e.length,n);for(var s=t;s<n;++s)i+=String.fromCharCode(127&e[s]);return i}function latin1Slice(e,t,n){var i="";n=Math.min(e.length,n);for(var s=t;s<n;++s)i+=String.fromCharCode(e[s]);return i}function hexSlice(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var s="",l=t;l<n;++l)s+=toHex(e[l]);return s}function utf16leSlice(e,t,n){for(var i=e.slice(t,n),s="",l=0;l<i.length;l+=2)s+=String.fromCharCode(i[l]+256*i[l+1]);return s}function checkOffset(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,i,s,l){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<l)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,n,i){t<0&&(t=65535+t+1);for(var s=0,l=Math.min(e.length-n,2);s<l;++s)e[n+s]=(t&255<<8*(i?s:1-s))>>>8*(i?s:1-s)}function objectWriteUInt32(e,t,n,i){t<0&&(t=4294967295+t+1);for(var s=0,l=Math.min(e.length-n,4);s<l;++s)e[n+s]=t>>>8*(i?s:3-s)&255}function checkIEEE754(e,t,n,i,s,l){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,i,l){return l||checkIEEE754(e,0,n,4),s.write(e,t,n,i,23,4),n+4}function writeDouble(e,t,n,i,l){return l||checkIEEE754(e,0,n,8),s.write(e,t,n,i,52,8),n+8}Buffer.prototype.slice=function slice(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Buffer.prototype;else{var s=t-e;n=new Buffer(s,void 0);for(var l=0;l<s;++l)n[l]=this[l+e]}return n},Buffer.prototype.readUIntLE=function readUIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var i=this[e],s=1,l=0;++l<t&&(s*=256);)i+=this[e+l]*s;return i},Buffer.prototype.readUIntBE=function readUIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i},Buffer.prototype.readUInt8=function readUInt8(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function readIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var i=this[e],s=1,l=0;++l<t&&(s*=256);)i+=this[e+l]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},Buffer.prototype.readIntBE=function readIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var i=t,s=1,l=this[e+--i];i>0&&(s*=256);)l+=this[e+--i]*s;return l>=(s*=128)&&(l-=Math.pow(2,8*t)),l},Buffer.prototype.readInt8=function readInt8(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){t||checkOffset(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function readInt16BE(e,t){t||checkOffset(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function readFloatLE(e,t){return t||checkOffset(e,4,this.length),s.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return t||checkOffset(e,4,this.length),s.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return t||checkOffset(e,8,this.length),s.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return t||checkOffset(e,8,this.length),s.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,n,i){(e=+e,t|=0,n|=0,i)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var s=1,l=0;for(this[t]=255&e;++l<n&&(s*=256);)this[t+l]=e/s&255;return t+n},Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,n,i){(e=+e,t|=0,n|=0,i)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var s=n-1,l=1;for(this[t+s]=255&e;--s>=0&&(l*=256);)this[t+s]=e/l&255;return t+n},Buffer.prototype.writeUInt8=function writeUInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function writeIntLE(e,t,n,i){if(e=+e,t|=0,!i){var s=Math.pow(2,8*n-1);checkInt(this,e,t,n,s-1,-s)}var l=0,f=1,d=0;for(this[t]=255&e;++l<n&&(f*=256);)e<0&&0===d&&0!==this[t+l-1]&&(d=1),this[t+l]=(e/f>>0)-d&255;return t+n},Buffer.prototype.writeIntBE=function writeIntBE(e,t,n,i){if(e=+e,t|=0,!i){var s=Math.pow(2,8*n-1);checkInt(this,e,t,n,s-1,-s)}var l=n-1,f=1,d=0;for(this[t+l]=255&e;--l>=0&&(f*=256);)e<0&&0===d&&0!==this[t+l+1]&&(d=1),this[t+l]=(e/f>>0)-d&255;return t+n},Buffer.prototype.writeInt8=function writeInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer.prototype.copy=function copy(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var s,l=i-n;if(this===e&&n<t&&t<i)for(s=l-1;s>=0;--s)e[s+t]=this[s+n];else if(l<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(s=0;s<l;++s)e[s+t]=this[s+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+l),t);return l},Buffer.prototype.fill=function fill(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var s=e.charCodeAt(0);s<256&&(e=s)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!Buffer.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var l;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(l=t;l<n;++l)this[l]=e;else{var f=Buffer.isBuffer(e)?e:utf8ToBytes(new Buffer(e,i).toString()),d=f.length;for(l=0;l<n-t;++l)this[l+t]=f[l%d]}return this};var f=/[^+\/0-9A-Za-z-_]/g;function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var n;t=t||1/0;for(var i=e.length,s=null,l=[],f=0;f<i;++f){if((n=e.charCodeAt(f))>55295&&n<57344){if(!s){if(n>56319){(t-=3)>-1&&l.push(239,191,189);continue}if(f+1===i){(t-=3)>-1&&l.push(239,191,189);continue}s=n;continue}if(n<56320){(t-=3)>-1&&l.push(239,191,189),s=n;continue}n=65536+(s-55296<<10|n-56320)}else s&&(t-=3)>-1&&l.push(239,191,189);if(s=null,n<128){if((t-=1)<0)break;l.push(n)}else if(n<2048){if((t-=2)<0)break;l.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;l.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;l.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return l}function base64ToBytes(e){return i.toByteArray(function base64clean(e){if((e=function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(f,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,n,i){for(var s=0;s<i&&!(s+n>=t.length||s>=e.length);++s)t[s+n]=e[s];return s}}).call(this,n(114))},function(e,t,n){"use strict";var i=n(270);n.o(i,"SampleService")&&n.d(t,"SampleService",(function(){return i.SampleService})),n.o(i,"StoredValueImpl")&&n.d(t,"StoredValueImpl",(function(){return i.StoredValueImpl})),n.o(i,"SyncStoredLocalValue")&&n.d(t,"SyncStoredLocalValue",(function(){return i.SyncStoredLocalValue})),n.o(i,"createSyncedValueService")&&n.d(t,"createSyncedValueService",(function(){return i.createSyncedValueService})),n.o(i,"fetchData")&&n.d(t,"fetchData",(function(){return i.fetchData})),n.o(i,"getSettingsMessagePayload")&&n.d(t,"getSettingsMessagePayload",(function(){return i.getSettingsMessagePayload})),n.o(i,"toggleAutoOptInFeatures")&&n.d(t,"toggleAutoOptInFeatures",(function(){return i.toggleAutoOptInFeatures}));var s=n(271);n.d(t,"fetchData",(function(){return s.a}))},function(e,t,n){"use strict";var i=n(276);n.o(i,"SampleService")&&n.d(t,"SampleService",(function(){return i.SampleService})),n.o(i,"StoredValueImpl")&&n.d(t,"StoredValueImpl",(function(){return i.StoredValueImpl})),n.o(i,"SyncStoredLocalValue")&&n.d(t,"SyncStoredLocalValue",(function(){return i.SyncStoredLocalValue})),n.o(i,"createSyncedValueService")&&n.d(t,"createSyncedValueService",(function(){return i.createSyncedValueService})),n.o(i,"getSettingsMessagePayload")&&n.d(t,"getSettingsMessagePayload",(function(){return i.getSettingsMessagePayload})),n.o(i,"toggleAutoOptInFeatures")&&n.d(t,"toggleAutoOptInFeatures",(function(){return i.toggleAutoOptInFeatures}));var s=n(277);n.d(t,"StoredValueImpl",(function(){return s.a})),n.d(t,"SyncStoredLocalValue",(function(){return s.b}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=["pemsrv.com","aucoudsa.net","fouwheepoh.com","austeemsa.com"]},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return chainAsyncListenerCalls}));const chainAsyncListenerCalls=e=>{let t=Promise.resolve();return async(...n)=>{t=(async n=>(await t,e(...n)))(n)}}},function(e,t,n){"use strict";var i=n(289);n.o(i,"OneTimeWhitelistStorage")&&n.d(t,"OneTimeWhitelistStorage",(function(){return i.OneTimeWhitelistStorage})),n.o(i,"WhitelistServiceImpl")&&n.d(t,"WhitelistServiceImpl",(function(){return i.WhitelistServiceImpl}));var s=n(290);n.d(t,"WhitelistServiceImpl",(function(){return s.a}));var l=n(291);n.d(t,"OneTimeWhitelistStorage",(function(){return l.a}))},function(e,t,n){"use strict";n.r(t),n.d(t,"tools",(function(){return i}));const i={initDevTools:()=>{},devWrap:e=>e,getResetProps:()=>({onDoubleClick:()=>{}})}},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function byteLength(e){var t=getLens(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function toByteArray(e){var t,n,i=getLens(e),f=i[0],d=i[1],h=new l(function _byteLength(e,t,n){return 3*(t+n)/4-n}(0,f,d)),p=0,_=d>0?f-4:f;for(n=0;n<_;n+=4)t=s[e.charCodeAt(n)]<<18|s[e.charCodeAt(n+1)]<<12|s[e.charCodeAt(n+2)]<<6|s[e.charCodeAt(n+3)],h[p++]=t>>16&255,h[p++]=t>>8&255,h[p++]=255&t;2===d&&(t=s[e.charCodeAt(n)]<<2|s[e.charCodeAt(n+1)]>>4,h[p++]=255&t);1===d&&(t=s[e.charCodeAt(n)]<<10|s[e.charCodeAt(n+1)]<<4|s[e.charCodeAt(n+2)]>>2,h[p++]=t>>8&255,h[p++]=255&t);return h},t.fromByteArray=function fromByteArray(e){for(var t,n=e.length,s=n%3,l=[],f=0,d=n-s;f<d;f+=16383)l.push(encodeChunk(e,f,f+16383>d?d:f+16383));1===s?(t=e[n-1],l.push(i[t>>2]+i[t<<4&63]+"==")):2===s&&(t=(e[n-2]<<8)+e[n-1],l.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return l.join("")};for(var i=[],s=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,h=f.length;d<h;++d)i[d]=f[d],s[f.charCodeAt(d)]=d;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function encodeChunk(e,t,n){for(var s,l,f=[],d=t;d<n;d+=3)s=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(255&e[d+2]),f.push(i[(l=s)>>18&63]+i[l>>12&63]+i[l>>6&63]+i[63&l]);return f.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,i,s){var l,f,d=8*s-i-1,h=(1<<d)-1,p=h>>1,_=-7,g=n?s-1:0,E=n?-1:1,y=e[t+g];for(g+=E,l=y&(1<<-_)-1,y>>=-_,_+=d;_>0;l=256*l+e[t+g],g+=E,_-=8);for(f=l&(1<<-_)-1,l>>=-_,_+=i;_>0;f=256*f+e[t+g],g+=E,_-=8);if(0===l)l=1-p;else{if(l===h)return f?NaN:1/0*(y?-1:1);f+=Math.pow(2,i),l-=p}return(y?-1:1)*f*Math.pow(2,l-i)},t.write=function(e,t,n,i,s,l){var f,d,h,p=8*l-s-1,_=(1<<p)-1,g=_>>1,E=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,y=i?0:l-1,m=i?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(d=isNaN(t)?1:0,f=_):(f=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-f))<1&&(f--,h*=2),(t+=f+g>=1?E/h:E*Math.pow(2,1-g))*h>=2&&(f++,h/=2),f+g>=_?(d=0,f=_):f+g>=1?(d=(t*h-1)*Math.pow(2,s),f+=g):(d=t*Math.pow(2,g-1)*Math.pow(2,s),f=0));s>=8;e[n+y]=255&d,y+=m,d/=256,s-=8);for(f=f<<s|d,p+=s;p>0;e[n+y]=255&f,y+=m,f/=256,p-=8);e[n+y-m]|=128*b}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},,,function(e,t,n){"use strict";n.r(t),n.d(t,"WEBAPP_WINPOST_MESSAGE_TO_EXTENSION_NAMES",(function(){return m})),n.d(t,"externalCommunication",(function(){return O}));var i=n(2),s=n(0),l=n(42),f=n(39),d=n(15),h=Object.defineProperty,p=Object.defineProperties,_=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const m=[l.a.LOGIN,l.a.SUBSCRIPTION_SUCCESS,l.a.OPT_IN_AGREE,l.a.OPT_IN_DISAGREE,l.a.OPEN_URL,l.a.REQUEST_EXTENSION_ID],b="WebAppComm";const O=new class WebAppCommunicationImpl{constructor(){var e,t;__defNormalProp(this,"symbol"!=typeof(e="handler")?e+"":e,t)}async initBackground(){return i.a.runtime.onMessage.addListener(e=>{if("web-app-message-to-extension"===e.name){const t=e.data.name;d.a.debug(`${b}: Received web app message '${t}'`),this.handler({type:t,data:e.data},null,e=>{var n;const i=null!=(n=e.name)?n:t;this.sendToTabs("extension-message-to-web-app",((e,t)=>p(e,_(t)))(((e,t)=>{for(var n in t||(t={}))E.call(t,n)&&__defNormalProp(e,n,t[n]);if(g)for(var n of g(t))y.call(t,n)&&__defNormalProp(e,n,t[n]);return e})({},e),{name:i}))})}}),Promise.resolve()}async initContent(){i.a.runtime.onMessage.addListener(e=>{"extension-message-to-web-app"===e.name&&(Object(f.a)(`${b}: Forwarding extension message to web app '${e.data.name}'`),window.postMessage(e.data))}),window.addEventListener("message",e=>{var t;if(!s.r.VALID_MESSAGE_DOMAINS.some(t=>e.origin.includes(t)))return;const n=null==(t=e.data)?void 0:t.name;m.includes(n)&&(Object(f.a)(`${b}: Forwarding web app message to extension '${n}'`),i.a.runtime.sendMessage({name:"web-app-message-to-extension",data:e.data}))},!1)}async sendMessage(e,t={}){const n={name:e,data:t};return await this.sendToTabs("extension-message-to-web-app",n),null}initMessageListener(e){this.handler=e,i.a.runtime.onMessageExternal.addListener(e)}async sendToTabs(e,t){if(!i.a.tabs)return;(await i.a.tabs.query({})).forEach(async n=>{if(n.id)try{await i.a.tabs.sendMessage(n.id,{name:e,data:t||""})}catch(e){}})}}},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return fetchData}));var i=n(45),s=n(15),l=n(8);const fetchData=async e=>{const{endpoint:t,isValid:n=(e=>!0),init:f,validCodes:d}=e;try{const e=await Object(l.a)(t,f);if(!(d?d.includes(e.status):e.ok))throw new Error(`Invalid response status: '${e.status}'`);const i=e.json();if(!n(i))throw new Error("Invalid response");return i}catch(e){return Object(i.b)(e)?s.a.debug("Failed to fetch data. Error: "+e.message):s.a.debug("Failed to fetch data. Error: unknown"),null}}},function(e,t,n){"use strict";var i=n(273);n.d(t,"createSyncedValueService",(function(){return i.a}));n(274);var s=n(275);n.o(s,"SampleService")&&n.d(t,"SampleService",(function(){return s.SampleService})),n.o(s,"StoredValueImpl")&&n.d(t,"StoredValueImpl",(function(){return s.StoredValueImpl})),n.o(s,"SyncStoredLocalValue")&&n.d(t,"SyncStoredLocalValue",(function(){return s.SyncStoredLocalValue})),n.o(s,"getSettingsMessagePayload")&&n.d(t,"getSettingsMessagePayload",(function(){return s.getSettingsMessagePayload})),n.o(s,"toggleAutoOptInFeatures")&&n.d(t,"toggleAutoOptInFeatures",(function(){return s.toggleAutoOptInFeatures}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return createSyncedValueService}));var i=n(85),s=Object.defineProperty,l=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const createSyncedValueService=e=>{var t=e,{storage:n,outdatedAfterInMs:s}=t,h=((e,t)=>{var n={};for(var i in e)f.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&l)for(var i of l(e))t.indexOf(i)<0&&d.call(e,i)&&(n[i]=e[i]);return n})(t,["storage","outdatedAfterInMs"]);const p=Object(i.a)(((e,t)=>{for(var n in t||(t={}))f.call(t,n)&&__defNormalProp(e,n,t[n]);if(l)for(var n of l(t))d.call(t,n)&&__defNormalProp(e,n,t[n]);return e})({storage:n},h));return{syncIfNecessary:async()=>{const{lastSynced:e,isValid:t,value:i}=await n.getState();if(e&&Date.now()-e<s&&t&&i)return{updated:!1,value:i};const l=await p.update();return l.success?(await n.setLastSynced(Date.now()),{updated:!0,value:l.value}):{updated:!1,value:l.value}}}}},function(e,t,n){"use strict";n(85),Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return StoredValueImpl})),n.d(t,"b",(function(){return SyncStoredLocalValue}));var i=n(5),s=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class StoredValueImpl{constructor(e,t,n){this.storageKey=e,this.defaultValue=t,__publicField(this,"isValid"),this.isValid=n||(e=>null!==e)}async get(){return await i.d.get(this.storageKey)}async getOrDefault(){const e=await i.d.get(this.storageKey);return this.isValid(e)?e:this.defaultValue}async store(e){await i.d.set(this.storageKey,e)}}class SyncStoredLocalValue{constructor(e,t,n,i){__publicField(this,"storedValue"),__publicField(this,"storedLastSynced"),this.storedValue=new StoredValueImpl(e,n,i),this.storedLastSynced=new StoredValueImpl(t,0)}async setLastSynced(e){await this.storedLastSynced.store(e)}async getState(){const e=await this.storedLastSynced.getOrDefault(),t=await this.storedValue.get();return this.storedValue.isValid(t)?{lastSynced:e,isValid:!0,value:t}:{lastSynced:e,isValid:!1,value:t}}async getOrDefault(){return this.storedValue.getOrDefault()}async store(e){this.storedValue.store(e)}async get(){return this.storedValue.get()}}},function(e,t,n){"use strict";var i=n(279);n.o(i,"SampleService")&&n.d(t,"SampleService",(function(){return i.SampleService})),n.o(i,"StoredValueImpl")&&n.d(t,"StoredValueImpl",(function(){return i.StoredValueImpl})),n.o(i,"SyncStoredLocalValue")&&n.d(t,"SyncStoredLocalValue",(function(){return i.SyncStoredLocalValue})),n.o(i,"createSyncedValueService")&&n.d(t,"createSyncedValueService",(function(){return i.createSyncedValueService})),n.o(i,"getSettingsMessagePayload")&&n.d(t,"getSettingsMessagePayload",(function(){return i.getSettingsMessagePayload})),n.o(i,"toggleAutoOptInFeatures")&&n.d(t,"toggleAutoOptInFeatures",(function(){return i.toggleAutoOptInFeatures}));var s=n(280);n.d(t,"SampleService",(function(){return s.a}))},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return SampleService}));var i=n(105),s=Object.defineProperty,l=Object.defineProperties,f=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class SampleService{constructor(e,t){var n,s;__defNormalProp(this,"symbol"!=typeof(n="recordToSampleInfoStoredValue")?n+"":n,s),this.recordToSampleInfoStoredValue=new i.StoredValueImpl(e,t)}async getSampleInfo(e){return(await this.recordToSampleInfoStoredValue.getOrDefault())[e]}async setEventSampleInfo(e,t){const n=await this.recordToSampleInfoStoredValue.getOrDefault();await this.recordToSampleInfoStoredValue.store(((e,t)=>l(e,f(t)))(((e,t)=>{for(var n in t||(t={}))h.call(t,n)&&__defNormalProp(e,n,t[n]);if(d)for(var n of d(t))p.call(t,n)&&__defNormalProp(e,n,t[n]);return e})({},n),{[e]:t}))}async sample(e,t,{sampleSize:n}){var i;let{count:s=0}=null!=(i=await this.getSampleInfo(t))?i:{count:0};s++,s>=n?(await this.setEventSampleInfo(t,{count:0}),e()):await this.setEventSampleInfo(t,{count:s})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return toggleAutoOptInFeatures}));var i=n(40),s=n(53),l=n(15);const toggleAutoOptInFeatures=async e=>{const t=await s.a.getInstance().getAllFeatureConfigs({isOptIn:!0});for(const n of Object.values(t).map(e=>e.storageKey))l.a.debug("toggleAutoOptInFeatures",{feature:n,value:e}),await i.a.getInstance().toggleFeatureState(n,e)}},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return getSettingsMessagePayload}));var i=n(40),s=n(0),l=n(5),f=n(30);const getSettingsMessagePayload=async()=>{var e;const[t,n,d]=await Promise.all([l.c.get([s.h.SOCIAL_CONTENT_KEYWORDS]),f.a.list(!1),i.a.getInstance().getAllFeaturesState()]);return{features:d,socialContentKeyWords:null!=(e=t.socialContentKeyWords)?e:[],whitelist:n}}},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return BlacklistSyncServiceImpl}));var i=n(29),s=n(45),l=n(106),f=n(8),d=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class BlacklistSyncServiceImpl{constructor(e,t,n){this.config=t,this.storage=n,__publicField(this,"logger"),this.logger=Object(i.a)(e,"BlacklistSyncService")}async sync(){this.logger.debug("Syncing");let e=[];try{const t=await Object(f.a)(this.config.blacklistFetchUrl);if(t.ok){const{blacklist:n}=await t.json();this.logger.debug(`Fetched ${n.length} entries`),e=n}else this.logger.debug("Fetch failed. Status: "+t.status)}catch(e){this.logger.debug("Fetch error. Message: "+Object(s.a)(e))}await this.storage.transaction(async()=>{if(0===e.length){await this.storage.isEmpty()?(this.logger.debug("Storing default blacklist"),await this.storage.store(l.a)):this.logger.debug("Keeping old blacklist")}else this.logger.debug("Storing new blacklist"),await this.storage.store(e)})}}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return WhitelistServiceImpl}));var i=n(29),s=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class WhitelistServiceImpl{constructor({logger:e,oneTimeWhitelistStorage:t,defaultWhitelistStorage:n,analyticsSession:s}){__publicField(this,"logger"),__publicField(this,"oneTimeWhitelistStorage"),__publicField(this,"defaultWhitelistStorage"),__publicField(this,"analyticsSession"),this.logger=Object(i.a)(e,"WhitelistService"),this.oneTimeWhitelistStorage=t,this.defaultWhitelistStorage=n,this.analyticsSession=s}async has(e){try{if(await this.oneTimeWhitelistStorage.has(e.toString()))return this.logger.debug(`Url ${e.toString()} is matched against one time whitelist`),!0;const t=await this.defaultWhitelistStorage.has(e.toString());return this.analyticsSession.recordDefaultWhitelistResult(t),this.logger.debug(`Url ${e.toString()} is matched against default whitelist? ${t}`),t}catch(e){return this.logger.debug("Error matching url"),!1}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return OneTimeWhitelistStorage}));var i=n(29),s=n(59),l=n(0),f=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class OneTimeWhitelistStorage{constructor(e){__publicField(this,"logger"),__publicField(this,"lastUpdatedInMs",0),__publicField(this,"whitelist",[]),this.logger=Object(i.a)(e,"OneTimeBlock")}async store(e){this.lastUpdatedInMs=Date.now(),this.whitelist=e.map(e=>{try{return new URL(e)}catch(e){return null}}).filter(s.a),this.logger.debug(`Set one time whitelist to '['${this.whitelist.map(e=>e.toString()).join("','")}']'`)}async has(e){if(Date.now()-this.lastUpdatedInMs>l.R)return this.logger.debug("Whitelist is outdated"),!1;const t=this.whitelist.findIndex(t=>t.toString()===e);return-1===t?(this.logger.debug("Url is not whitelisted"),!1):(this.logger.debug(`Whitelisted url: '${e.toString()}'`),this.whitelist=this.whitelist.filter((e,n)=>n!==t),!0)}}},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return PopupCheckerImpl}));var i=n(45),s=n(29),l=n(0),f=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class PopupCheckerImpl{constructor(e,t,n,i){this.blacklistService=t,this.whitelistService=n,this.analyticsService=i,__publicField(this,"logger"),this.logger=Object(s.a)(e,"PopupChecker")}contructURL(e){let t;try{t=new URL(e)}catch(t){this.logger.debug(`Couldnt construct URL for '${e}'. Message: ${Object(i.a)(t)}`)}return t}async isGoodPopup(e){const t=e.sourceTabExists?this.contructURL(e.sourceTabUrl):void 0,n=this.contructURL(e.url);return!n||(t&&await this.whitelistService.has(t)?(this.analyticsService.recordWhitelistReason(l.O.Source),!0):n&&await this.whitelistService.has(n)?(this.analyticsService.recordWhitelistReason(l.O.Target),!0):!await this.blacklistService.has(n))}}},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return service_PopupBlockService}));var i=n(0),s=n(3);var l=n(49),f=Object.defineProperty,d=Object.defineProperties,h=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))_.call(t,n)&&__defNormalProp(e,n,t[n]);if(p)for(var n of p(t))g.call(t,n)&&__defNormalProp(e,n,t[n]);return e};const sendPopupBlockAnalyticsEvent=e=>{var t,n,i=e,{type:f,targetUrl:E,sourceUrl:y}=i,m=((e,t)=>{var n={};for(var i in e)_.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&p)for(var i of p(e))t.indexOf(i)<0&&g.call(e,i)&&(n[i]=e[i]);return n})(i,["type","targetUrl","sourceUrl"]);return Object(l.a)(f,{payload:JSON.stringify((t=__spreadValues({},m),n={targetUrl:E,sourceUrl:y,targetDomain:Object(s.b)(E),sourceDomain:Object(s.b)(y)},d(t,h(n))))})};var E=n(29);const createPopupAnalyticsSession=(e,t)=>{const n=Object(E.a)(e,"PopupAnalyticsSession"),l={popupBlocked:!1,whitelist:{matchedDefault:!1}};return{recordBlock:()=>{l.popupBlocked=!0},recordWhitelistReason:e=>{l.whitelist.matchedDefault&&(l.whitelist.reason=e)},recordDefaultWhitelistResult:e=>{l.whitelist={matchedDefault:e,reason:void 0}},end:async()=>{var e,f,d;if(l.popupBlocked)n.debug("Sending popup blocked"),sendPopupBlockAnalyticsEvent({type:i.c.ANALYTICS_EVENT_TYPES.POP_BLOCK_PST_OPEN_1_BLACKLIST,targetUrl:t.url,sourceUrl:t.sourceTabExists?t.sourceTabUrl:"not exists"}),f=i.t.WORKER_BLOCKED_POPUP,d={targetUrl:t.url},Object(s.H)(f,d);else if(l.whitelist.matchedDefault){n.debug("Sending whitelist matched");const s=null!=(e=l.whitelist.reason)?e:i.O.Source;sendPopupBlockAnalyticsEvent({type:s===i.O.Source?i.c.ANALYTICS_EVENT_TYPES.POP_WHITE_PST_OPEN_1_SRC:i.c.ANALYTICS_EVENT_TYPES.POP_WHITE_PST_OPEN_1_TRGT,targetUrl:t.url,sourceUrl:t.sourceTabExists?t.sourceTabUrl:"not exists"})}}}};var y=n(314),m=n(315),b=n(111);var O=Object.defineProperty,S=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,service_defNormalProp=(e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class service_PopupBlockService{constructor(e,t,n,i,s,l){var f,d;this.configService=e,service_defNormalProp(this,"symbol"!=typeof(f="popupHandlerDeps")?f+"":f,d),l.setOnNavigatedToTabListener(this.onNavigatedToTabHandler.bind(this)),this.popupHandlerDeps={logger:t,blacklistStorage:n,oneTimeWhitelistStorage:i,defaultWhitelistStorage:s,browserService:l}}async onNavigatedToTabHandler(e){if(await this.configService.isBlockingEnabled()){const t=this.popupHandlerDeps,{logger:n}=t,i=((e,t)=>{var n={};for(var i in e)v.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&S)for(var i of S(e))t.indexOf(i)<0&&T.call(e,i)&&(n[i]=e[i]);return n})(t,["logger"]),s=createPopupAnalyticsSession(n,e),{handlePopup:l}=(({logger:e,blacklistStorage:t,oneTimeWhitelistStorage:n,defaultWhitelistStorage:i,analyticsSession:s,browserService:l})=>{const f=[e,new y.BlacklistServiceImpl(e,t),new b.WhitelistServiceImpl({logger:e,oneTimeWhitelistStorage:n,defaultWhitelistStorage:i,analyticsSession:s}),s],d=new m.PopupCheckerImpl(...f);return{handlePopup:async t=>{const n=Date.now();e.debug("Checking popup url "+t.url);await d.isGoodPopup(t)||(e.debug("Trying to close popup "+t.url),await l.removeTab(t.tabId),e.debug(`Closed popup ${t.url} in ${Date.now()-n}ms`),s.recordBlock())}}})(((e,t)=>{for(var n in t||(t={}))v.call(t,n)&&service_defNormalProp(e,n,t[n]);if(S)for(var n of S(t))T.call(t,n)&&service_defNormalProp(e,n,t[n]);return e})({logger:n,analyticsSession:s},i));await l(e),s.end()}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return service_BrowserServiceImpl}));var i=n(2),s=n(110),l=n(29),f=n(45),d=Object.defineProperty,h=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class OnNavigatedTabEventListener_WebNavigationEventListener{constructor(e,t){var n,i;this.listener=t,__defNormalProp(this,"symbol"!=typeof(n="logger")?n+"":n,i),this.logger=Object(l.a)(e,"OnNavigatedToTabEventDetailsListener"),this.handleEvent.bind(this)}async createEventDetails({sourceTabId:e,tabId:t,url:n}){let s;try{s=(await i.a.tabs.get(e)).url}catch(e){this.logger.debug("Failed to find source tab. Error: "+Object(f.a)(e))}return((e,t)=>{for(var n in t||(t={}))p.call(t,n)&&__defNormalProp(e,n,t[n]);if(h)for(var n of h(t))_.call(t,n)&&__defNormalProp(e,n,t[n]);return e})({tabId:t,url:n,sourceTabId:e},s?{sourceTabUrl:s,sourceTabExists:!0}:{sourceTabExists:!1})}async handleEvent(e){const t=await this.createEventDetails(e);await this.listener(t)}}var g=Object.defineProperty,service_publicField=(e,t,n)=>(((e,t,n)=>{t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class service_BrowserServiceImpl{constructor(e){service_publicField(this,"logger"),this.logger=Object(l.a)(e,"BrowserService")}setOnNavigatedToTabListener(e){i.a.custom.webNavigation.onCreatedNavigationTarget.addListener(Object(s.a)(async t=>{const n=new OnNavigatedTabEventListener_WebNavigationEventListener(this.logger,e);await n.handleEvent(t)}))}async removeTab(e){await i.a.tabs.remove(e)}}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return service_BlacklistServiceImpl}));var i=n(29),s=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class service_BlacklistServiceImpl{constructor(e,t){this.storage=t,__publicField(this,"logger"),this.logger=Object(i.a)(e,"BlacklistService")}async has(e){const t=(e=>e.hostname.split(".").slice(-2).join("."))(e),n=await this.storage.has(t);return this.logger.debug(`Url ${e.toString()} is matched ? ${n}`),n}}},,,,,,,,,,function(e,t,n){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i=n(18),s=function(){function e2(){}return e2.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e2.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e2.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e2.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e2.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e2.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e2.getVersionPrecision=function(e){return e.split(".").length},e2.compareVersions=function(e,t,n){void 0===n&&(n=!1);var i=e2.getVersionPrecision(e),s=e2.getVersionPrecision(t),l=Math.max(i,s),f=0,d=e2.map([e,t],(function(e){var t=l-e2.getVersionPrecision(e),n=e+new Array(t+1).join(".0");return e2.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(f=l-Math.min(i,s)),l-=1;l>=f;){if(d[0][l]>d[1][l])return 1;if(d[0][l]===d[1][l]){if(l===f)return 0;l-=1}else if(d[0][l]<d[1][l])return-1}},e2.map=function(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)i.push(t(e[n]));return i},e2.find=function(e,t){var n,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,i=e.length;n<i;n+=1){var s=e[n];if(t(s,n))return s}},e2.assign=function(e){for(var t,n,i=e,s=arguments.length,l=new Array(s>1?s-1:0),f=1;f<s;f++)l[f-1]=arguments[f];if(Object.assign)return Object.assign.apply(Object,[e].concat(l));var o=function(){var e=l[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){i[t]=e[t]}))};for(t=0,n=l.length;t<n;t+=1)o();return e},e2.getBrowserAlias=function(e){return i.BROWSER_ALIASES_MAP[e]},e2.getBrowserTypeByAlias=function(e){return i.BROWSER_MAP[e]||""},e2}();t.default=s,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,s=(i=n(91))&&i.__esModule?i:{default:i},l=n(18);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e2(){}var e,t;return e2.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new s.default(e,t)},e2.parse=function(e){return new s.default(e).getResult()},e=e2,(t=[{key:"BROWSER_MAP",get:function(){return l.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return l.ENGINE_MAP}},{key:"OS_MAP",get:function(){return l.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return l.PLATFORMS_MAP}}])&&a(e,t),e2}();t.default=f,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i=u(n(92)),s=u(n(93)),l=u(n(94)),f=u(n(95)),d=u(n(17));function u(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e2(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var e=e2.prototype;return e.getUA=function(){return this._ua},e.test=function(e){return e.test(this._ua)},e.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=d.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},e.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},e.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},e.getBrowserVersion=function(){return this.getBrowser().version},e.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},e.parseOS=function(){var e=this;this.parsedResult.os={};var t=d.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},e.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},e.getOSVersion=function(){return this.getOS().version},e.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},e.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},e.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=d.default.find(l.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},e.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},e.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},e.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=d.default.find(f.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},e.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},e.getResult=function(){return d.default.assign({},this.parsedResult)},e.satisfies=function(e){var t=this,n={},i=0,s={},l=0;if(Object.keys(e).forEach((function(t){var f=e[t];"string"==typeof f?(s[t]=f,l+=1):"object"==typeof f&&(n[t]=f,i+=1)})),i>0){var f=Object.keys(n),h=d.default.find(f,(function(e){return t.isOS(e)}));if(h){var p=this.satisfies(n[h]);if(void 0!==p)return p}var _=d.default.find(f,(function(e){return t.isPlatform(e)}));if(_){var g=this.satisfies(n[_]);if(void 0!==g)return g}}if(l>0){var E=Object.keys(s),y=d.default.find(E,(function(e){return t.isBrowser(e,!0)}));if(void 0!==y)return this.compareVersion(s[y])}},e.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),i=e.toLowerCase(),s=d.default.getBrowserTypeByAlias(i);return t&&s&&(i=s.toLowerCase()),i===n},e.compareVersion=function(e){var t=[0],n=e,i=!1,s=this.getBrowserVersion();if("string"==typeof s)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(i=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(i=!0,n=e.substr(1)),t.indexOf(d.default.compareVersions(s,n,i))>-1},e.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},e.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},e.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},e.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},e.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e2}();t.default=h,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,s=(i=n(17))&&i.__esModule?i:{default:i},l=/version\/(\d+(\.?_?\d+)+)/i,f=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=s.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=s.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=s.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=s.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=s.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=s.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=s.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=s.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=s.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=s.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=s.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=s.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=s.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=s.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=s.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=s.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=s.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=s.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=s.default.getFirstMatch(l,e)||s.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=s.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=s.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=s.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=s.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=s.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=s.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=s.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=s.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=s.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=s.default.getFirstMatch(l,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:s.default.getFirstMatch(t,e),version:s.default.getSecondMatch(t,e)}}}];t.default=f,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,s=(i=n(17))&&i.__esModule?i:{default:i},l=n(18),f=[{test:[/Roku\/DVP/],describe:function(e){var t=s.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:l.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=s.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:l.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=s.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=s.default.getWindowsVersionName(t);return{name:l.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:l.OS_MAP.iOS},n=s.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=s.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=s.default.getMacOSVersionName(t),i={name:l.OS_MAP.MacOS,version:t};return n&&(i.versionName=n),i}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=s.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:l.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=s.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=s.default.getAndroidVersionName(t),i={name:l.OS_MAP.Android,version:t};return n&&(i.versionName=n),i}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=s.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:l.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=s.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||s.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||s.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:l.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=s.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:l.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=s.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:l.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:l.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:l.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=s.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:l.OS_MAP.PlayStation4,version:t}}}];t.default=f,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,s=(i=n(17))&&i.__esModule?i:{default:i},l=n(18),f=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=s.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:l.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=s.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:l.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:l.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:l.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:l.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:l.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.tv}}}];t.default=f,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i,s=(i=n(17))&&i.__esModule?i:{default:i},l=n(18),f=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:l.ENGINE_MAP.Blink};var t=s.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:l.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:l.ENGINE_MAP.Trident},n=s.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:l.ENGINE_MAP.Presto},n=s.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:l.ENGINE_MAP.Gecko},n=s.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:l.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:l.ENGINE_MAP.WebKit},n=s.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=f,e.exports=t.default}})},function(e,t,n){"use strict";var i=n(284);n.o(i,"BlacklistSyncServiceImpl")&&n.d(t,"BlacklistSyncServiceImpl",(function(){return i.BlacklistSyncServiceImpl}));var s=n(285);n.d(t,"BlacklistSyncServiceImpl",(function(){return s.a}));n(106)},function(e,t,n){"use strict";var i=n(287);n.o(i,"BrowserServiceImpl")&&n.d(t,"BrowserServiceImpl",(function(){return i.BrowserServiceImpl}));var s=n(297);n.d(t,"BrowserServiceImpl",(function(){return s.a}));n(288)},function(e,t,n){"use strict";var i=n(296);n.d(t,"PopupBlockService",(function(){return i.a}));n(295)},function(e,t,n){"use strict";var i=n(292);n.o(i,"BlacklistServiceImpl")&&n.d(t,"BlacklistServiceImpl",(function(){return i.BlacklistServiceImpl}));var s=n(300);n.d(t,"BlacklistServiceImpl",(function(){return s.a}))},function(e,t,n){"use strict";var i=n(293);n.o(i,"PopupCheckerImpl")&&n.d(t,"PopupCheckerImpl",(function(){return i.PopupCheckerImpl}));var s=n(294);n.d(t,"PopupCheckerImpl",(function(){return s.a}))},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var i=n(0),s=n(43),l=n(2);var f=n(8),d=n(3);var h=n(19),p=n(24),_=Object.defineProperty,g=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))E.call(t,n)&&__defNormalProp(e,n,t[n]);if(g)for(var n of g(t))y.call(t,n)&&__defNormalProp(e,n,t[n]);return e};async function createBrowserContextMenu(e){if(!p.b)if(e)l.a.custom.contextMenus.removeAll();else{const e=await l.a.custom.contextMenus.create(i.j.PARENT);l.a.custom.contextMenus.create(__spreadValues({parentId:e},i.j.OVERLAY)),l.a.custom.contextMenus.create(__spreadValues({parentId:e},i.j.BLOCK_ELEMENT))}}var m=n(49),b=n(5),O=n(20);var S=n(18),v=Object.defineProperty,T=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,promo_coupon_defNormalProp=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,promo_coupon_spreadValues=(e,t)=>{for(var n in t||(t={}))w.call(t,n)&&promo_coupon_defNormalProp(e,n,t[n]);if(T)for(var n of T(t))I.call(t,n)&&promo_coupon_defNormalProp(e,n,t[n]);return e};var A=n(87),P=n(84),C=n(22),R=Object.defineProperty;const N=class _AlarmManager{static getInstance(){return void 0===this.instance&&(this.instance=new _AlarmManager),this.instance}async createPeriodicAlarm(e,t,n=!1){await this.createIfNeeded(e,{periodInMinutes:t},n)}async createPeriodicAlarmWithDelay(e,t,n=0,i=!1){await this.createIfNeeded(e,{delayInMinutes:n,periodInMinutes:t},i)}async createOneTimeAlarm(e,t,n=!1){await this.createIfNeeded(e,{when:t},n)}async createDelayedAlarm(e,t,n=!1){await this.createIfNeeded(e,{delayInMinutes:t},n)}async clearAlarms(){return new Promise(e=>{l.a.alarms.clearAll(t=>{e(t)})})}async clearAlarm(e){return new Promise(t=>{l.a.alarms.clear(e,e=>{t(e)})})}registerAlarmListener(e){e&&l.a.alarms.onAlarm.addListener(e)}async getAlarm(e){return new Promise(t=>{l.a.alarms.get(e,e=>{t(e)})})}async createIfNeeded(e,t,n=!1){if(await this.getAlarm(e)){if(!n)return;await this.clearAlarm(e)}l.a.alarms.create(e,t)}};var L,D;((e,t,n)=>{t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(N,"symbol"!=typeof(L="instance")?L+"":L,D);var k=N,B=n(31),F=n(35),x=Object.defineProperty,M=Object.defineProperties,U=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,favicon_manager_defNormalProp=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,favicon_manager_spreadValues=(e,t)=>{for(var n in t||(t={}))j.call(t,n)&&favicon_manager_defNormalProp(e,n,t[n]);if(K)for(var n of K(t))H.call(t,n)&&favicon_manager_defNormalProp(e,n,t[n]);return e};var V=new class favicon_manager_FaviconManager{updateBadgeState(e){l.a.custom.action.setIcon({path:e.BadgeIcon}),l.a.custom.action.setBadgeText({text:e.InitialText}),l.a.custom.action.setBadgeTextColor({color:e.TextColor}),l.a.custom.action.setBadgeBackgroundColor({color:e.BadgeColor})}async refreshIconAndLabel(){if(!await B.a.isOptIn())return void this.updateBadgeState(i.f.OPT_OUT);if(await b.d.get(i.h.PAUSED))return void this.updateBadgeState(i.f.EXTENSION_OFF);const e=await Object(d.g)(),t=await(new F.b).load();let n=0;const s=void 0!==(null==e?void 0:e.id)?t.getByTabId(e.id):void 0;var l;(s&&Object.keys(s.totalBlocksByType).forEach(e=>{n+=s.totalBlocksByType[e]}),n>0)?this.updateBadgeState((l=favicon_manager_spreadValues({},i.f.STATS_COUNT),M(l,U({InitialText:""+n})))):this.updateBadgeState(favicon_manager_spreadValues({},i.f.STATS_COUNT))}},G=(e=>(e.BLOCK="block",e.REDIRECT="redirect",e.ALLOW="allow",e.UPGRADE_SCHEME="upgradeScheme",e.MODIFY_HEADERS="modifyHeaders",e.ALLOW_ALL_REQUESTS="allowAllRequests",e))(G||{}),W=(e=>(e.MAIN_FRAME="main_frame",e.SUB_FRAME="sub_frame",e.STYLESHEET="stylesheet",e.SCRIPT="script",e.IMAGE="image",e.FONT="font",e.OBJECT="object",e.XMLHTTPREQUEST="xmlhttprequest",e.PING="ping",e.CSP_REPORT="csp_report",e.MEDIA="media",e.WEBSOCKET="websocket",e.OTHER="other",e))(W||{});const Y={"first-party":"firstParty","third-party":"thirdParty"};var q=Object.defineProperty,X=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,rule_defNormalProp=(e,t,n)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class rule_AjaxBlockingRule extends class Rule{constructor(e){this.ruleId=e,((e,t,n)=>{rule_defNormalProp(e,"symbol"!=typeof t?t+"":t,n)})(this,"getRuleId",()=>this.ruleId)}getRule(){const e=this.getCondition(),t=this.getInitiatorDomains(),n=this.getExcludedInitiatorDomains();return t&&(e.initiatorDomains=t),n&&(e.excludedInitiatorDomains=n),{id:this.ruleId,priority:1,condition:e,action:{type:this.getAction()}}}}{constructor(e,t,n,i,s,l){super(e),this.url=t,this.initiatorDomains=n,this.excludedInitiatorDomains=i,this.resourceTypes=s,this.domainType=l}getCondition(){return((e,t)=>{for(var n in t||(t={}))Z.call(t,n)&&rule_defNormalProp(e,n,t[n]);if(X)for(var n of X(t))z.call(t,n)&&rule_defNormalProp(e,n,t[n]);return e})({urlFilter:this.url.startsWith("||")||this.url.endsWith("^")?this.url:`*${this.url}*`,resourceTypes:this.resourceTypes||[W.SCRIPT,W.XMLHTTPREQUEST]},this.domainType?{domainType:this.convertDomainType(this.domainType)}:{})}convertDomainType(e){return Y[e]}getAction(){return G.BLOCK}getInitiatorDomains(){return this.initiatorDomains}getExcludedInitiatorDomains(){return this.excludedInitiatorDomains}}var Q=n(30),J=n(34),$=Object.defineProperty,script_blocker_publicField=(e,t,n)=>(((e,t,n)=>{t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);function sourceToRule(e,t,n,i,s){return new rule_AjaxBlockingRule(function generateRuleId(e,t,n){let i=null!=n?n:e.length;return void 0===n&&Array.from(e).forEach(e=>{i+=e.charCodeAt(0)}),Math.floor(1e4*i+t)}(e.url,t,null==e?void 0:e.id),e.url,e.initiator,n,i,s)}const ee=class _ScriptBlocker{constructor(e,t,n,i){if(this.uniqueRuleId=e,this.configKey=t,this.dnrWrapper=n,this.type=i,script_blocker_publicField(this,"blockedDomains",new Set),script_blocker_publicField(this,"blockType"),script_blocker_publicField(this,"requestListener"),script_blocker_publicField(this,"enabled",!1),script_blocker_publicField(this,"isEnabled",()=>this.enabled),this.blockType=i,e>9999||e<1e3)throw Error("blocker unique id can only be between 1000 to 9999")}async enable(){if(this.enabled)return;const e=await Q.a.list();await this.loadConfig(e),this.enabled=!0}async disable(){this.enabled&&(await this.reset(),this.enabled=!1)}async updateConfig(){this.restart()}async restart(){this.isEnabled()&&(await this.disable(),await this.enable())}async loadConfig(e,t=!0){const n=await J.a.getConfig(this.configKey);if(!n)throw new Error("failed getting config");{const i=[];n.providers.map(e=>i.push(...e.sources)),t&&await this.applyDnrRules(this.getDnrRules(i,e,n.resourceTypes)),await this.loadMonitorRules(i)}}async startMonitor(){await this.loadConfig([],!1),this.requestListener=e=>{if(e&&e.url&&_ScriptBlocker.MONITORED_REQ_TYPES.has(e.type))try{if(e.tabId<0)return;if(!this.blockedDomains.has(Object(d.b)(e.url)))return;const{originUrl:t}=e;let{initiator:n}=e;if(n=Object(d.b)(n||t),!n)return;const s={tabId:e.tabId,initiator:n,url:e.url,type:e.type};this.enabled?this.onBlockedScriptRequest&&this.onBlockedScriptRequest(s):(l.a.tabs.sendMessage(e.tabId,{name:i.t.INCREMENT_TRACKER_BLOCKER_SESSION_COUNT}),F.d.updateUnblockStatsStatsTotals({type:this.blockType,tabId:e.tabId}))}catch(e){console.error("requestListener => "+e)}},this.requestListener=this.requestListener.bind(this),l.a.custom.webRequest.onBeforeRequest.addListener(this.requestListener,{urls:["*://*/*"]})}getDnrRules(e,t,n,i){const s=[..._ScriptBlocker.DEFAULT_EXCLUDED_DOMAINS,...t,"null"],l=[],f=[];return e.forEach(e=>{const t=sourceToRule(e,this.uniqueRuleId,s,n,i);l.push(t.getRuleId()),f.push(t.getRule())}),{removeRuleIds:l,dnrRules:f}}async applyDnrRules(e){await this.dnrWrapper.updateDynamicRules({removeRuleIds:e.removeRuleIds,addRules:e.dnrRules})}async loadMonitorRules(e){this.blockedDomains.clear(),e.forEach(e=>{this.blockedDomains.add(Object(d.b)(e.url))})}async reset(){const e=(await this.dnrWrapper.getDynamicRules()).map(e=>e.id).filter(e=>function isRelevantId(e,t){const n=e.toString();if(n.length>4){return n.substring(n.length-4,n.length)===t.toString()}return!1}(e,this.uniqueRuleId));await this.dnrWrapper.updateDynamicRules({removeRuleIds:e})}};script_blocker_publicField(ee,"MONITORED_REQ_TYPES",new Set([W.SCRIPT])),script_blocker_publicField(ee,"DEFAULT_EXCLUDED_DOMAINS",["poperblocker.com","pbapi.xyz"]);let te=ee;var re=Object.defineProperty,api_publicField=(e,t,n)=>(((e,t,n)=>{t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);var ne=new class api_DNRHelper extends class DeclarativeNetRequest{constructor(){api_publicField(this,"onRuleMatchedDebug")}}{constructor(){super(...arguments),api_publicField(this,"updateDynamicRules",async e=>new Promise((t,n)=>{l.a.declarativeNetRequest.updateDynamicRules(e,()=>{var e;const i=null==(e=l.a.runtime)?void 0:e.lastError;i?n(i):t()})})),api_publicField(this,"getDynamicRules",async()=>new Promise((e,t)=>{l.a.declarativeNetRequest.getDynamicRules(n=>{var i;const s=null==(i=l.a.runtime)?void 0:i.lastError;s?t(s):e(n)})})),api_publicField(this,"onRuleMatchedDebug",{addListener(e){l.a.custom.declarativeNetRequest.onRuleMatchedDebug.addListener(e)}})}},ie=n(37);var ae=new class ads_blocker_AdsBlocker extends te{constructor(){super(2563,ie.a.adsBlocker,ne,"ad")}onBlockedScriptRequest(e){setTimeout(async()=>{const t=await Q.a.list(),n=await Object(d.m)(e.tabId);try{const s=new URL(n.url).hostname.replace("www.","");t.includes(s)||(F.d.updateTotalBlocksByTabId({tabId:e.tabId,type:"ad"}),Object(m.a)(Object(d.f)(i.c.PAGE.PANEL,i.c.FEATURE.ADS_BLOCKER,i.c.EVENT_TYPE.BLOCKED),{payload:JSON.stringify({sourceDomain:s})}))}catch(e){}},500)}sanitizeUrls(e){return e.map(e=>({url:e.replace(/^\|\||[\^]+$/g,"")}))}shouldMonitorUrl(e,t){return e.every(e=>[W.SCRIPT,W.XMLHTTPREQUEST,W.SUB_FRAME].includes(e))&&!t}isLegacyConfig(e){return!Array.isArray(e)&&(null==e?void 0:e.providers)&&e.providers.length>0}isNewConfig(e){return Array.isArray(e)&&e.every(e=>e.url&&e.resourceTypes)}async loadConfig(e,t=!0){const n=await J.a.getConfig(this.configKey);if(this.isLegacyConfig(n)){const i=[];n.providers.map(e=>i.push(...e.sources)),t&&await this.applyDnrRules(this.getDnrRules(i,e,n.resourceTypes)),await this.loadMonitorRules(i)}else{if(!this.isNewConfig(n))throw new Error("Failed to load ads blocker blacklist");{const i=[],s=[],l=[];n.forEach(({resourceTypes:t,url:n,domainType:f},d)=>{this.shouldMonitorUrl(t,f)&&l.push(n);const{dnrRules:h,removeRuleIds:p}=this.getDnrRules([{url:n,id:d}],e,t,f);i.push(...h),s.push(...p)}),t&&await this.applyDnrRules({dnrRules:i,removeRuleIds:s}),await this.loadMonitorRules(this.sanitizeUrls(l))}}}};var se=new class trackers_blocker_TrackersBlocker extends te{constructor(){super(2564,ie.a.trackerBlocker,ne,"tracker")}async onBlockedScriptRequest(e){const t=await Q.a.list(),n=await Object(d.m)(e.tabId),i=new URL(n.url).hostname.replace("www.","");t.includes(i)||F.d.updateTotalBlocksByTabId({tabId:e.tabId,type:"tracker"})}},oe=n(40),ce=Object.defineProperty,script_blockers_manager_publicField=(e,t,n)=>(((e,t,n)=>{t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);var ue=new class script_blockers_manager_ScriptBlockersManager{constructor(){script_blockers_manager_publicField(this,"refresh",async()=>{ae.isEnabled()&&ae.restart(),se.isEnabled()&&se.restart()}),script_blockers_manager_publicField(this,"onLoaded",async()=>(await se.startMonitor(),await ae.startMonitor(),this.initializeFeatureToggleListener(),this.toggleFeatures())),script_blockers_manager_publicField(this,"getScriptBlockerByFeature",e=>{let t;return e===i.m.ADS_BLOCKER?t=ae:e===i.m.TRACKERS_BLOCKER&&(t=se),t}),script_blockers_manager_publicField(this,"toggleFeatureState",async(e,t)=>{if(!e)return;const n=this.getScriptBlockerByFeature(e);n&&(t?await n.enable():await n.disable())}),script_blockers_manager_publicField(this,"onTabChanged",async(e,t)=>{if("loading"===(t&&t.status)&&(null==e?void 0:e.url))return this.toggleFeatures()}),script_blockers_manager_publicField(this,"toggleFeatures",async()=>{await this.toggleFeatureState(i.m.ADS_BLOCKER,await oe.a.getInstance().isFeatureEnabled(i.m.ADS_BLOCKER)),await this.toggleFeatureState(i.m.TRACKERS_BLOCKER,await oe.a.getInstance().isFeatureEnabled(i.m.TRACKERS_BLOCKER))}),script_blockers_manager_publicField(this,"onExtensionStateChanged",async e=>{e?await this.refresh():(await ae.disable(),await se.disable())}),script_blockers_manager_publicField(this,"initializeFeatureToggleListener",()=>{const e=[i.m.TRACKERS_BLOCKER,i.m.ADS_BLOCKER];oe.a.getInstance().featureStateChangeEvent.addListener(async t=>{e.includes(t.featureKey)&&await this.toggleFeatureState(t.featureKey,t.newValue)})})}},le=n(23);const onPostLogout=async()=>{const e=await Object(d.t)();await b.c.remove([i.h.USER,i.h.LAST_USER_UPDATE_DATE]),e&&await(async()=>{const{premiumFeatures:e}=await oe.a.getInstance().getFeaturesByTier();for(const t of e)await oe.a.getInstance().toggleFeatureState(t,!1)})()},enablePremiumFeatures=async()=>{const{premiumFeatures:e}=await oe.a.getInstance().getFeaturesByTier();for(const t of e)await oe.a.getInstance().toggleFeatureState(t,!0)};var fe=Object.defineProperty,de=Object.defineProperties,he=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,onboardingFlow_defNormalProp=(e,t,n)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,onboardingFlow_spreadValues=(e,t)=>{for(var n in t||(t={}))_e.call(t,n)&&onboardingFlow_defNormalProp(e,n,t[n]);if(pe)for(var n of pe(t))ge.call(t,n)&&onboardingFlow_defNormalProp(e,n,t[n]);return e},onboardingFlow_spreadProps=(e,t)=>de(e,he(t));const onboardingFlow_onOptIn=async e=>{const t=await b.c.getSync([i.i.ONBOARDING_FLOW]);t.onboardingFlow&&(t.onboardingFlow.optInGaEventSent||(await Object(m.a)(i.c.ANALYTICS_EVENT_TYPES.EULA_AGREED,{payload:JSON.stringify({source:e})}),await b.c.setSync({onboardingFlow:onboardingFlow_spreadProps(onboardingFlow_spreadValues({},t.onboardingFlow),{optInGaEventSent:!0})})))},onboardingFlow_onPageVisit=async()=>{var e;const t=await b.c.getSync([i.i.ONBOARDING_FLOW]);if(!(null==(e=t.onboardingFlow)?void 0:e.optInGaEventSent))return;let n=t.onboardingFlow.pagesVisitedCounter;if(-1===n)return;await B.a.isOptIn()&&(n++,n<5?await b.c.setSync({onboardingFlow:onboardingFlow_spreadProps(onboardingFlow_spreadValues({},t.onboardingFlow),{pagesVisitedCounter:n})}):(await b.c.setSync({onboardingFlow:onboardingFlow_spreadProps(onboardingFlow_spreadValues({},t.onboardingFlow),{pagesVisitedCounter:-1})}),Object(m.a)(i.c.ANALYTICS_EVENT_TYPES.FINISHED_ONBOARDING)))};var Ee=n(65),ye=n(15),me=n(311),be=(n(286),n(45)),Oe=n(29),Se=Object.defineProperty,storage_publicField=(e,t,n)=>(((e,t,n)=>{t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class storage_BlacklistStorage{constructor(e,t){this.database=t,storage_publicField(this,"logger"),this.logger=Object(Oe.a)(e,"BlacklistStorage")}async store(e){try{await this.database.transaction("readwrite",[this.database.blacklist],async()=>{await this.database.blacklist.clear(),await this.database.blacklist.bulkAdd(e.map(e=>({domain:e})))})}catch(e){this.logger.debug("Failed to store, using temp storage. Message: "+Object(be.a)(e))}}async isEmpty(){return 0===await this.database.blacklist.count()}async has(e){try{const t=await this.database.blacklist.get(e);return!!(null==t?void 0:t.domain)}catch(e){return this.logger.debug("Failed to store, using temp storage. Message: "+Object(be.a)(e)),!1}}async transaction(e){await this.database.transaction("readwrite",[this.database.blacklist],e)}}var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};var __assign=function(){return(__assign=Object.assign||function __assign(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function __spreadArray(e,t,n){if(n||2===arguments.length)for(var i,s=0,l=t.length;s<l;s++)!i&&s in t||(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var ve="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Te=Object.keys,we=Array.isArray;function extend(e,t){return"object"!=typeof t||Te(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||ve.Promise||(ve.Promise=Promise);var Ie=Object.getPrototypeOf,Ae={}.hasOwnProperty;function hasOwn(e,t){return Ae.call(e,t)}function props(e,t){"function"==typeof t&&(t=t(Ie(e))),("undefined"==typeof Reflect?Te:Reflect.ownKeys)(t).forEach((function(n){setProp(e,n,t[n])}))}var Pe=Object.defineProperty;function setProp(e,t,n,i){Pe(e,t,extend(n&&hasOwn(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function derive(e){return{from:function(t){return e.prototype=Object.create(t.prototype),setProp(e.prototype,"constructor",e),{extend:props.bind(null,e.prototype)}}}}var Ce=Object.getOwnPropertyDescriptor;var Re=[].slice;function slice(e,t,n){return Re.call(e,t,n)}function override(e,t){return t(e)}function assert(e){if(!e)throw new Error("Assertion Failed")}function asap$1(e){ve.setImmediate?setImmediate(e):setTimeout(e,0)}function getByKeyPath(e,t){if("string"==typeof t&&hasOwn(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],i=0,s=t.length;i<s;++i){var l=getByKeyPath(e,t[i]);n.push(l)}return n}var f=t.indexOf(".");if(-1!==f){var d=e[t.substr(0,f)];return null==d?void 0:getByKeyPath(d,t.substr(f+1))}}function setByKeyPath(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){assert("string"!=typeof n&&"length"in n);for(var i=0,s=t.length;i<s;++i)setByKeyPath(e,t[i],n[i])}else{var l=t.indexOf(".");if(-1!==l){var f=t.substr(0,l),d=t.substr(l+1);if(""===d)void 0===n?we(e)&&!isNaN(parseInt(f))?e.splice(f,1):delete e[f]:e[f]=n;else{var h=e[f];h&&hasOwn(e,f)||(h=e[f]={}),setByKeyPath(h,d,n)}}else void 0===n?we(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function shallowClone(e){var t={};for(var n in e)hasOwn(e,n)&&(t[n]=e[n]);return t}var Ne=[].concat;function flatten(e){return Ne.apply([],e)}var Le="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(flatten([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return ve[e]})),De=new Set(Le.map((function(e){return ve[e]})));var ke=null;function deepClone(e){ke=new WeakMap;var t=function innerDeepClone(e){if(!e||"object"!=typeof e)return e;var t=ke.get(e);if(t)return t;if(we(e)){t=[],ke.set(e,t);for(var n=0,i=e.length;n<i;++n)t.push(innerDeepClone(e[n]))}else if(De.has(e.constructor))t=e;else{var s=Ie(e);for(var l in t=s===Object.prototype?{}:Object.create(s),ke.set(e,t),e)hasOwn(e,l)&&(t[l]=innerDeepClone(e[l]))}return t}(e);return ke=null,t}var Be={}.toString;function toStringTag(e){return Be.call(e).slice(8,-1)}var Fe="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",xe="symbol"==typeof Fe?function(e){var t;return null!=e&&(t=e[Fe])&&t.apply(e)}:function(){return null};function delArrayItem(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var Me={};function getArrayOf(e){var t,n,i,s;if(1===arguments.length){if(we(e))return e.slice();if(this===Me&&"string"==typeof e)return[e];if(s=xe(e)){for(n=[];!(i=s.next()).done;)n.push(i.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Ue="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},Ke=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],je=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ke),He={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function DexieError(e,t){this.name=e,this.message=t}function getMultiErrorMessage(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function ModifyError(e,t,n,i){this.failures=t,this.failedKeys=i,this.successCount=n,this.message=getMultiErrorMessage(e,t)}function BulkError(e,t){this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=getMultiErrorMessage(e,this.failures)}derive(DexieError).from(Error).extend({toString:function(){return this.name+": "+this.message}}),derive(ModifyError).from(DexieError),derive(BulkError).from(DexieError);var Ve=je.reduce((function(e,t){return e[t]=t+"Error",e}),{}),Ge=DexieError,We=je.reduce((function(e,t){var n=t+"Error";function DexieError(e,i){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(i?"\n "+i:""),this.inner=i||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=He[t]||n,this.inner=null)}return derive(DexieError).from(Ge),e[t]=DexieError,e}),{});We.Syntax=SyntaxError,We.Type=TypeError,We.Range=RangeError;var Ye=Ke.reduce((function(e,t){return e[t+"Error"]=We[t],e}),{});var qe=je.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=We[t]),e}),{});function nop(){}function mirror(e){return e}function pureFunctionChain(e,t){return null==e||e===mirror?t:function(n){return t(e(n))}}function callBoth(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function hookCreatingChain(e,t){return e===nop?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?callBoth(i,this.onsuccess):i),s&&(this.onerror=this.onerror?callBoth(s,this.onerror):s),void 0!==l?l:n}}function hookDeletingChain(e,t){return e===nop?t:function(){e.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?callBoth(n,this.onsuccess):n),i&&(this.onerror=this.onerror?callBoth(i,this.onerror):i)}}function hookUpdatingChain(e,t){return e===nop?t:function(n){var i=e.apply(this,arguments);extend(n,i);var s=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var f=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?callBoth(s,this.onsuccess):s),l&&(this.onerror=this.onerror?callBoth(l,this.onerror):l),void 0===i?void 0===f?void 0:f:extend(i,f)}}function reverseStoppableEventChain(e,t){return e===nop?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function promisableChain(e,t){return e===nop?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var i=this,s=arguments.length,l=new Array(s);s--;)l[s]=arguments[s];return n.then((function(){return t.apply(i,l)}))}return t.apply(this,arguments)}}qe.ModifyError=ModifyError,qe.DexieError=DexieError,qe.BulkError=BulkError;var Xe="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function setDebug(e,t){Xe=e}var Ze={},ze="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,Ie(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Ie(t),e]}(),Qe=ze[0],Je=ze[1],$e=ze[2],et=Je&&Je.then,tt=Qe&&Qe.constructor,rt=!!$e;var asap=function(e,t){lt.push([e,t]),it&&(!function schedulePhysicalTick(){queueMicrotask(physicalTick)}(),it=!1)},nt=!0,it=!0,at=[],st=[],ot=mirror,ct={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:nop,pgp:!1,env:{},finalize:nop},ut=ct,lt=[],ft=0,dt=[];function DexiePromise(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ut;if("function"!=typeof e){if(e!==Ze)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&handleRejection(this,this._value))}this._state=null,this._value=null,++t.ref,executePromiseTask(this,e)}var ht={get:function(){var e=ut,t=yt;function then(n,i){var s=this,l=!e.global&&(e!==ut||t!==yt),f=l&&!decrementExpectedAwaits(),d=new DexiePromise((function(t,d){propagateToListener(s,new Listener(nativeAwaitCompatibleWrap(n,e,l,f),nativeAwaitCompatibleWrap(i,e,l,f),t,d,e))}));return this._consoleTask&&(d._consoleTask=this._consoleTask),d}return then.prototype=Ze,then},set:function(e){setProp(this,"then",e&&e.prototype===Ze?ht:{get:function(){return e},set:ht.set})}};function Listener(e,t,n,i,s){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i,this.psd=s}function executePromiseTask(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&beginMicroTickScope();t&&"function"==typeof t.then?executePromiseTask(e,(function(e,n){t instanceof DexiePromise?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,propagateAllListeners(e)),n&&endMicroTickScope()}}),handleRejection.bind(null,e))}catch(t){handleRejection(e,t)}}function handleRejection(e,t){if(st.push(t),null===e._state){var n=e._lib&&beginMicroTickScope();t=ot(t),e._state=!1,e._value=t,function addPossiblyUnhandledError(e){at.some((function(t){return t._value===e._value}))||at.push(e)}(e),propagateAllListeners(e),n&&endMicroTickScope()}}function propagateAllListeners(e){var t=e._listeners;e._listeners=[];for(var n=0,i=t.length;n<i;++n)propagateToListener(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),0===ft&&(++ft,asap((function(){0==--ft&&finalizePhysicalTick()}),[]))}function propagateToListener(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ft,asap(callListener,[n,e,t])}else e._listeners.push(t)}function callListener(e,t,n){try{var i,s=t._value;!t._state&&st.length&&(st=[]),i=Xe&&t._consoleTask?t._consoleTask.run((function(){return e(s)})):e(s),t._state||-1!==st.indexOf(s)||function markErrorAsHandled(e){var t=at.length;for(;t;)if(at[--t]._value===e._value)return void at.splice(t,1)}(t),n.resolve(i)}catch(e){n.reject(e)}finally{0==--ft&&finalizePhysicalTick(),--n.psd.ref||n.psd.finalize()}}function physicalTick(){usePSD(ct,(function(){beginMicroTickScope()&&endMicroTickScope()}))}function beginMicroTickScope(){var e=nt;return nt=!1,it=!1,e}function endMicroTickScope(){var e,t,n;do{for(;lt.length>0;)for(e=lt,lt=[],n=e.length,t=0;t<n;++t){var i=e[t];i[0].apply(null,i[1])}}while(lt.length>0);nt=!0,it=!0}function finalizePhysicalTick(){var e=at;at=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=dt.slice(0),n=t.length;n;)t[--n]()}function PromiseReject(e){return new DexiePromise(Ze,!1,e)}function wrap(e,t){var n=ut;return function(){var i=beginMicroTickScope(),s=ut;try{return switchToZone(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{switchToZone(s,!1),i&&endMicroTickScope()}}}props(DexiePromise.prototype,{then:ht,_then:function(e,t){propagateToListener(this,new Listener(null,null,e,t,ut))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):PromiseReject(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):PromiseReject(e)}))},finally:function(e){return this.then((function(t){return DexiePromise.resolve(e()).then((function(){return t}))}),(function(t){return DexiePromise.resolve(e()).then((function(){return PromiseReject(t)}))}))},timeout:function(e,t){var n=this;return e<1/0?new DexiePromise((function(i,s){var l=setTimeout((function(){return s(new We.Timeout(t))}),e);n.then(i,s).finally(clearTimeout.bind(null,l))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&setProp(DexiePromise.prototype,Symbol.toStringTag,"Dexie.Promise"),ct.env=snapShot(),props(DexiePromise,{all:function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t,n){0===e.length&&t([]);var i=e.length;e.forEach((function(s,l){return DexiePromise.resolve(s).then((function(n){e[l]=n,--i||t(e)}),n)}))}))},resolve:function(e){return e instanceof DexiePromise?e:e&&"function"==typeof e.then?new DexiePromise((function(t,n){e.then(t,n)})):new DexiePromise(Ze,!0,e)},reject:PromiseReject,race:function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t,n){e.map((function(e){return DexiePromise.resolve(e).then(t,n)}))}))},PSD:{get:function(){return ut},set:function(e){return ut=e}},totalEchoes:{get:function(){return yt}},newPSD:newScope,usePSD:usePSD,scheduler:{get:function(){return asap},set:function(e){asap=e}},rejectionMapper:{get:function(){return ot},set:function(e){ot=e}},follow:function(e,t){return new DexiePromise((function(n,i){return newScope((function(t,n){var i=ut;i.unhandleds=[],i.onunhandled=n,i.finalize=callBoth((function(){var e=this;!function run_at_end_of_this_or_next_physical_tick(e){dt.push((function finalizer(){e(),dt.splice(dt.indexOf(finalizer),1)})),++ft,asap((function(){0==--ft&&finalizePhysicalTick()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),i.finalize),e()}),t,n,i)}))}}),tt&&(tt.allSettled&&setProp(DexiePromise,"allSettled",(function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t){0===e.length&&t([]);var n=e.length,i=new Array(n);e.forEach((function(e,s){return DexiePromise.resolve(e).then((function(e){return i[s]={status:"fulfilled",value:e}}),(function(e){return i[s]={status:"rejected",reason:e}})).then((function(){return--n||t(i)}))}))}))})),tt.any&&"undefined"!=typeof AggregateError&&setProp(DexiePromise,"any",(function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t,n){0===e.length&&n(new AggregateError([]));var i=e.length,s=new Array(i);e.forEach((function(e,l){return DexiePromise.resolve(e).then((function(e){return t(e)}),(function(e){s[l]=e,--i||n(new AggregateError(s))}))}))}))})));var pt={awaits:0,echoes:0,id:0},_t=0,gt=[],Et=0,yt=0,mt=0;function newScope(e,t,n,i){var s=ut,l=Object.create(s);l.parent=s,l.ref=0,l.global=!1,l.id=++mt,ct.env,l.env=rt?{Promise:DexiePromise,PromiseProp:{value:DexiePromise,configurable:!0,writable:!0},all:DexiePromise.all,race:DexiePromise.race,allSettled:DexiePromise.allSettled,any:DexiePromise.any,resolve:DexiePromise.resolve,reject:DexiePromise.reject}:{},t&&extend(l,t),++s.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()};var f=usePSD(l,e,n,i);return 0===l.ref&&l.finalize(),f}function incrementExpectedAwaits(){return pt.id||(pt.id=++_t),++pt.awaits,pt.echoes+=100,pt.id}function decrementExpectedAwaits(){return!!pt.awaits&&(0==--pt.awaits&&(pt.id=0),pt.echoes=100*pt.awaits,!0)}function onPossibleParallellAsync(e){return pt.echoes&&e&&e.constructor===tt?(incrementExpectedAwaits(),e.then((function(e){return decrementExpectedAwaits(),e}),(function(e){return decrementExpectedAwaits(),bt(e)}))):e}function zoneEnterEcho(e){++yt,pt.echoes&&0!=--pt.echoes||(pt.echoes=pt.awaits=pt.id=0),gt.push(ut),switchToZone(e,!0)}function zoneLeaveEcho(){var e=gt[gt.length-1];gt.pop(),switchToZone(e,!1)}function switchToZone(e,t){var n=ut;if((t?!pt.echoes||Et++&&e===ut:!Et||--Et&&e===ut)||queueMicrotask(t?zoneEnterEcho.bind(null,e):zoneLeaveEcho),e!==ut&&(ut=e,n===ct&&(ct.env=snapShot()),rt)){var i=ct.env.Promise,s=e.env;(n.global||e.global)&&(Object.defineProperty(ve,"Promise",s.PromiseProp),i.all=s.all,i.race=s.race,i.resolve=s.resolve,i.reject=s.reject,s.allSettled&&(i.allSettled=s.allSettled),s.any&&(i.any=s.any))}}function snapShot(){var e=ve.Promise;return rt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(ve,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function usePSD(e,t,n,i,s){var l=ut;try{return switchToZone(e,!0),t(n,i,s)}finally{switchToZone(l,!1)}}function nativeAwaitCompatibleWrap(e,t,n,i){return"function"!=typeof e?e:function(){var s=ut;n&&incrementExpectedAwaits(),switchToZone(t,!0);try{return e.apply(this,arguments)}finally{switchToZone(s,!1),i&&queueMicrotask(decrementExpectedAwaits)}}}function execInGlobalContext(e){Promise===tt&&0===pt.echoes?0===Et?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+et).indexOf("[native code]")&&(incrementExpectedAwaits=decrementExpectedAwaits=nop);var bt=DexiePromise.reject;var Ot=String.fromCharCode(65535),St="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",vt=[];function combine(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Tt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function workaroundForUndefinedPrimKey(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=deepClone(t))[e],t}}function Entity(){throw We.Type()}function cmp(e,t){try{var n=dexie_type(e),i=dexie_type(t);if(n!==i)return"Array"===n?1:"Array"===i?-1:"binary"===n?1:"binary"===i?-1:"string"===n?1:"string"===i?-1:"Date"===n?1:"Date"!==i?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function compareUint8Arrays(e,t){for(var n=e.length,i=t.length,s=n<i?n:i,l=0;l<s;++l)if(e[l]!==t[l])return e[l]<t[l]?-1:1;return n===i?0:n<i?-1:1}(getUint8Array(e),getUint8Array(t));case"Array":return function compareArrays(e,t){for(var n=e.length,i=t.length,s=n<i?n:i,l=0;l<s;++l){var f=cmp(e[l],t[l]);if(0!==f)return f}return n===i?0:n<i?-1:1}(e,t)}}catch(e){}return NaN}function dexie_type(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=toStringTag(e);return"ArrayBuffer"===n?"binary":n}function getUint8Array(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var wt=function(){function Table(){}return Table.prototype._trans=function(e,t,n){var i=this._tx||ut.trans,s=this.name,l=Xe&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function checkTableInTransaction(e,n,i){if(!i.schema[s])throw new We.NotFound("Table "+s+" not part of transaction");return t(i.idbtrans,i)}var f=beginMicroTickScope();try{var d=i&&i.db._novip===this.db._novip?i===ut.trans?i._promise(e,checkTableInTransaction,n):newScope((function(){return i._promise(e,checkTableInTransaction,n)}),{trans:i,transless:ut.transless||ut}):function tempTransaction(e,t,n,i){if(e.idbdb&&(e._state.openComplete||ut.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Ve.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then((function(){return tempTransaction(e,t,n,i)}))):bt(s)}return s._promise(t,(function(e,t){return newScope((function(){return ut.trans=s,i(e,t,s)}))})).then((function(e){if("readwrite"===t)try{s.idbtrans.commit()}catch(e){}return"readonly"===t?e:s._completion.then((function(){return e}))}))}if(e._state.openComplete)return bt(new We.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return bt(new We.DatabaseClosed);e.open().catch(nop)}return e._state.dbReadyPromise.then((function(){return tempTransaction(e,t,n,i)}))}(this.db,e,[this.name],checkTableInTransaction);return l&&(d._consoleTask=l,d=d.catch((function(e){return console.trace(e),bt(e)}))),d}finally{f&&endMicroTickScope()}},Table.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?bt(new We.Type("Invalid argument to Table.get()")):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},Table.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(we(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=Te(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){if(e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1})).sort((function(e,t){return e.keyPath.length-t.keyPath.length}))[0];if(n&&this.db._maxKey!==Ot){var i=n.keyPath.slice(0,t.length);return this.where(i).equals(i.map((function(t){return e[t]})))}!n&&Xe&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var s=this.schema.idxByName,l=this.db._deps.indexedDB;function equals(e,t){return 0===l.cmp(e,t)}var f=t.reduce((function(t,n){var i=t[0],l=t[1],f=s[n],d=e[n];return[i||f,i||!f?combine(l,f&&f.multi?function(e){var t=getByKeyPath(e,n);return we(t)&&t.some((function(e){return equals(d,e)}))}:function(e){return equals(d,getByKeyPath(e,n))}):l]}),[null,null]),d=f[0],h=f[1];return d?this.where(d.name).equals(e[d.keyPath]).filter(h):n?this.filter(h):this.where(t).equals("")},Table.prototype.filter=function(e){return this.toCollection().and(e)},Table.prototype.count=function(e){return this.toCollection().count(e)},Table.prototype.offset=function(e){return this.toCollection().offset(e)},Table.prototype.limit=function(e){return this.toCollection().limit(e)},Table.prototype.each=function(e){return this.toCollection().each(e)},Table.prototype.toArray=function(e){return this.toCollection().toArray(e)},Table.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Table.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,we(e)?"[".concat(e.join("+"),"]"):e))},Table.prototype.reverse=function(){return this.toCollection().reverse()},Table.prototype.mapToClass=function(e){var t=this.db,n=this.name;this.schema.mappedClass=e,e.prototype instanceof Entity&&(e=function(e){function class_1(){return null!==e&&e.apply(this,arguments)||this}return function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}(class_1,e),Object.defineProperty(class_1.prototype,"db",{get:function(){return t},enumerable:!1,configurable:!0}),class_1.prototype.table=function(){return n},class_1}(e));for(var i=new Set,s=e.prototype;s;s=Ie(s))Object.getOwnPropertyNames(s).forEach((function(e){return i.add(e)}));var readHook=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var s in t)if(!i.has(s))try{n[s]=t[s]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=readHook,this.hook("reading",readHook),e},Table.prototype.defineClass=function(){return this.mapToClass((function Class(e){extend(this,e)}))},Table.prototype.add=function(e,t){var n=this,i=this.schema.primKey,s=i.auto,l=i.keyPath,f=e;return l&&s&&(f=workaroundForUndefinedPrimKey(l)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[f]})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):e.lastResult})).then((function(t){if(l)try{setByKeyPath(e,l,t)}catch(e){}return t}))},Table.prototype.update=function(e,t){if("object"!=typeof e||we(e))return this.where(":id").equals(e).modify(t);var n=getByKeyPath(e,this.schema.primKey.keyPath);return void 0===n?bt(new We.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},Table.prototype.put=function(e,t){var n=this,i=this.schema.primKey,s=i.auto,l=i.keyPath,f=e;return l&&s&&(f=workaroundForUndefinedPrimKey(l)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[f],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):e.lastResult})).then((function(t){if(l)try{setByKeyPath(e,l,t)}catch(e){}return t}))},Table.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):void 0}))},Table.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Tt})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):void 0}))},Table.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},Table.prototype.bulkAdd=function(e,t,n){var i=this,s=Array.isArray(t)?t:void 0,l=(n=n||(s?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=i.schema.primKey,f=n.auto,d=n.keyPath;if(d&&s)throw new We.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new We.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,p=d&&f?e.map(workaroundForUndefinedPrimKey(d)):e;return i.core.mutate({trans:t,type:"add",keys:s,values:p,wantResults:l}).then((function(e){var t=e.numFailures,n=e.results,s=e.lastResult,f=e.failures;if(0===t)return l?n:s;throw new BulkError("".concat(i.name,".bulkAdd(): ").concat(t," of ").concat(h," operations failed"),f)}))}))},Table.prototype.bulkPut=function(e,t,n){var i=this,s=Array.isArray(t)?t:void 0,l=(n=n||(s?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=i.schema.primKey,f=n.auto,d=n.keyPath;if(d&&s)throw new We.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new We.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,p=d&&f?e.map(workaroundForUndefinedPrimKey(d)):e;return i.core.mutate({trans:t,type:"put",keys:s,values:p,wantResults:l}).then((function(e){var t=e.numFailures,n=e.results,s=e.lastResult,f=e.failures;if(0===t)return l?n:s;throw new BulkError("".concat(i.name,".bulkPut(): ").concat(t," of ").concat(h," operations failed"),f)}))}))},Table.prototype.bulkUpdate=function(e){var t=this,n=this.core,i=e.map((function(e){return e.key})),s=e.map((function(e){return e.changes})),l=[];return this._trans("readwrite",(function(f){return n.getMany({trans:f,keys:i,cache:"clone"}).then((function(d){var h=[],p=[];e.forEach((function(e,n){var i=e.key,s=e.changes,f=d[n];if(f){for(var _=0,g=Object.keys(s);_<g.length;_++){var E=g[_],y=s[E];if(E===t.schema.primKey.keyPath){if(0!==cmp(y,i))throw new We.Constraint("Cannot update primary key in bulkUpdate()")}else setByKeyPath(f,E,y)}l.push(n),h.push(i),p.push(f)}}));var _=h.length;return n.mutate({trans:f,type:"put",keys:h,values:p,updates:{keys:i,changeSpecs:s}}).then((function(e){var n=e.numFailures,i=e.failures;if(0===n)return _;for(var s=0,f=Object.keys(i);s<f.length;s++){var d=f[s],h=l[Number(d)];if(null!=h){var p=i[d];delete i[d],i[h]=p}}throw new BulkError("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(_," operations failed"),i)}))}))}))},Table.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var i=e.numFailures,s=e.lastResult,l=e.failures;if(0===i)return s;throw new BulkError("".concat(t.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),l)}))},Table}();function Events(e){var t={},rv=function(n,i){if(i){for(var s=arguments.length,l=new Array(s-1);--s;)l[s-1]=arguments[s];return t[n].subscribe.apply(null,l),e}if("string"==typeof n)return t[n]};rv.addEventType=add;for(var n=1,i=arguments.length;n<i;++n)add(arguments[n]);return rv;function add(e,n,i){if("object"==typeof e)return addConfiguredEvents(e);n||(n=reverseStoppableEventChain),i||(i=nop);var s={subscribers:[],fire:i,subscribe:function(e){-1===s.subscribers.indexOf(e)&&(s.subscribers.push(e),s.fire=n(s.fire,e))},unsubscribe:function(e){s.subscribers=s.subscribers.filter((function(t){return t!==e})),s.fire=s.subscribers.reduce(n,i)}};return t[e]=rv[e]=s,s}function addConfiguredEvents(e){Te(e).forEach((function(t){var n=e[t];if(we(n))add(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new We.InvalidArgument("Invalid event config");var i=add(t,mirror,(function fire(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];i.subscribers.forEach((function(e){asap$1((function fireEvent(){e.apply(null,t)}))}))}))}}))}}function makeClassConstructor(e,t){return derive(t).from({prototype:e}),t}function isPlainKeyRange(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function addFilter(e,t){e.filter=combine(e.filter,t)}function addReplayFilter(e,t,n){var i=e.replayFilter;e.replayFilter=i?function(){return combine(i(),t())}:t,e.justLimit=n&&!i}function getIndexOrStore(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new We.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function openCursor(e,t,n){var i=getIndexOrStore(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:i,range:e.range}})}function iter(e,t,n,i){var s=e.replayFilter?combine(e.filter,e.replayFilter()):e.filter;if(e.or){var l={},union=function(e,n,i){if(!s||s(n,i,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var f=n.primaryKey,d=""+f;"[object ArrayBuffer]"===d&&(d=""+new Uint8Array(f)),hasOwn(l,d)||(l[d]=!0,t(e,n,i))}};return Promise.all([e.or._iterate(union,n),iterate(openCursor(e,i,n),e.algorithm,union,!e.keysOnly&&e.valueMapper)])}return iterate(openCursor(e,i,n),combine(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function iterate(e,t,n,i){var s=wrap(i?function(e,t,s){return n(i(e),t,s)}:n);return e.then((function(e){if(e)return e.start((function(){var c=function(){return e.continue()};t&&!t(e,(function(e){return c=e}),(function(t){e.stop(t),c=nop}),(function(t){e.fail(t),c=nop}))||s(e.value,e,(function(e){return c=e})),c()}))}))}Symbol();var It=function(){function PropModification(e){Object.assign(this,e)}return PropModification.prototype.execute=function(e){var t;if(void 0!==this.add){var n=this.add;if(we(n))return __spreadArray(__spreadArray([],we(e)?e:[],!0),n,!0).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch(e){return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(void 0!==this.remove){var i=this.remove;if(we(i))return we(e)?e.filter((function(e){return!i.includes(e)})).sort():[];if("number"==typeof i)return Number(e)-i;if("bigint"==typeof i)try{return BigInt(e)-i}catch(e){return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}var s=null===(t=this.replacePrefix)||void 0===t?void 0:t[0];return s&&"string"==typeof e&&e.startsWith(s)?this.replacePrefix[1]+e.substring(s.length):e},PropModification}(),At=function(){function Collection(){}return Collection.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,bt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Collection.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,bt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Collection.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=combine(t.algorithm,e)},Collection.prototype._iterate=function(e,t){return iter(this._ctx,e,t,this._ctx.table.core)},Collection.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&extend(n,e),t._ctx=n,t},Collection.prototype.raw=function(){return this._ctx.valueMapper=null,this},Collection.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return iter(t,e,n,t.table.core)}))},Collection.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,i=n.table.core;if(isPlainKeyRange(n,!0))return i.count({trans:e,query:{index:getIndexOrStore(n,i.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var s=0;return iter(n,(function(){return++s,!1}),e,i).then((function(){return s}))})).then(e)},Collection.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),i=n[0],s=n.length-1;function getval(e,t){return t?getval(e[n[t]],t-1):e[i]}var l="next"===this._ctx.dir?1:-1;function sorter(e,t){var n=getval(e,s),i=getval(t,s);return n<i?-l:n>i?l:0}return this.toArray((function(e){return e.sort(sorter)})).then(t)},Collection.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&isPlainKeyRange(n,!0)&&n.limit>0){var i=n.valueMapper,s=getIndexOrStore(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:s,range:n.range}}).then((function(e){var t=e.result;return i?t.map(i):t}))}var l=[];return iter(n,(function(e){return l.push(e)}),e,n.table.core).then((function(){return l}))}),e)},Collection.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,isPlainKeyRange(t)?addReplayFilter(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):addReplayFilter(t,(function(){var t=e;return function(){return--t<0}}))),this},Collection.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),addReplayFilter(this._ctx,(function(){var t=e;return function(e,n,i){return--t<=0&&n(i),t>=0}}),!0),this},Collection.prototype.until=function(e,t){return addFilter(this._ctx,(function(n,i,s){return!e(n.value)||(i(s),t)})),this},Collection.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},Collection.prototype.last=function(e){return this.reverse().first(e)},Collection.prototype.filter=function(e){return addFilter(this._ctx,(function(t){return e(t.value)})),function addMatchFilter(e,t){e.isMatch=combine(e.isMatch,t)}(this._ctx,e),this},Collection.prototype.and=function(e){return this.filter(e)},Collection.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Collection.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Collection.prototype.desc=function(){return this.reverse()},Collection.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},Collection.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Collection.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},Collection.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},Collection.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&isPlainKeyRange(t,!0)&&t.limit>0)return this._read((function(e){var n=getIndexOrStore(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},Collection.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Collection.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},Collection.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Collection.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return addFilter(this._ctx,(function(e){var t=e.primaryKey.toString(),i=hasOwn(n,t);return n[t]=!0,!i})),this},Collection.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(i){var s;if("function"==typeof e)s=e;else{var l=Te(e),f=l.length;s=function(t){for(var n=!1,i=0;i<f;++i){var s=l[i],d=e[s],h=getByKeyPath(t,s);d instanceof It?(setByKeyPath(t,s,d.execute(h)),n=!0):h!==d&&(setByKeyPath(t,s,d),n=!0)}return n}}var d=n.table.core,h=d.schema.primaryKey,p=h.outbound,_=h.extractKey,g=t.db._options.modifyChunkSize||200,E=[],y=0,m=[],applyMutateResult=function(e,t){var n=t.failures,i=t.numFailures;y+=e-i;for(var s=0,l=Te(n);s<l.length;s++){var f=l[s];E.push(n[f])}};return t.clone().primaryKeys().then((function(t){var nextChunk=function(l){var f=Math.min(g,t.length-l);return d.getMany({trans:i,keys:t.slice(l,l+f),cache:"immutable"}).then((function(h){for(var E=[],y=[],m=p?[]:null,b=[],O=0;O<f;++O){var S=h[O],v={value:deepClone(S),primKey:t[l+O]};!1!==s.call(v,v.value,v)&&(null==v.value?b.push(t[l+O]):p||0===cmp(_(S),_(v.value))?(y.push(v.value),p&&m.push(t[l+O])):(b.push(t[l+O]),E.push(v.value)))}var T=isPlainKeyRange(n)&&n.limit===1/0&&("function"!=typeof e||e===deleteCallback)&&{index:n.index,range:n.range};return Promise.resolve(E.length>0&&d.mutate({trans:i,type:"add",values:E}).then((function(e){for(var t in e.failures)b.splice(parseInt(t),1);applyMutateResult(E.length,e)}))).then((function(){return(y.length>0||T&&"object"==typeof e)&&d.mutate({trans:i,type:"put",keys:m,values:y,criteria:T,changeSpec:"function"!=typeof e&&e}).then((function(e){return applyMutateResult(y.length,e)}))})).then((function(){return(b.length>0||T&&e===deleteCallback)&&d.mutate({trans:i,type:"delete",keys:b,criteria:T}).then((function(e){return applyMutateResult(b.length,e)}))})).then((function(){return t.length>l+f&&nextChunk(l+g)}))}))};return nextChunk(0).then((function(){if(E.length>0)throw new ModifyError("Error modifying one or more objects",E,y,m);return t.length}))}))}))},Collection.prototype.delete=function(){var e=this._ctx,t=e.range;return isPlainKeyRange(e)&&(e.isPrimKey||3===t.type)?this._write((function(n){var i=e.table.core.schema.primaryKey,s=t;return e.table.core.count({trans:n,query:{index:i,range:s}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:s}).then((function(e){var n=e.failures;e.lastResult,e.results;var i=e.numFailures;if(i)throw new ModifyError("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-i);return t-i}))}))})):this.modify(deleteCallback)},Collection}(),deleteCallback=function(e,t){return t.value=null};function simpleCompare(e,t){return e<t?-1:e===t?0:1}function simpleCompareReverse(e,t){return e>t?-1:e===t?0:1}function fail(e,t,n){var i=e instanceof Pt?new e.Collection(e):e;return i._ctx.error=n?new n(t):new TypeError(t),i}function emptyCollection(e){return new e.Collection(e,(function(){return rangeEqual("")})).limit(0)}function nextCasing(e,t,n,i,s,l){for(var f=Math.min(e.length,i.length),d=-1,h=0;h<f;++h){var p=t[h];if(p!==i[h])return s(e[h],n[h])<0?e.substr(0,h)+n[h]+n.substr(h+1):s(e[h],i[h])<0?e.substr(0,h)+i[h]+n.substr(h+1):d>=0?e.substr(0,d)+t[d]+n.substr(d+1):null;s(e[h],p)<0&&(d=h)}return f<i.length&&"next"===l?e+n.substr(e.length):f<e.length&&"prev"===l?e.substr(0,n.length):d<0?null:e.substr(0,d)+i[d]+n.substr(d+1)}function addIgnoreCaseAlgorithm(e,t,n,i){var s,l,f,d,h,p,_,g=n.length;if(!n.every((function(e){return"string"==typeof e})))return fail(e,"String expected.");function initDirection(e){s=function upperFactory(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),l=function lowerFactory(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),f="next"===e?simpleCompare:simpleCompareReverse;var t=n.map((function(e){return{lower:l(e),upper:s(e)}})).sort((function(e,t){return f(e.lower,t.lower)}));d=t.map((function(e){return e.upper})),h=t.map((function(e){return e.lower})),p=e,_="next"===e?"":i}initDirection("next");var E=new e.Collection(e,(function(){return createRange(d[0],h[g-1]+i)}));E._ondirectionchange=function(e){initDirection(e)};var y=0;return E._addAlgorithm((function(e,n,i){var s=e.key;if("string"!=typeof s)return!1;var E=l(s);if(t(E,h,y))return!0;for(var m=null,b=y;b<g;++b){var O=nextCasing(s,E,d[b],h[b],f,p);null===O&&null===m?y=b+1:(null===m||f(m,O)>0)&&(m=O)}return n(null!==m?function(){e.continue(m+_)}:i),!1})),E}function createRange(e,t,n,i){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:i}}function rangeEqual(e){return{type:1,lower:e,upper:e}}var Pt=function(){function WhereClause(){}return Object.defineProperty(WhereClause.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),WhereClause.prototype.between=function(e,t,n,i){n=!1!==n,i=!0===i;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||i)&&(!n||!i)?emptyCollection(this):new this.Collection(this,(function(){return createRange(e,t,!n,!i)}))}catch(e){return fail(this,St)}},WhereClause.prototype.equals=function(e){return null==e?fail(this,St):new this.Collection(this,(function(){return rangeEqual(e)}))},WhereClause.prototype.above=function(e){return null==e?fail(this,St):new this.Collection(this,(function(){return createRange(e,void 0,!0)}))},WhereClause.prototype.aboveOrEqual=function(e){return null==e?fail(this,St):new this.Collection(this,(function(){return createRange(e,void 0,!1)}))},WhereClause.prototype.below=function(e){return null==e?fail(this,St):new this.Collection(this,(function(){return createRange(void 0,e,!1,!0)}))},WhereClause.prototype.belowOrEqual=function(e){return null==e?fail(this,St):new this.Collection(this,(function(){return createRange(void 0,e)}))},WhereClause.prototype.startsWith=function(e){return"string"!=typeof e?fail(this,"String expected."):this.between(e,e+Ot,!0,!0)},WhereClause.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):addIgnoreCaseAlgorithm(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Ot)},WhereClause.prototype.equalsIgnoreCase=function(e){return addIgnoreCaseAlgorithm(this,(function(e,t){return e===t[0]}),[e],"")},WhereClause.prototype.anyOfIgnoreCase=function(){var e=getArrayOf.apply(Me,arguments);return 0===e.length?emptyCollection(this):addIgnoreCaseAlgorithm(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},WhereClause.prototype.startsWithAnyOfIgnoreCase=function(){var e=getArrayOf.apply(Me,arguments);return 0===e.length?emptyCollection(this):addIgnoreCaseAlgorithm(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Ot)},WhereClause.prototype.anyOf=function(){var e=this,t=getArrayOf.apply(Me,arguments),n=this._cmp;try{t.sort(n)}catch(e){return fail(this,St)}if(0===t.length)return emptyCollection(this);var i=new this.Collection(this,(function(){return createRange(t[0],t[t.length-1])}));i._ondirectionchange=function(i){n="next"===i?e._ascending:e._descending,t.sort(n)};var s=0;return i._addAlgorithm((function(e,i,l){for(var f=e.key;n(f,t[s])>0;)if(++s===t.length)return i(l),!1;return 0===n(f,t[s])||(i((function(){e.continue(t[s])})),!1)})),i},WhereClause.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},WhereClause.prototype.noneOf=function(){var e=getArrayOf.apply(Me,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return fail(this,St)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},WhereClause.prototype.inAnyRange=function(e,t){var n=this,i=this._cmp,s=this._ascending,l=this._descending,f=this._min,d=this._max;if(0===e.length)return emptyCollection(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&s(e[0],e[1])<=0})))return fail(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",We.InvalidArgument);var h=!t||!1!==t.includeLowers,p=t&&!0===t.includeUppers;var _,g=s;function rangeSorter(e,t){return g(e[0],t[0])}try{(_=e.reduce((function addRange(e,t){for(var n=0,s=e.length;n<s;++n){var l=e[n];if(i(t[0],l[1])<0&&i(t[1],l[0])>0){l[0]=f(l[0],t[0]),l[1]=d(l[1],t[1]);break}}return n===s&&e.push(t),e}),[])).sort(rangeSorter)}catch(e){return fail(this,St)}var E=0,y=p?function(e){return s(e,_[E][1])>0}:function(e){return s(e,_[E][1])>=0},m=h?function(e){return l(e,_[E][0])>0}:function(e){return l(e,_[E][0])>=0};var b=y,O=new this.Collection(this,(function(){return createRange(_[0][0],_[_.length-1][1],!h,!p)}));return O._ondirectionchange=function(e){"next"===e?(b=y,g=s):(b=m,g=l),_.sort(rangeSorter)},O._addAlgorithm((function(e,t,i){for(var l=e.key;b(l);)if(++E===_.length)return t(i),!1;return!!function keyWithinCurrentRange(e){return!y(e)&&!m(e)}(l)||(0===n._cmp(l,_[E][1])||0===n._cmp(l,_[E][0])||t((function(){g===s?e.continue(_[E][0]):e.continue(_[E][1])})),!1)})),O},WhereClause.prototype.startsWithAnyOf=function(){var e=getArrayOf.apply(Me,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?emptyCollection(this):this.inAnyRange(e.map((function(e){return[e,e+Ot]}))):fail(this,"startsWithAnyOf() only works with strings")},WhereClause}();function eventRejectHandler(e){return wrap((function(t){return preventDefault(t),e(t.target.error),!1}))}function preventDefault(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ct=Events(null,"storagemutated"),Rt=function(){function Transaction(){}return Transaction.prototype._lock=function(){return assert(!ut.global),++this._reculock,1!==this._reculock||ut.global||(ut.lockOwnerFor=this),this},Transaction.prototype._unlock=function(){if(assert(!ut.global),0==--this._reculock)for(ut.global||(ut.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{usePSD(e[1],e[0])}catch(e){}}return this},Transaction.prototype._locked=function(){return this._reculock&&ut.lockOwnerFor!==this},Transaction.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,i=this.db._state.dbOpenError;if(assert(!this.idbtrans),!e&&!n)switch(i&&i.name){case"DatabaseClosedError":throw new We.DatabaseClosed(i);case"MissingAPIError":throw new We.MissingAPI(i.message,i);default:throw new We.OpenFailed(i)}if(!this.active)throw new We.TransactionInactive;return assert(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=wrap((function(n){preventDefault(n),t._reject(e.error)})),e.onabort=wrap((function(n){preventDefault(n),t.active&&t._reject(new We.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=wrap((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ct.storagemutated.fire(e.mutatedParts)})),this},Transaction.prototype._promise=function(e,t,n){var i=this;if("readwrite"===e&&"readwrite"!==this.mode)return bt(new We.ReadOnly("Transaction is readonly"));if(!this.active)return bt(new We.TransactionInactive);if(this._locked())return new DexiePromise((function(s,l){i._blockedFuncs.push([function(){i._promise(e,t,n).then(s,l)},ut])}));if(n)return newScope((function(){var e=new DexiePromise((function(e,n){i._lock();var s=t(e,n,i);s&&s.then&&s.then(e,n)}));return e.finally((function(){return i._unlock()})),e._lib=!0,e}));var s=new DexiePromise((function(e,n){var s=t(e,n,i);s&&s.then&&s.then(e,n)}));return s._lib=!0,s},Transaction.prototype._root=function(){return this.parent?this.parent._root():this},Transaction.prototype.waitFor=function(e){var t=this._root(),n=DexiePromise.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);!function spin(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=spin)}()}var s=t._waitingFor;return new DexiePromise((function(e,i){n.then((function(n){return t._waitingQueue.push(wrap(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(wrap(i.bind(null,e)))})).finally((function(){t._waitingFor===s&&(t._waitingFor=null)}))}))},Transaction.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new We.Abort))},Transaction.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(hasOwn(t,e))return t[e];var n=this.schema[e];if(!n)throw new We.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,n,this);return i.core=this.db.core.table(e),t[e]=i,i},Transaction}();function createIndexSpec(e,t,n,i,s,l,f){return{name:e,keyPath:t,unique:n,multi:i,auto:s,compound:l,src:(n&&!f?"&":"")+(i?"*":"")+(s?"++":"")+nameFromKeyPath(t)}}function nameFromKeyPath(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function createTableSchema(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(i=n,s=function(e){return[e.name,e]},i.reduce((function(e,t,n){var i=s(t,n);return i&&(e[i[0]]=i[1]),e}),{}))};var i,s}var getMaxKey=function(e){try{return e.only([[]]),getMaxKey=function(){return[[]]},[[]]}catch(e){return getMaxKey=function(){return Ot},Ot}};function getKeyExtractor(e){return null==e?function(){}:"string"==typeof e?function getSinglePathKeyExtractor(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return getByKeyPath(t,e)}}(e):function(t){return getByKeyPath(t,e)}}function arrayify(e){return[].slice.call(e)}var Nt=0;function getKeyPathAlias(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function createDBCore(e,t,n){function makeIDBKeyRange(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,i=e.upper,s=e.lowerOpen,l=e.upperOpen;return void 0===n?void 0===i?null:t.upperBound(i,!!l):void 0===i?t.lowerBound(n,!!s):t.bound(n,i,!!s,!!l)}var i=function extractSchema(e,t){var n=arrayify(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,i=we(t),s=null==t,l={},f={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:s,compound:i,keyPath:t,autoIncrement:n,unique:!0,extractKey:getKeyExtractor(t)},indexes:arrayify(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,i=e.multiEntry,s=e.keyPath,f={name:t,compound:we(s),keyPath:s,unique:n,multiEntry:i,extractKey:getKeyExtractor(s)};return l[getKeyPathAlias(s)]=f,f})),getIndexByKeyPath:function(e){return l[getKeyPathAlias(e)]}};return l[":id"]=f.primaryKey,null!=t&&(l[getKeyPathAlias(t)]=f.primaryKey),f}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),s=i.schema,l=i.hasGetAll,f=s.tables.map((function(e){return function createDbCoreTable(e){var t=e.name;return{name:t,schema:e,mutate:function mutate(e){var n=e.trans,i=e.type,s=e.keys,l=e.values,f=e.range;return new Promise((function(e,d){e=wrap(e);var h=n.objectStore(t),p=null==h.keyPath,_="put"===i||"add"===i;if(!_&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var g,E=(s||l||{length:1}).length;if(s&&l&&s.length!==l.length)throw new Error("Given keys array must have same length as given values array.");if(0===E)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var y=[],m=[],b=0,errorHandler=function(e){++b,preventDefault(e)};if("deleteRange"===i){if(4===f.type)return e({numFailures:b,failures:m,results:[],lastResult:void 0});3===f.type?y.push(g=h.clear()):y.push(g=h.delete(makeIDBKeyRange(f)))}else{var O=_?p?[l,s]:[l,null]:[s,null],S=O[0],v=O[1];if(_)for(var T=0;T<E;++T)y.push(g=v&&void 0!==v[T]?h[i](S[T],v[T]):h[i](S[T])),g.onerror=errorHandler;else for(T=0;T<E;++T)y.push(g=h[i](S[T])),g.onerror=errorHandler}var done=function(t){var n=t.target.result;y.forEach((function(e,t){return null!=e.error&&(m[t]=e.error)})),e({numFailures:b,failures:m,results:"delete"===i?s:y.map((function(e){return e.result})),lastResult:n})};g.onerror=function(e){errorHandler(e),done(e)},g.onsuccess=done}))},getMany:function(e){var n=e.trans,i=e.keys;return new Promise((function(e,s){e=wrap(e);for(var l,f=n.objectStore(t),d=i.length,h=new Array(d),p=0,_=0,successHandler=function(t){var n=t.target;h[n._pos]=n.result,++_===p&&e(h)},g=eventRejectHandler(s),E=0;E<d;++E){null!=i[E]&&((l=f.get(i[E]))._pos=E,l.onsuccess=successHandler,l.onerror=g,++p)}0===p&&e(h)}))},get:function(e){var n=e.trans,i=e.key;return new Promise((function(e,s){e=wrap(e);var l=n.objectStore(t).get(i);l.onsuccess=function(t){return e(t.target.result)},l.onerror=eventRejectHandler(s)}))},query:function query(e){return function(n){return new Promise((function(i,s){i=wrap(i);var l=n.trans,f=n.values,d=n.limit,h=n.query,p=d===1/0?void 0:d,_=h.index,g=h.range,E=l.objectStore(t),y=_.isPrimaryKey?E:E.index(_.name),m=makeIDBKeyRange(g);if(0===d)return i({result:[]});if(e){var b=f?y.getAll(m,p):y.getAllKeys(m,p);b.onsuccess=function(e){return i({result:e.target.result})},b.onerror=eventRejectHandler(s)}else{var O=0,S=f||!("openKeyCursor"in y)?y.openCursor(m):y.openKeyCursor(m),v=[];S.onsuccess=function(e){var t=S.result;return t?(v.push(f?t.value:t.primaryKey),++O===d?i({result:v}):void t.continue()):i({result:v})},S.onerror=eventRejectHandler(s)}}))}}(l),openCursor:function openCursor(e){var n=e.trans,i=e.values,s=e.query,l=e.reverse,f=e.unique;return new Promise((function(e,d){e=wrap(e);var h=s.index,p=s.range,_=n.objectStore(t),g=h.isPrimaryKey?_:_.index(h.name),E=l?f?"prevunique":"prev":f?"nextunique":"next",y=i||!("openKeyCursor"in g)?g.openCursor(makeIDBKeyRange(p),E):g.openKeyCursor(makeIDBKeyRange(p),E);y.onerror=eventRejectHandler(d),y.onsuccess=wrap((function(t){var i=y.result;if(i){i.___id=++Nt,i.done=!1;var s=i.continue.bind(i),l=i.continuePrimaryKey;l&&(l=l.bind(i));var f=i.advance.bind(i),doThrowCursorIsStopped=function(){throw new Error("Cursor not stopped")};i.trans=n,i.stop=i.continue=i.continuePrimaryKey=i.advance=function(){throw new Error("Cursor not started")},i.fail=wrap(d),i.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},i.start=function(e){var t=new Promise((function(e,t){e=wrap(e),y.onerror=eventRejectHandler(t),i.fail=t,i.stop=function(t){i.stop=i.continue=i.continuePrimaryKey=i.advance=doThrowCursorIsStopped,e(t)}})),guardedCallback=function(){if(y.result)try{e()}catch(e){i.fail(e)}else i.done=!0,i.start=function(){throw new Error("Cursor behind last entry")},i.stop()};return y.onsuccess=wrap((function(e){y.onsuccess=guardedCallback,guardedCallback()})),i.continue=s,i.continuePrimaryKey=l,i.advance=f,guardedCallback(),t},e(i)}else e(null)}),d)}))},count:function(e){var n=e.query,i=e.trans,s=n.index,l=n.range;return new Promise((function(e,n){var f=i.objectStore(t),d=s.isPrimaryKey?f:f.index(s.name),h=makeIDBKeyRange(l),p=h?d.count(h):d.count();p.onsuccess=wrap((function(t){return e(t.target.result)})),p.onerror=eventRejectHandler(n)}))}}}(e)})),d={};return f.forEach((function(e){return d[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:getMaxKey(t),schema:s}}function createMiddlewareStacks(e,t,n,i){var s=n.IDBKeyRange;return n.indexedDB,{dbcore:function createMiddlewareStack(e,t){return t.reduce((function(e,t){var n=t.create;return __assign(__assign({},e),n(e))}),e)}(createDBCore(t,s,i),e.dbcore)}}function generateMiddlewareStacks(e,t){var n=t.db,i=createMiddlewareStacks(e._middlewares,n,e._deps,t);e.core=i.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function setApiOnPlace(e,t,n,i){n.forEach((function(n){var s=i[n];t.forEach((function(t){var i=function getPropertyDescriptor(e,t){var n;return Ce(e,t)||(n=Ie(e))&&getPropertyDescriptor(n,t)}(t,n);(!i||"value"in i&&void 0===i.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?setProp(t,n,{get:function(){return this.table(n)},set:function(e){Pe(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,s))}))}))}function removeTablesApi(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function lowerVersionFirst(e,t){return e._cfg.version-t._cfg.version}function runUpgraders(e,t,n,i){var s=e._dbSchema;n.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=createTableSchema("$meta",parseIndexSyntax("")[0],[]),e._storeNames.push("$meta"));var l=e._createTransaction("readwrite",e._storeNames,s);l.create(n),l._completion.catch(i);var f=l._reject.bind(l),d=ut.transless||ut;newScope((function(){if(ut.trans=l,ut.transless=d,0!==t)return generateMiddlewareStacks(e,n),function getExistingVersion(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then((function(e){return null!=e?e:n})):DexiePromise.resolve(n)}(0,l,t).then((function(t){return function updateTablesAndIndexes(e,t,n,i){var s=[],l=e._versions,f=e._dbSchema=buildGlobalSchema(e,e.idbdb,i),d=l.filter((function(e){return e._cfg.version>=t}));if(0===d.length)return DexiePromise.resolve();function runQueue(){return s.length?DexiePromise.resolve(s.shift()(n.idbtrans)).then(runQueue):DexiePromise.resolve()}return d.forEach((function(l){s.push((function(){var s=f,d=l._cfg.dbschema;adjustToExistingIndexNames(e,s,i),adjustToExistingIndexNames(e,d,i),f=e._dbSchema=d;var h=getSchemaDiff(s,d);h.add.forEach((function(e){createTable(i,e[0],e[1].primKey,e[1].indexes)})),h.change.forEach((function(e){if(e.recreate)throw new We.Upgrade("Not yet support for changing primary key");var t=i.objectStore(e.name);e.add.forEach((function(e){return addIndex(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),addIndex(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var p=l._cfg.contentUpgrade;if(p&&l._cfg.version>t){generateMiddlewareStacks(e,i),n._memoizedTables={};var _=shallowClone(d);h.del.forEach((function(e){_[e]=s[e]})),removeTablesApi(e,[e.Transaction.prototype]),setApiOnPlace(e,[e.Transaction.prototype],Te(_),_),n.schema=_;var g,E=Ue(p);E&&incrementExpectedAwaits();var y=DexiePromise.follow((function(){if((g=p(n))&&E){var e=decrementExpectedAwaits.bind(null,null);g.then(e,e)}}));return g&&"function"==typeof g.then?DexiePromise.resolve(g):y.then((function(){return g}))}})),s.push((function(t){!function deleteRemovedTables(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(n){return null==e[n]&&t.db.deleteObjectStore(n)}))}(l._cfg.dbschema,t),removeTablesApi(e,[e.Transaction.prototype]),setApiOnPlace(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema})),s.push((function(t){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===l._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter((function(e){return"$meta"!==e}))):t.objectStore("$meta").put(l._cfg.version,"version"))}))})),runQueue().then((function(){createMissingTables(f,i)}))}(e,t,l,n)})).catch(f);Te(s).forEach((function(e){createTable(n,e,s[e].primKey,s[e].indexes)})),generateMiddlewareStacks(e,n),DexiePromise.follow((function(){return e.on.populate.fire(l)})).catch(f)}))}function getSchemaDiff(e,t){var n,i={del:[],add:[],change:[]};for(n in e)t[n]||i.del.push(n);for(n in t){var s=e[n],l=t[n];if(s){var f={name:n,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||s.primKey.auto!==l.primKey.auto)f.recreate=!0,i.change.push(f);else{var d=s.idxByName,h=l.idxByName,p=void 0;for(p in d)h[p]||f.del.push(p);for(p in h){var _=d[p],g=h[p];_?_.src!==g.src&&f.change.push(g):f.add.push(g)}(f.del.length>0||f.add.length>0||f.change.length>0)&&i.change.push(f)}}else i.add.push([n,l])}return i}function createTable(e,t,n,i){var s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach((function(e){return addIndex(s,e)})),s}function createMissingTables(e,t){Te(e).forEach((function(n){t.db.objectStoreNames.contains(n)||(Xe&&console.debug("Dexie: Creating missing table",n),createTable(t,n,e[n].primKey,e[n].indexes))}))}function addIndex(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function buildGlobalSchema(e,t,n){var i={};return slice(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),s=t.keyPath,l=createIndexSpec(nameFromKeyPath(s),s||"",!0,!1,!!t.autoIncrement,s&&"string"!=typeof s,!0),f=[],d=0;d<t.indexNames.length;++d){var h=t.index(t.indexNames[d]);s=h.keyPath;var p=createIndexSpec(h.name,s,!!h.unique,!!h.multiEntry,!1,s&&"string"!=typeof s,!1);f.push(p)}i[e]=createTableSchema(e,l,f)})),i}function adjustToExistingIndexNames(e,t,n){for(var i=n.db.objectStoreNames,s=0;s<i.length;++s){var l=i[s],f=n.objectStore(l);e._hasGetAll="getAll"in f;for(var d=0;d<f.indexNames.length;++d){var h=f.indexNames[d],p=f.index(h).keyPath,_="string"==typeof p?p:"["+slice(p).join("+")+"]";if(t[l]){var g=t[l].idxByName[_];g&&(g.name=h,delete t[l].idxByName[_],t[l].idxByName[h]=g)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ve.WorkerGlobalScope&&ve instanceof ve.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function parseIndexSyntax(e){return e.split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return createIndexSpec(n,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),we(i),0===t)}))}var Lt,Dt=function(){function Version(){}return Version.prototype._parseStoresSpec=function(e,t){Te(e).forEach((function(n){if(null!==e[n]){var i=parseIndexSyntax(e[n]),s=i.shift();if(s.unique=!0,s.multi)throw new We.Schema("Primary key cannot be multi-valued");i.forEach((function(e){if(e.auto)throw new We.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new We.Schema("Index must have a name and cannot be an empty string")})),t[n]=createTableSchema(n,s,i)}}))},Version.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?extend(this._cfg.storesSource,e):e;var n=t._versions,i={},s={};return n.forEach((function(e){extend(i,e._cfg.storesSource),s=e._cfg.dbschema={},e._parseStoresSpec(i,s)})),t._dbSchema=s,removeTablesApi(t,[t._allTables,t,t.Transaction.prototype]),setApiOnPlace(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Te(s),s),t._storeNames=Te(s),this},Version.prototype.upgrade=function(e){return this._cfg.contentUpgrade=promisableChain(this._cfg.contentUpgrade||nop,e),this},Version}();function getDbNamesTable(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Vt("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function hasDatabasesNative(e){return e&&"function"==typeof e.databases}function _onDatabaseDeleted(e,t){var n=e.indexedDB,i=e.IDBKeyRange;!hasDatabasesNative(n)&&"__dbnames"!==t&&getDbNamesTable(n,i).delete(t).catch(nop)}function vip(e){return newScope((function(){return ut.letThrough=!0,e()}))}function idbReady(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var tryIdb=function(){return indexedDB.databases().finally(t)};e=setInterval(tryIdb,100),tryIdb()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function isEmptyRange(e){return!("from"in e)}var RangeSet=function(e,t){if(!this){var n=new RangeSet;return e&&"d"in e&&extend(n,e),n}extend(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function addRange(e,t,n){var i=cmp(t,n);if(!isNaN(i)){if(i>0)throw RangeError();if(isEmptyRange(e))return extend(e,{from:t,to:n,d:1});var s=e.l,l=e.r;if(cmp(n,e.from)<0)return s?addRange(s,t,n):e.l={from:t,to:n,d:1,l:null,r:null},rebalance(e);if(cmp(t,e.to)>0)return l?addRange(l,t,n):e.r={from:t,to:n,d:1,l:null,r:null},rebalance(e);cmp(t,e.from)<0&&(e.from=t,e.l=null,e.d=l?l.d+1:1),cmp(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var f=!e.r;s&&!e.l&&mergeRanges(e,s),l&&f&&mergeRanges(e,l)}}function mergeRanges(e,t){isEmptyRange(t)||function _addRangeSet(e,t){var n=t.from,i=t.to,s=t.l,l=t.r;addRange(e,n,i),s&&_addRangeSet(e,s),l&&_addRangeSet(e,l)}(e,t)}function rangesOverlap(e,t){var n=getRangeSetIterator(t),i=n.next();if(i.done)return!1;for(var s=i.value,l=getRangeSetIterator(e),f=l.next(s.from),d=f.value;!i.done&&!f.done;){if(cmp(d.from,s.to)<=0&&cmp(d.to,s.from)>=0)return!0;cmp(s.from,d.from)<0?s=(i=n.next(d.from)).value:d=(f=l.next(s.from)).value}return!1}function getRangeSetIterator(e){var t=isEmptyRange(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&cmp(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||cmp(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function rebalance(e){var t,n,i=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),s=i>1?"r":i<-1?"l":"";if(s){var l="r"===s?"l":"r",f=__assign({},e),d=e[s];e.from=d.from,e.to=d.to,e[s]=d[s],f[s]=d[l],e[l]=f,f.d=computeDepth(f)}e.d=computeDepth(e)}function computeDepth(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function extendObservabilitySet(e,t){return Te(t).forEach((function(n){e[n]?mergeRanges(e[n],t[n]):e[n]=function cloneSimpleObjectTree(e){var t={};for(var n in e)if(hasOwn(e,n)){var i=e[n];t[n]=!i||"object"!=typeof i||De.has(i.constructor)?i:cloneSimpleObjectTree(i)}return t}(t[n])})),e}function obsSetsOverlap(e,t){return e.all||t.all||Object.keys(e).some((function(n){return t[n]&&rangesOverlap(t[n],e[n])}))}props(RangeSet.prototype,((Lt={add:function(e){return mergeRanges(this,e),this},addKey:function(e){return addRange(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return addRange(t,e,e)})),this}})[Fe]=function(){return getRangeSetIterator(this)},Lt));var kt={},Bt={},Ft=!1;function signalSubscribersLazily(e,t){extendObservabilitySet(Bt,e),Ft||(Ft=!0,setTimeout((function(){Ft=!1;var e=Bt;Bt={},signalSubscribersNow(e,!1)}),0))}function signalSubscribersNow(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var i=0,s=Object.values(kt);i<s.length;i++){collectTableSubscribers(d=s[i],e,n,t)}else for(var l in e){var f=/^idb\:\/\/(.*)\/(.*)\//.exec(l);if(f){var d,h=f[1],p=f[2];(d=kt["idb://".concat(h,"/").concat(p)])&&collectTableSubscribers(d,e,n,t)}}n.forEach((function(e){return e()}))}function collectTableSubscribers(e,t,n,i){for(var s=[],l=0,f=Object.entries(e.queries.query);l<f.length;l++){for(var d=f[l],h=d[0],p=[],_=0,g=d[1];_<g.length;_++){var E=g[_];obsSetsOverlap(t,E.obsSet)?E.subscribers.forEach((function(e){return n.add(e)})):i&&p.push(E)}i&&s.push([h,p])}if(i)for(var y=0,m=s;y<m.length;y++){var b=m[y];h=b[0],p=b[1];e.queries.query[h]=p}}function dexieOpen(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?bt(t.dbOpenError):e}));t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var i=t.openCanceller,s=Math.round(10*e.verno),l=!1;function throwIfCancelled(){if(t.openCanceller!==i)throw new We.DatabaseClosed("db.open() was cancelled")}var f=t.dbReadyResolve,d=null,h=!1,tryOpenDB=function(){return new DexiePromise((function(i,f){if(throwIfCancelled(),!n)throw new We.MissingAPI;var p=e.name,_=t.autoSchema||!s?n.open(p):n.open(p,s);if(!_)throw new We.MissingAPI;_.onerror=eventRejectHandler(f),_.onblocked=wrap(e._fireOnBlocked),_.onupgradeneeded=wrap((function(i){if(d=_.transaction,t.autoSchema&&!e._options.allowEmptyDB){_.onerror=preventDefault,d.abort(),_.result.close();var s=n.deleteDatabase(p);s.onsuccess=s.onerror=wrap((function(){f(new We.NoSuchDatabase("Database ".concat(p," doesnt exist")))}))}else{d.onerror=eventRejectHandler(f);var g=i.oldVersion>Math.pow(2,62)?0:i.oldVersion;h=g<1,e.idbdb=_.result,l&&function patchCurrentVersion(e,t){createMissingTables(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=buildGlobalSchema(e,e.idbdb,t);adjustToExistingIndexNames(e,e._dbSchema,t);for(var _loop_1=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=t.objectStore(e.name);e.add.forEach((function(t){Xe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),addIndex(n,t)}))},i=0,s=getSchemaDiff(n,e._dbSchema).change;i<s.length;i++){var l=_loop_1(s[i]);if("object"==typeof l)return l.value}}(e,d),runUpgraders(e,g/10,d,f)}}),f),_.onsuccess=wrap((function(){d=null;var n=e.idbdb=_.result,f=slice(n.objectStoreNames);if(f.length>0)try{var g=n.transaction(function safariMultiStoreFix(e){return 1===e.length?e[0]:e}(f),"readonly");if(t.autoSchema)!function readGlobalSchema(e,t,n){e.verno=t.version/10;var i=e._dbSchema=buildGlobalSchema(0,t,n);e._storeNames=slice(t.objectStoreNames,0),setApiOnPlace(e,[e._allTables],Te(i),i)}(e,n,g);else if(adjustToExistingIndexNames(e,e._dbSchema,g),!function verifyInstalledSchema(e,t){var n=getSchemaDiff(buildGlobalSchema(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,g)&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),n.close(),s=n.version+1,l=!0,i(tryOpenDB());generateMiddlewareStacks(e,g)}catch(e){}vt.push(e),n.onversionchange=wrap((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=wrap((function(t){e.on("close").fire(t)})),h&&function _onDatabaseCreated(e,t){var n=e.indexedDB,i=e.IDBKeyRange;!hasDatabasesNative(n)&&"__dbnames"!==t&&getDbNamesTable(n,i).put({name:t}).catch(nop)}(e._deps,p),i()}),f)})).catch((function(e){switch(null==e?void 0:e.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),tryOpenDB();break;case"VersionError":if(s>0)return s=0,tryOpenDB()}return DexiePromise.reject(e)}))};return DexiePromise.race([i,("undefined"==typeof navigator?DexiePromise.resolve():idbReady()).then(tryOpenDB)]).then((function(){return throwIfCancelled(),t.onReadyBeingFired=[],DexiePromise.resolve(vip((function(){return e.on.ready.fire(e.vip)}))).then((function fireRemainders(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(promisableChain,nop);return t.onReadyBeingFired=[],DexiePromise.resolve(vip((function(){return n(e.vip)}))).then(fireRemainders)}}))})).finally((function(){t.openCanceller===i&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)})).catch((function(n){t.dbOpenError=n;try{d&&d.abort()}catch(e){}return i===t.openCanceller&&e._close(),bt(n)})).finally((function(){t.openComplete=!0,f()})).then((function(){if(h){var t={};e.tables.forEach((function(n){n.schema.indexes.forEach((function(i){i.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(i.name)]=new RangeSet(-1/0,[[[]]]))})),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new RangeSet(-1/0,[[[]]])})),Ct("storagemutated").fire(t),signalSubscribersNow(t,!0)}return e}))}function awaitIterator(e){var callNext=function(t){return e.next(t)},t=step(callNext),n=step((function(t){return e.throw(t)}));function step(e){return function(i){var s=e(i),l=s.value;return s.done?l:l&&"function"==typeof l.then?l.then(t,n):we(l)?Promise.all(l).then(t,n):t(l)}}return step(callNext)()}function extractTransactionArgs(e,t,n){var i=arguments.length;if(i<2)throw new We.InvalidArgument("Too few arguments");for(var s=new Array(i-1);--i;)s[i-1]=arguments[i];n=s.pop();var l=flatten(s);return[e,l,n]}function enterTransactionScope(e,t,n,i,s){return DexiePromise.resolve().then((function(){var l=ut.transless||ut,f=e._createTransaction(t,n,e._dbSchema,i);f.explicit=!0;var d={trans:f,transless:l};if(i)f.idbtrans=i.idbtrans;else try{f.create(),f.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(i){return i.name===Ve.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then((function(){return enterTransactionScope(e,t,n,null,s)}))):bt(i)}var h,p=Ue(s);p&&incrementExpectedAwaits();var _=DexiePromise.follow((function(){if(h=s.call(f,f))if(p){var e=decrementExpectedAwaits.bind(null,null);h.then(e,e)}else"function"==typeof h.next&&"function"==typeof h.throw&&(h=awaitIterator(h))}),d);return(h&&"function"==typeof h.then?DexiePromise.resolve(h).then((function(e){return f.active?e:bt(new We.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):_.then((function(){return h}))).then((function(e){return i&&f._resolve(),f._completion.then((function(){return e}))})).catch((function(e){return f._reject(e),bt(e)}))}))}function pad(e,t,n){for(var i=we(e)?e.slice():[e],s=0;s<n;++s)i.push(t);return i}var xt={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function createVirtualIndexMiddleware(e){return __assign(__assign({},e),{table:function(t){var n=e.table(t),i=n.schema,s={},l=[];function addVirtualIndexes(e,t,n){var i=getKeyPathAlias(e),f=s[i]=s[i]||[],d=null==e?0:"string"==typeof e?1:e.length,h=t>0,p=__assign(__assign({},n),{name:h?"".concat(i,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:h,keyTail:t,keyLength:d,extractKey:getKeyExtractor(e),unique:!h&&n.unique});(f.push(p),p.isPrimaryKey||l.push(p),d>1)&&addVirtualIndexes(2===d?e[0]:e.slice(0,d-1),t+1,n);return f.sort((function(e,t){return e.keyTail-t.keyTail})),p}var f=addVirtualIndexes(i.primaryKey.keyPath,0,i.primaryKey);s[":id"]=[f];for(var d=0,h=i.indexes;d<h.length;d++){var p=h[d];addVirtualIndexes(p.keyPath,0,p)}function translateRequest(t){var n,i,s=t.query.index;return s.isVirtual?__assign(__assign({},t),{query:{index:s.lowLevelIndex,range:(n=t.query.range,i=s.keyTail,{type:1===n.type?2:n.type,lower:pad(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:pad(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):t}return __assign(__assign({},n),{schema:__assign(__assign({},i),{primaryKey:f,indexes:l,getIndexByKeyPath:function findBestIndex(e){var t=s[getKeyPathAlias(e)];return t&&t[0]}}),count:function(e){return n.count(translateRequest(e))},query:function(e){return n.query(translateRequest(e))},openCursor:function(t){var i=t.query.index,s=i.keyTail,l=i.isVirtual,f=i.keyLength;if(!l)return n.openCursor(t);return n.openCursor(translateRequest(t)).then((function(n){return n&&function createVirtualCursor(n){return Object.create(n,{continue:{value:function _continue(i){null!=i?n.continue(pad(i,t.reverse?e.MAX_KEY:e.MIN_KEY,s)):t.unique?n.continue(n.key.slice(0,f).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,s)):n.continue()}},continuePrimaryKey:{value:function(t,i){n.continuePrimaryKey(pad(t,e.MAX_KEY,s),i)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===f?e[0]:e.slice(0,f)}},value:{get:function(){return n.value}}})}(n)}))}})}})}};function getObjectDiff(e,t,n,i){return n=n||{},i=i||"",Te(e).forEach((function(s){if(hasOwn(t,s)){var l=e[s],f=t[s];if("object"==typeof l&&"object"==typeof f&&l&&f){var d=toStringTag(l);d!==toStringTag(f)?n[i+s]=t[s]:"Object"===d?getObjectDiff(l,f,n,i+s+"."):l!==f&&(n[i+s]=t[s])}else l!==f&&(n[i+s]=t[s])}else n[i+s]=void 0})),Te(t).forEach((function(s){hasOwn(e,s)||(n[i+s]=t[s])})),n}function getEffectiveKeys(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Mt={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return __assign(__assign({},e),{table:function(t){var n=e.table(t),i=n.schema.primaryKey;return __assign(__assign({},n),{mutate:function(e){var s=ut.trans,l=s.table(t).hook,f=l.deleting,d=l.creating,h=l.updating;switch(e.type){case"add":if(d.fire===nop)break;return s._promise("readwrite",(function(){return addPutOrDelete(e)}),!0);case"put":if(d.fire===nop&&h.fire===nop)break;return s._promise("readwrite",(function(){return addPutOrDelete(e)}),!0);case"delete":if(f.fire===nop)break;return s._promise("readwrite",(function(){return addPutOrDelete(e)}),!0);case"deleteRange":if(f.fire===nop)break;return s._promise("readwrite",(function(){return function deleteRange(e){return function deleteNextChunk(e,t,s){return n.query({trans:e,values:!1,query:{index:i,range:t},limit:s}).then((function(n){var i=n.result;return addPutOrDelete({type:"delete",keys:i,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):i.length<s?{failures:[],numFailures:0,lastResult:void 0}:deleteNextChunk(e,__assign(__assign({},t),{lower:i[i.length-1],lowerOpen:!0}),s)}))}))}(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function addPutOrDelete(e){var t=ut.trans,s=e.keys||getEffectiveKeys(i,e);if(!s)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?__assign(__assign({},e),{keys:s}):__assign({},e)).type&&(e.values=__spreadArray([],e.values,!0)),e.keys&&(e.keys=__spreadArray([],e.keys,!0)),function getExistingValues(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,s).then((function(l){var p=s.map((function(n,s){var p=l[s],_={onerror:null,onsuccess:null};if("delete"===e.type)f.fire.call(_,n,p,t);else if("add"===e.type||void 0===p){var g=d.fire.call(_,n,e.values[s],t);null==n&&null!=g&&(n=g,e.keys[s]=n,i.outbound||setByKeyPath(e.values[s],i.keyPath,n))}else{var E=getObjectDiff(p,e.values[s]),y=h.fire.call(_,E,n,p,t);if(y){var m=e.values[s];Object.keys(y).forEach((function(e){hasOwn(m,e)?m[e]=y[e]:setByKeyPath(m,e,y[e])}))}}return _}));return n.mutate(e).then((function(t){for(var n=t.failures,i=t.results,f=t.numFailures,d=t.lastResult,h=0;h<s.length;++h){var _=i?i[h]:s[h],g=p[h];null==_?g.onerror&&g.onerror(n[h]):g.onsuccess&&g.onsuccess("put"===e.type&&l[h]?e.values[h]:_)}return{failures:n,results:i,numFailures:f,lastResult:d}})).catch((function(e){return p.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}}})}})}};function getFromTransactionCache(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var i=[],s=0,l=0;s<t.keys.length&&l<e.length;++s)0===cmp(t.keys[s],e[l])&&(i.push(n?deepClone(t.values[s]):t.values[s]),++l);return i.length===e.length?i:null}catch(e){return null}}var Ut={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return __assign(__assign({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=getFromTransactionCache(e.keys,e.trans._cache,"clone"===e.cache);return t?DexiePromise.resolve(t):n.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?deepClone(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function isCachableContext(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function isCachableRequest(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Kt={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new RangeSet(e.MIN_KEY,e.MAX_KEY);return __assign(__assign({},e),{transaction:function(t,n,i){if(ut.subscr&&"readonly"!==n)throw new We.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ut.querier));return e.transaction(t,n,i)},table:function(i){var s=e.table(i),l=s.schema,f=l.primaryKey,d=l.indexes,h=f.extractKey,p=f.outbound,_=f.autoIncrement&&d.filter((function(e){return e.compound&&e.keyPath.includes(f.keyPath)})),g=__assign(__assign({},s),{mutate:function(e){var d=e.trans,h=e.mutatedParts||(e.mutatedParts={}),getRangeSet=function(e){var n="idb://".concat(t,"/").concat(i,"/").concat(e);return h[n]||(h[n]=new RangeSet)},p=getRangeSet(""),g=getRangeSet(":dels"),E=e.type,y="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[getEffectiveKeys(f,e).filter((function(e){return e})),e.values]:[],m=y[0],b=y[1],O=e.trans._cache;if(we(m)){p.addKeys(m);var S="delete"===E||m.length===b.length?getFromTransactionCache(m,O):null;S||g.addKeys(m),(S||b)&&function trackAffectedIndexes(e,t,n,i){t.indexes.forEach((function addAffectedIndex(t){var s=e(t.name||"");function extractKey(e){return null!=e?t.extractKey(e):null}var addKeyOrKeys=function(e){return t.multiEntry&&we(e)?e.forEach((function(e){return s.addKey(e)})):s.addKey(e)};(n||i).forEach((function(e,t){var s=n&&extractKey(n[t]),l=i&&extractKey(i[t]);0!==cmp(s,l)&&(null!=s&&addKeyOrKeys(s),null!=l&&addKeyOrKeys(l))}))}))}(getRangeSet,l,S,b)}else if(m){var v={from:m.lower,to:m.upper};g.add(v),p.add(v)}else p.add(n),g.add(n),l.indexes.forEach((function(e){return getRangeSet(e.name).add(n)}));return s.mutate(e).then((function(t){return!m||"add"!==e.type&&"put"!==e.type||(p.addKeys(t.results),_&&_.forEach((function(n){var i=e.values.map((function(e){return n.extractKey(e)})),s=n.keyPath.findIndex((function(e){return e===f.keyPath}));t.results.forEach((function(e){return i[s]=e})),getRangeSet(n.name).addKeys(i)}))),d.mutatedParts=extendObservabilitySet(d.mutatedParts||{},h),t}))}}),getRange=function(t){var n,i,s=t.query,l=s.index,f=s.range;return[l,new RangeSet(null!==(n=f.lower)&&void 0!==n?n:e.MIN_KEY,null!==(i=f.upper)&&void 0!==i?i:e.MAX_KEY)]},E={get:function(e){return[f,new RangeSet(e.key)]},getMany:function(e){return[f,(new RangeSet).addKeys(e.keys)]},count:getRange,query:getRange,openCursor:getRange};return Te(E).forEach((function(e){g[e]=function(l){var f=ut.subscr,d=!!f,_=isCachableContext(ut,s)&&isCachableRequest(e,l),g=_?l.obsSet={}:f;if(d){var getRangeSet=function(e){var n="idb://".concat(t,"/").concat(i,"/").concat(e);return g[n]||(g[n]=new RangeSet)},y=getRangeSet(""),m=getRangeSet(":dels"),b=E[e](l),O=b[0],S=b[1];if("query"===e&&O.isPrimaryKey&&!l.values?m.add(S):getRangeSet(O.name||"").add(S),!O.isPrimaryKey){if("count"!==e){var v="query"===e&&p&&l.values&&s.query(__assign(__assign({},l),{values:!1}));return s[e].apply(this,arguments).then((function(t){if("query"===e){if(p&&l.values)return v.then((function(e){var n=e.result;return y.addKeys(n),t}));var n=l.values?t.result.map(h):t.result;l.values?y.addKeys(n):m.addKeys(n)}else if("openCursor"===e){var i=t,s=l.values;return i&&Object.create(i,{key:{get:function(){return m.addKey(i.primaryKey),i.key}},primaryKey:{get:function(){var e=i.primaryKey;return m.addKey(e),e}},value:{get:function(){return s&&y.addKey(i.primaryKey),i.value}}})}return t}))}m.add(n)}}return s[e].apply(this,arguments)}})),g}})}};function adjustOptimisticFromFailures(e,t,n){if(0===n.numFailures)return t;if("deleteRange"===t.type)return null;var i=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===i)return null;var s=__assign({},t);return we(s.keys)&&(s.keys=s.keys.filter((function(e,t){return!(t in n.failures)}))),"values"in s&&we(s.values)&&(s.values=s.values.filter((function(e,t){return!(t in n.failures)}))),s}function isWithinRange(e,t){return function isAboveLower(e,t){return void 0===t.lower||(t.lowerOpen?cmp(e,t.lower)>0:cmp(e,t.lower)>=0)}(e,t)&&function isBelowUpper(e,t){return void 0===t.upper||(t.upperOpen?cmp(e,t.upper)<0:cmp(e,t.upper)<=0)}(e,t)}function applyOptimisticOps(e,t,n,i,s,l){if(!n||0===n.length)return e;var f=t.query.index,d=f.multiEntry,h=t.query.range,p=i.schema.primaryKey.extractKey,_=f.extractKey,g=(f.lowLevelIndex||f).extractKey,E=n.reduce((function(e,n){var i=e,s="add"===n.type||"put"===n.type?n.values.filter((function(e){var t=_(e);return d&&we(t)?t.some((function(e){return isWithinRange(e,h)})):isWithinRange(t,h)})).map((function(e){return e=deepClone(e),l&&Object.freeze(e),e})):[];switch(n.type){case"add":i=e.concat(t.values?s:s.map((function(e){return p(e)})));break;case"put":var f=(new RangeSet).addKeys(n.values.map((function(e){return p(e)})));i=e.filter((function(e){var n=t.values?p(e):e;return!rangesOverlap(new RangeSet(n),f)})).concat(t.values?s:s.map((function(e){return p(e)})));break;case"delete":var g=(new RangeSet).addKeys(n.keys);i=e.filter((function(e){var n=t.values?p(e):e;return!rangesOverlap(new RangeSet(n),g)}));break;case"deleteRange":var E=n.range;i=e.filter((function(e){return!isWithinRange(p(e),E)}))}return i}),e);return E===e?e:(E.sort((function(e,t){return cmp(g(e),g(t))||cmp(p(e),p(t))})),t.limit&&t.limit<1/0&&(E.length>t.limit?E.length=t.limit:e.length===t.limit&&E.length<t.limit&&(s.dirty=!0)),l?Object.freeze(E):E)}function areRangesEqual(e,t){return 0===cmp(e.lower,t.lower)&&0===cmp(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function isSuperRange(e,t){return function compareLowers(e,t,n,i){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;var s=cmp(e,t);if(0===s){if(n&&i)return 0;if(n)return 1;if(i)return-1}return s}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&function compareUppers(e,t,n,i){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;var s=cmp(e,t);if(0===s){if(n&&i)return 0;if(n)return-1;if(i)return 1}return s}(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function subscribeToCacheEntry(e,t,n,i){e.subscribers.add(n),i.addEventListener("abort",(function(){e.subscribers.delete(n),0===e.subscribers.size&&function enqueForDeletion(e,t){setTimeout((function(){0===e.subscribers.size&&delArrayItem(t,e)}),3e3)}(e,t)}))}var jt={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return __assign(__assign({},e),{transaction:function(n,i,s){var l=e.transaction(n,i,s);if("readwrite"===i){var f=new AbortController,d=f.signal,endTransaction=function(s){return function(){if(f.abort(),"readwrite"===i){for(var d=new Set,h=0,p=n;h<p.length;h++){var _=p[h],g=kt["idb://".concat(t,"/").concat(_)];if(g){var E=e.table(_),y=g.optimisticOps.filter((function(e){return e.trans===l}));if(l._explicit&&s&&l.mutatedParts)for(var m=0,b=Object.values(g.queries.query);m<b.length;m++)for(var O=0,S=(w=b[m]).slice();O<S.length;O++){obsSetsOverlap((P=S[O]).obsSet,l.mutatedParts)&&(delArrayItem(w,P),P.subscribers.forEach((function(e){return d.add(e)})))}else if(y.length>0){g.optimisticOps=g.optimisticOps.filter((function(e){return e.trans!==l}));for(var v=0,T=Object.values(g.queries.query);v<T.length;v++)for(var w,I=0,A=(w=T[v]).slice();I<A.length;I++){var P;if(null!=(P=A[I]).res&&l.mutatedParts)if(s&&!P.dirty){var C=Object.isFrozen(P.res),R=applyOptimisticOps(P.res,P.req,y,E,P,C);P.dirty?(delArrayItem(w,P),P.subscribers.forEach((function(e){return d.add(e)}))):R!==P.res&&(P.res=R,P.promise=DexiePromise.resolve({result:R}))}else P.dirty&&delArrayItem(w,P),P.subscribers.forEach((function(e){return d.add(e)}))}}}}d.forEach((function(e){return e()}))}}};l.addEventListener("abort",endTransaction(!1),{signal:d}),l.addEventListener("error",endTransaction(!1),{signal:d}),l.addEventListener("complete",endTransaction(!0),{signal:d})}return l},table:function(n){var i=e.table(n),s=i.schema.primaryKey;return __assign(__assign({},i),{mutate:function(e){var l=ut.trans;if(s.outbound||"disabled"===l.db._options.cache||l.explicit)return i.mutate(e);var f=kt["idb://".concat(t,"/").concat(n)];if(!f)return i.mutate(e);var d=i.mutate(e);return"add"!==e.type&&"put"!==e.type||!(e.values.length>=50||getEffectiveKeys(s,e).some((function(e){return null==e})))?(f.optimisticOps.push(e),e.mutatedParts&&signalSubscribersLazily(e.mutatedParts),d.then((function(t){if(t.numFailures>0){delArrayItem(f.optimisticOps,e);var n=adjustOptimisticFromFailures(0,e,t);n&&f.optimisticOps.push(n),e.mutatedParts&&signalSubscribersLazily(e.mutatedParts)}})),d.catch((function(){delArrayItem(f.optimisticOps,e),e.mutatedParts&&signalSubscribersLazily(e.mutatedParts)}))):d.then((function(t){var n=adjustOptimisticFromFailures(0,__assign(__assign({},e),{values:e.values.map((function(e,n){var i,l=(null===(i=s.keyPath)||void 0===i?void 0:i.includes("."))?deepClone(e):__assign({},e);return setByKeyPath(l,s.keyPath,t.results[n]),l}))}),t);f.optimisticOps.push(n),queueMicrotask((function(){return e.mutatedParts&&signalSubscribersLazily(e.mutatedParts)}))})),d},query:function(e){var s;if(!isCachableContext(ut,i)||!isCachableRequest("query",e))return i.query(e);var l="immutable"===(null===(s=ut.trans)||void 0===s?void 0:s.db._options.cache),f=ut,d=f.requery,h=f.signal,p=function findCompatibleQuery(e,t,n,i){var s=kt["idb://".concat(e,"/").concat(t)];if(!s)return[];var l=s.queries[n];if(!l)return[null,!1,s,null];var f=l[(i.query?i.query.index.name:null)||""];if(!f)return[null,!1,s,null];switch(n){case"query":var d=f.find((function(e){return e.req.limit===i.limit&&e.req.values===i.values&&areRangesEqual(e.req.query.range,i.query.range)}));return d?[d,!0,s,f]:[f.find((function(e){return("limit"in e.req?e.req.limit:1/0)>=i.limit&&(!i.values||e.req.values)&&isSuperRange(e.req.query.range,i.query.range)})),!1,s,f];case"count":var h=f.find((function(e){return areRangesEqual(e.req.query.range,i.query.range)}));return[h,!!h,s,f]}}(t,n,"query",e),_=p[0],g=p[1],E=p[2],y=p[3];if(_&&g)_.obsSet=e.obsSet;else{var m=i.query(e).then((function(e){var t=e.result;if(_&&(_.res=t),l){for(var n=0,i=t.length;n<i;++n)Object.freeze(t[n]);Object.freeze(t)}else e.result=deepClone(t);return e})).catch((function(e){return y&&_&&delArrayItem(y,_),Promise.reject(e)}));_={obsSet:e.obsSet,promise:m,subscribers:new Set,type:"query",req:e,dirty:!1},y?y.push(_):(y=[_],E||(E=kt["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),E.queries.query[e.query.index.name||""]=y)}return subscribeToCacheEntry(_,y,d,h),_.promise.then((function(t){return{result:applyOptimisticOps(t.result,e,null==E?void 0:E.optimisticOps,i,_,l)}}))}})}})}};function vipify(e,t){return new Proxy(e,{get:function(e,n,i){return"db"===n?t:Reflect.get(e,n,i)}})}var Ht,Vt=function(){function Dexie(e,t){var n=this;this._middlewares={},this.verno=0;var i=Dexie.dependencies;this._options=t=__assign({addons:Dexie.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};var s=t.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:nop,dbReadyPromise:null,cancelOpen:nop,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};l.dbReadyPromise=new DexiePromise((function(e){l.dbReadyResolve=e})),l.openCanceller=new DexiePromise((function(e,t){l.cancelOpen=t})),this._state=l,this.name=e,this.on=Events(this,"populate","blocked","versionchange","close",{ready:[promisableChain,nop]}),this.on.ready.subscribe=override(this.on.ready.subscribe,(function(e){return function(t,i){Dexie.vip((function(){var s=n._state;if(s.openComplete)s.dbOpenError||DexiePromise.resolve().then(t),i&&e(t);else if(s.onReadyBeingFired)s.onReadyBeingFired.push(t),i&&e(t);else{e(t);var l=n;i||e((function unsubscribe(){l.on.ready.unsubscribe(t),l.on.ready.unsubscribe(unsubscribe)}))}}))}})),this.Collection=function createCollectionConstructor(e){return makeClassConstructor(At.prototype,(function Collection(t,n){this.db=e;var i=Tt,s=null;if(n)try{i=n()}catch(e){s=e}var l=t._ctx,f=l.table,d=f.hook.reading.fire;this._ctx={table:f,index:l.index,isPrimKey:!l.index||f.schema.primKey.keyPath&&l.index===f.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:l.or,valueMapper:d!==mirror?d:null}}))}(this),this.Table=function createTableConstructor(e){return makeClassConstructor(wt.prototype,(function Table(t,n,i){this.db=e,this._tx=i,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Events(null,{creating:[hookCreatingChain,nop],reading:[pureFunctionChain,mirror],updating:[hookUpdatingChain,nop],deleting:[hookDeletingChain,nop]})}))}(this),this.Transaction=function createTransactionConstructor(e){return makeClassConstructor(Rt.prototype,(function Transaction(t,n,i,s,l){var f=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=i,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=Events(this,"complete","error","abort"),this.parent=l||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new DexiePromise((function(e,t){f._resolve=e,f._reject=t})),this._completion.then((function(){f.active=!1,f.on.complete.fire()}),(function(e){var t=f.active;return f.active=!1,f.on.error.fire(e),f.parent?f.parent._reject(e):t&&f.idbtrans&&f.idbtrans.abort(),bt(e)}))}))}(this),this.Version=function createVersionConstructor(e){return makeClassConstructor(Dt.prototype,(function Version(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function createWhereClauseConstructor(e){return makeClassConstructor(Pt.prototype,(function WhereClause(t,n,i){if(this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:i},this._cmp=this._ascending=cmp,this._descending=function(e,t){return cmp(t,e)},this._max=function(e,t){return cmp(e,t)>0?e:t},this._min=function(e,t){return cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new We.MissingAPI}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=getMaxKey(t.IDBKeyRange),this._createTransaction=function(e,t,i,s){return new n.Transaction(e,t,i,n._options.chromeTransactionDurability,s)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),vt.filter((function(e){return e.name===n.name&&e!==n&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Ut),this.use(jt),this.use(Kt),this.use(xt),this.use(Mt);var f=new Proxy(this,{get:function(e,t,i){if("_vip"===t)return!0;if("table"===t)return function(e){return vipify(n.table(e),f)};var s=Reflect.get(e,t,i);return s instanceof wt?vipify(s,f):"tables"===t?s.map((function(e){return vipify(e,f)})):"_createTransaction"===t?function(){var e=s.apply(this,arguments);return vipify(e,f)}:s}});this.vip=f,s.forEach((function(e){return e(n)}))}return Dexie.prototype.version=function(e){if(isNaN(e)||e<.1)throw new We.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new We.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(lowerVersionFirst),n.stores({}),this._state.autoSchema=!1,n)},Dexie.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ut.letThrough||this._vip)?e():new DexiePromise((function(e,n){if(t._state.openComplete)return n(new We.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new We.DatabaseClosed);t.open().catch(nop)}t._state.dbReadyPromise.then(e,n)})).then(e)},Dexie.prototype.use=function(e){var t=e.stack,n=e.create,i=e.level,s=e.name;s&&this.unuse({stack:t,name:s});var l=this._middlewares[t]||(this._middlewares[t]=[]);return l.push({stack:t,create:n,level:null==i?10:i,name:s}),l.sort((function(e,t){return e.level-t.level})),this},Dexie.prototype.unuse=function(e){var t=e.stack,n=e.name,i=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return i?e.create!==i:!!n&&e.name!==n}))),this},Dexie.prototype.open=function(){var e=this;return usePSD(ct,(function(){return dexieOpen(e)}))},Dexie.prototype._close=function(){var e=this._state,t=vt.indexOf(this);if(t>=0&&vt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new DexiePromise((function(t){e.dbReadyResolve=t})),e.openCanceller=new DexiePromise((function(t,n){e.cancelOpen=n})))},Dexie.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new We.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new We.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Dexie.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=arguments.length>0&&"object"!=typeof arguments[0],i=this._state;return new DexiePromise((function(s,l){var doDelete=function(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=wrap((function(){_onDatabaseDeleted(t._deps,t.name),s()})),n.onerror=eventRejectHandler(l),n.onblocked=t._fireOnBlocked};if(n)throw new We.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(doDelete):doDelete()}))},Dexie.prototype.backendDB=function(){return this.idbdb},Dexie.prototype.isOpen=function(){return null!==this.idbdb},Dexie.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},Dexie.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Dexie.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Dexie.prototype,"tables",{get:function(){var e=this;return Te(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),Dexie.prototype.transaction=function(){var e=extractTransactionArgs.apply(this,arguments);return this._transaction.apply(this,e)},Dexie.prototype._transaction=function(e,t,n){var i=this,s=ut.trans;s&&s.db===this&&-1===e.indexOf("!")||(s=null);var l,f,d=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(f=t.map((function(e){var t=e instanceof i.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)l="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new We.InvalidArgument("Invalid transaction mode: "+e);l="readwrite"}if(s){if("readonly"===s.mode&&"readwrite"===l){if(!d)throw new We.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&f.forEach((function(e){if(s&&-1===s.storeNames.indexOf(e)){if(!d)throw new We.SubTransaction("Table "+e+" not included in parent transaction.");s=null}})),d&&s&&!s.active&&(s=null)}}catch(e){return s?s._promise(null,(function(t,n){n(e)})):bt(e)}var h=enterTransactionScope.bind(null,this,l,f,s,n);return s?s._promise(l,h,"lock"):ut.trans?usePSD(ut.transless,(function(){return i._whenReady(h)})):this._whenReady(h)},Dexie.prototype.table=function(e){if(!hasOwn(this._allTables,e))throw new We.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Dexie}(),Gt="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",Wt=function(){function Observable(e){this._subscribe=e}return Observable.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},Observable.prototype[Gt]=function(){return this},Observable}();try{Ht={indexedDB:ve.indexedDB||ve.mozIndexedDB||ve.webkitIndexedDB||ve.msIndexedDB,IDBKeyRange:ve.IDBKeyRange||ve.webkitIDBKeyRange}}catch(e){Ht={indexedDB:null,IDBKeyRange:null}}var Yt=Vt;function propagateLocally(e){var t=Xt;try{Xt=!0,Ct.storagemutated.fire(e),signalSubscribersNow(e,!0)}finally{Xt=t}}props(Yt,__assign(__assign({},qe),{delete:function(e){return new Yt(e,{addons:[]}).delete()},exists:function(e){return new Yt(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return function getDatabaseNames(e){var t=e.indexedDB,n=e.IDBKeyRange;return hasDatabasesNative(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return"__dbnames"!==e}))})):getDbNamesTable(t,n).toCollection().primaryKeys()}(Yt.dependencies).then(e)}catch(e){return bt(new We.MissingAPI)}},defineClass:function(){return function Class(e){extend(this,e)}},ignoreTransaction:function(e){return ut.trans?usePSD(ut.transless,e):e()},vip:vip,async:function(e){return function(){try{var t=awaitIterator(e.apply(this,arguments));return t&&"function"==typeof t.then?t:DexiePromise.resolve(t)}catch(e){return bt(e)}}},spawn:function(e,t,n){try{var i=awaitIterator(e.apply(n,t||[]));return i&&"function"==typeof i.then?i:DexiePromise.resolve(i)}catch(e){return bt(e)}},currentTransaction:{get:function(){return ut.trans||null}},waitFor:function(e,t){var n=DexiePromise.resolve("function"==typeof e?Yt.ignoreTransaction(e):e).timeout(t||6e4);return ut.trans?ut.trans.waitFor(n):n},Promise:DexiePromise,debug:{get:function(){return Xe},set:function(e){setDebug(e)}},derive:derive,extend:extend,props:props,override:override,Events:Events,on:Ct,liveQuery:function liveQuery(e){var t,n=!1,i=new Wt((function(i){var s=Ue(e);var l,f=!1,d={},h={},p={get closed(){return f},unsubscribe:function(){f||(f=!0,l&&l.abort(),_&&Ct.storagemutated.unsubscribe(mutationListener))}};i.start&&i.start(p);var _=!1,doQuery=function(){return execInGlobalContext(_doQuery)};var mutationListener=function(e){extendObservabilitySet(d,e),function shouldNotify(){return obsSetsOverlap(h,d)}()&&doQuery()},_doQuery=function(){if(!f&&Ht.indexedDB){d={};var p={};l&&l.abort(),l=new AbortController;var g={subscr:p,signal:l.signal,requery:doQuery,querier:e,trans:null},E=function execute(t){var n=beginMicroTickScope();try{s&&incrementExpectedAwaits();var i=newScope(e,t);return s&&(i=i.finally(decrementExpectedAwaits)),i}finally{n&&endMicroTickScope()}}(g);Promise.resolve(E).then((function(e){n=!0,t=e,f||g.signal.aborted||(d={},function objectIsEmpty(e){for(var t in e)if(hasOwn(e,t))return!1;return!0}(h=p)||_||(Ct("storagemutated",mutationListener),_=!0),execInGlobalContext((function(){return!f&&i.next&&i.next(e)})))}),(function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||f||execInGlobalContext((function(){f||i.error&&i.error(e)}))}))}};return setTimeout(doQuery,0),p}));return i.hasValue=function(){return n},i.getValue=function(){return t},i},extendObservabilitySet:extendObservabilitySet,getByKeyPath:getByKeyPath,setByKeyPath:setByKeyPath,delByKeyPath:function delByKeyPath(e,t){"string"==typeof t?setByKeyPath(e,t,void 0):"length"in t&&[].map.call(t,(function(t){setByKeyPath(e,t,void 0)}))},shallowClone:shallowClone,deepClone:deepClone,getObjectDiff:getObjectDiff,cmp:cmp,asap:asap$1,minKey:-1/0,addons:[],connections:vt,errnames:Ve,dependencies:Ht,cache:kt,semVer:"4.0.5",version:"4.0.5".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),Yt.maxKey=getMaxKey(Yt.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Ct("storagemutated",(function(e){var t;Xt||(t=new CustomEvent("x-storagemutated-1",{detail:e}),Xt=!0,dispatchEvent(t),Xt=!1)})),addEventListener("x-storagemutated-1",(function(e){var t=e.detail;Xt||propagateLocally(t)})));var qt,Xt=!1,createBC=function(){};"undefined"!=typeof BroadcastChannel&&((createBC=function(){(qt=new BroadcastChannel("x-storagemutated-1")).onmessage=function(e){return e.data&&propagateLocally(e.data)}})(),"function"==typeof qt.unref&&qt.unref(),Ct("storagemutated",(function(e){Xt||qt.postMessage(e)}))),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",(function(e){if(!Vt.disableBfCache&&e.persisted){Xe&&console.debug("Dexie: handling persisted pagehide"),null==qt||qt.close();for(var t=0,n=vt;t<n.length;t++){n[t].close({disableAutoOpen:!1})}}})),addEventListener("pageshow",(function(e){!Vt.disableBfCache&&e.persisted&&(Xe&&console.debug("Dexie: handling persisted pageshow"),createBC(),propagateLocally({all:new RangeSet(-1/0,[[]])}))}))),DexiePromise.rejectionMapper=function mapError(e,t){if(!e||e instanceof DexieError||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Ye[e.name])return e;var n=new Ye[e.name](t||e.message,e);return"stack"in e&&setProp(n,"stack",{get:function(){return this.inner.stack}}),n},setDebug(Xe);var Zt=Object.defineProperty,database_publicField=(e,t,n)=>(((e,t,n)=>{t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class database_BlackListEntryDB extends Vt{constructor(){super("BlackListEntryDB"),database_publicField(this,"blacklist"),this.version(1).stores({blacklist:"domain"})}}const zt={};var Qt=n(51),Jt=n(53),$t=n(81);const processSettings=async e=>{const t=await Jt.a.getInstance().getAllFeatureConfigs();for(const[n,i]of Object.entries(e)){if("boolean"!=typeof i)continue;const e=Object.values(t).find(e=>e.storageKey===n||e.remoteConfigKey===n);e&&await $t.a.getInstance().toggleFeatureState(e.storageKey,i)}},updateRemoteSettings=async()=>{var e,t,n;try{const{version:s}=Object(d.l)(),l=await b.c.get([i.h.BLOCKED_ELEMENTS,i.h.WHITELIST,i.h.SOCIAL_CONTENT_KEYWORDS]),h={extensionVersion:s,features:await Jt.a.getInstance().getFeaturesAsRemoteKeyUserValueMap(),whitelist:null!=(e=l.whitelist)?e:[],socialContentKeyWords:null!=(t=l.socialContentKeyWords)?t:[],blockedElements:null!=(n=l.blockedElements)?n:{}},{uuid:p}=await Object(S.a)();await Object(f.a)(i.e.SETTINGS,{method:"POST",headers:{"Content-Type":"application/json",id:p},body:JSON.stringify(h)}),le.c.sendMessage(le.b.SETTINGS_CHANGED_IN_EXTENSION)}catch(e){ye.a.error("Failed to update remote settings. Error: "+Object(be.a)(e))}},er=(e=>{const t=Object(d.d)(e,1e3);return async()=>{$t.a.getInstance().featureStateChangeEvent.addListener(async()=>{t()})}})(updateRemoteSettings);var tr=n(79),nr=n(64),ir=n(71),ar=Object.defineProperty,sr=Object.getOwnPropertySymbols,or=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable,sendFirstAppOpen_defNormalProp=(e,t,n)=>t in e?ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const sendFirstAppOpen=async()=>{const e=Object(ir.a)(),t=Object(nr.a)();Object(nr.b)(i.c.ANALYTICS_EVENT_TYPES.FIRST_APP_OPEN,e,((e,t)=>{for(var n in t||(t={}))or.call(t,n)&&sendFirstAppOpen_defNormalProp(e,n,t[n]);if(sr)for(var n of sr(t))cr.call(t,n)&&sendFirstAppOpen_defNormalProp(e,n,t[n]);return e})({device_id:e},t)),await b.c.set({[i.h.ANALYTICS_DEVICE_ID]:e})};var ur=Object.defineProperty,lr=Object.defineProperties,fr=Object.getOwnPropertyDescriptors,dr=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,sendUuidInitialized_defNormalProp=(e,t,n)=>t in e?ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sendUuidInitialized_spreadValues=(e,t)=>{for(var n in t||(t={}))hr.call(t,n)&&sendUuidInitialized_defNormalProp(e,n,t[n]);if(dr)for(var n of dr(t))pr.call(t,n)&&sendUuidInitialized_defNormalProp(e,n,t[n]);return e};const sendUuidInitialized=async()=>{const e=await Object(S.a)(),{analyticsDeviceId:t}=await b.c.get([i.h.ANALYTICS_DEVICE_ID]),n=Object(nr.a)(),{uuid:s,country:l,resource:f,user_agent:d,install_version:h}=e;var p;Object(nr.b)(i.c.ANALYTICS_EVENT_TYPES.UUID_INITIALIZED,e.uuid,sendUuidInitialized_spreadValues((p=sendUuidInitialized_spreadValues({device_id:null!=t?t:""},n),lr(p,fr({uuid:s,country:l,resource:f,user_agent:d}))),h&&{install_version:h}))};const initializePushNotificationBlockerListener=()=>{oe.a.getInstance().featureStateChangeEvent.addListener(e=>{e.featureKey===i.m.PUSH_NOTIFICATION&&function setPushNotificationBlocker(e){if(l.a.custom.contentSettings.notifications.set({primaryPattern:i.C.ALL_URLS,setting:e?i.C.BLOCK:i.C.ASK})){const t=e?i.c.ANALYTICS_EVENT_TYPES.IN_SITE_PUSH_NOTIFICATION_ON:i.c.ANALYTICS_EVENT_TYPES.IN_SITE_PUSH_NOTIFICATION_OFF;Object(m.a)(t)}}(e.newValue)})},_r={[i.m.DETECT_OVERLAYS]:i.A.EXT_OVERLAY_TOGGLE,[i.m.COOKIE_CRUMBLER]:i.A.EXT_COOKIE_TOGGLE};var gr=Object.defineProperty,reload_tracker_publicField=(e,t,n)=>(((e,t,n)=>{t in e?gr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class reload_tracker_ReloadTracker{static isReload(e,t){const n=this.tabInfo.get(e);return n&&n.url===t}static handleReload(e,t){const n=Date.now(),i=this.tabInfo.get(e);!i||n-i.timestamp>this.config.reloadTimeSpan?this.tabInfo.set(e,{url:t,timestamp:n,reloadCount:1}):(i.reloadCount+=1,i.reloadCount>=this.config.reloadTimes&&this.sendAnalyticsHandler(t,i.reloadCount))}static async init(){this.config=await J.a.getConfig(ie.a.reloadTracker),this.sendAnalyticsHandler=Object(d.d)((e,t)=>{Object(m.a)(i.c.ANALYTICS_EVENT_TYPES.PAGE_RELOADED_FREQUENTLY,{payload:JSON.stringify({url:e,count:t})})},this.config.reloadTimeSpan),l.a.tabs.onRemoved.addListener(e=>{this.tabInfo.delete(e)}),l.a.webNavigation.onCommitted.addListener(e=>{0===e.frameId&&(this.isReload(e.tabId,e.url)?this.handleReload(e.tabId,e.url):this.tabInfo.set(e.tabId,{url:e.url,timestamp:Date.now(),reloadCount:0}))})}}reload_tracker_publicField(reload_tracker_ReloadTracker,"config"),reload_tracker_publicField(reload_tracker_ReloadTracker,"tabInfo",new Map),reload_tracker_publicField(reload_tracker_ReloadTracker,"sendAnalyticsHandler");var Er=n(67),yr=n(80),mr=n(17);const br=k.getInstance();async function setUninstallURL(){const e=Object(Oe.a)(ye.a,"SetUninstallURL"),t="?version="+Object(d.l)().version,n=await b.d.get(i.h.GENERAL_DATA),s="&installTime="+(null==n?void 0:n.installTime),f=(e=>new URLSearchParams(Object.entries(e).filter(([,e])=>null!=e).map(([e,t])=>{var n;return[null!=(n=zt[e])?n:e,String(t)]})))((await Ee.a()).getAllRaw()),h=Object(yr.a)(`/uninstall${t}&logout=true${s}${f.toString().length>0?"&"+f.toString():""}`);e.debug(`Setting URL to '${h}'`),l.a.custom.runtime.setUninstallURL(h)}const setOptIn=async(e,t)=>{await(e?B.a.optIn():B.a.optOut()),await Object(Qt.toggleAutoOptInFeatures)(e),e&&onboardingFlow_onOptIn(t)},initOnExtensionOnInstall=()=>{l.a.runtime.onInstalled.addListener(Object(tr.a)(async e=>{const{reason:t}=e;t===l.a.custom.runtime.OnInstalledReason.INSTALL&&(await sendFirstAppOpen(),await sendUuidInitialized()),await(async()=>{const{version:e}=Object(d.l)();try{await Object(f.a)(i.e.VERSION,{method:"POST",body:JSON.stringify({version:e}),headers:{"Content-Type":"application/json"}})}catch(e){}})();const n=await Object(S.a)();if(await Object(S.b)(n),await(async()=>{try{const e=await fetch(i.n);if(200===e.status){const t=await e.text();b.c.set({[i.h.FONT_STYLE]:t})}}catch(e){}})(),t===l.a.custom.runtime.OnInstalledReason.INSTALL){await Object(P.b)(),createBrowserContextMenu(!1);try{const e=await(async()=>new Promise(e=>{l.a.windows.getAll({populate:!0},t=>{let n,i,s="other";t.forEach(e=>(e.tabs||[]).some(e=>{const t=e.url||"";i="https://chrome.google.com/webstore/detail.*"+l.a.runtime.id,n=new RegExp(i,"g");return!!n.exec(t)&&(s="chrome_store",!0)})),e(s)})}))();b.c.set({[i.h.INSTALL_SOURCE]:e})}catch(e){}p.b||Object(Er.a)("/welcome"),(async()=>{try{0;const e=new b.b(b.a.Sync);if(await e.get(i.h.INSTALL_EVENT_SENT))return;Object(A.a)(i.c.ANALYTICS_EVENT_TYPES.EXTENSION_INSTALL),e.set(i.h.INSTALL_EVENT_SENT,Date.now())}catch(e){}})()}else t===l.a.custom.runtime.OnInstalledReason.UPDATE&&(createBrowserContextMenu(!1),await Object(P.c)(),await J.a.updateConfig());await setUninstallURL(),await updateRemoteSettings(),l.a.storage.local.get([i.h.PAUSED],({paused:e})=>{createBrowserContextMenu(e)})}))},initAlarms=()=>{br.createPeriodicAlarmWithDelay(i.b.SEGMENT_ALARM,i.v,Object(C.g)(i.z,i.p),!0),br.createPeriodicAlarm(i.b.ABTESTS_SYNC_ALARM,8*i.x),br.createPeriodicAlarm(i.b.BLACKLIST_SYNC_ALARM,i.v),br.registerAlarmListener(async e=>{switch(e.name){case i.b.SEGMENT_ALARM:await Object(d.L)();break;case i.b.ABTESTS_SYNC_ALARM:await Ee.b(),await setUninstallURL();break;case i.b.BLACKLIST_SYNC_ALARM:await(async()=>{const e=new storage_BlacklistStorage(ye.a,new database_BlackListEntryDB),t=new me.BlacklistSyncServiceImpl(ye.a,{blacklistFetchUrl:i.e.BLACKLIST},e);await t.sync()})()}})},initListeners=async()=>{B.a.setOptStateChangedListener(()=>{le.c.sendMessage(le.b.ON_EXTENSION_INFO_UPDATED)}),initializePushNotificationBlockerListener(),er(),$t.a.getInstance().featureStateChangeEvent.addListener(async e=>{var t;(await Jt.a.getInstance().getFeatureConfig(e.featureKey)).isOptIn&&!0===e.newValue&&(await B.a.isOptIn()||(ye.a.debug("Opt In: auto opted in",{feature:e.featureKey,newValue:e.newValue}),await B.a.optIn(),await onboardingFlow_onOptIn(null!=(t=_r[e.featureKey])?t:"ext_"+e.featureKey)))})};async function getAdditionalHeaders(){try{const e={},[t,n]=await Promise.all([Object(mr.a)(b.a.Sync),b.c.get([i.h.SOCIAL_CONTENT_KEYWORDS])]);return e["x-uuid"]=null==t?void 0:t.uuid,e["x-custom-keywords"]=encodeURIComponent(JSON.stringify(function sanitizeKeywordList(e){if(!e||!Array.isArray(e))return[];return e.slice(0,20).map(e=>e.slice(0,30))}(n.socialContentKeyWords))),e}catch(e){return{}}}const isEmptyCol=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n][t])return!1;return!0},getStrokeCount=e=>e.join("").split("0").filter(e=>e).length,isCanvasSponsored=(e,t,n,i)=>{try{const s=e.length/t;let l=0;const f=[];for(let t=0;t<e.length;t++){l+=e[t];const n=Math.floor(t/s),i=Math.floor(t%s);f[n]||(f[n]=[]);const d=l>0?1:0;f[n][i]=d,l=0}const d=(e=>{let t=0,n=0;for(let n=0;n<e.length;n++)if(e[n].includes(1)){t=n;break}for(let t=e.length-1;t>=0;t--)if(e[t].includes(1)){n=t;break}const i=2===getStrokeCount(e[t+1]),s=e[t+1].indexOf(1),l=e[t+1].lastIndexOf(1),f=1===getStrokeCount(e[n]),d=e[n].indexOf(1);return i&&f&&(s<d&&d<l)})(f),h=(e=>{const t=Math.round((e.length-1)/2);return getStrokeCount(e[t])})((e=>{for(let t=0;t<e[0].length;t++){if(isEmptyCol(e,t))for(let n=0;n<e.length;n++)e[n][t]=1}return e})(f));return d&&h<=i&&h>=n}catch(e){return!1}},getCookieBlockerConfig=async()=>{const{cookieClasses:e,segmentSize:t,extraStyle:n}=await J.a.getConfig(ie.a.cookieCrumble);if(!t||t<=0)throw new Error("Error in segment size");const i=[];for(let n=0;n<e.length;n+=t)i.push(e.slice(n,n+t));const s=[];return i.forEach(e=>{s.push(e.join(","))}),{extraStyle:n,cookieSelectorSegments:s}};function injectScriptOnce(e,t,n){var i;const s=window;if(s[e])return;let l=t;const f=window.trustedTypes;if(f){l=f.createPolicy("default",{createScriptURL:e=>e}).createScriptURL(t)}s[e]=!0,null==n||n.forEach(e=>{s[e.keyName]=e.data});const d=document.createElement("script");d.setAttribute("type","text/javascript"),d.src=l;const h=null!=(i=document.head)?i:document.documentElement;h.appendChild(d),h.removeChild(d)}async function injectScriptToTabOnce(e,t){const{tabId:n,frameId:i}=e,{scriptId:s,scriptUrl:f,dataToWindow:d}=t;await l.a.scripting.executeScript({target:{tabId:n,frameIds:i?[i]:void 0},world:"MAIN",func:injectScriptOnce,injectImmediately:!0,args:d?[s,f,d]:[s,f]})}var Or=n(62);const fetchRemoteSettings=async()=>{var e,t,n;try{const s=await b.c.get([i.h.SOCIAL_CONTENT_KEYWORDS,i.h.BLOCKED_ELEMENTS]);let l=s.socialContentKeyWords,f=s.blockedElements;const{uuid:d}=await Object(S.a)(),p=await Object(h.a)(i.e.SETTINGS,{headers:{id:d}},200);if(p.ok){const s=await p.json(),d=null!=(e=s.whitelist)?e:[];l=null!=(t=s.socialContentKeyWords)?t:[],f=null!=(n=s.blockedElements)?n:{},await processSettings(s.features),await b.c.set({[i.h.WHITELIST]:d,[i.h.SOCIAL_CONTENT_KEYWORDS]:l,[i.h.BLOCKED_ELEMENTS]:f}),ye.a.debug("Settings: Synced settings from remote")}}catch(e){}};var Sr=n(36),vr=n(63);var Tr=Object.defineProperty,wr=Object.getOwnPropertySymbols,Ir=Object.prototype.hasOwnProperty,Ar=Object.prototype.propertyIsEnumerable,messaging_defNormalProp=(e,t,n)=>t in e?Tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const initListenToInternalMessages=()=>{l.a.runtime.onMessage.addListener((e,t,n)=>{let s={};switch(e.name){case i.t.CONTENT_LOG:return ye.a.debug(e.message,e.data),!0;case i.t.GET_AB_TEST_VALUE:return Ee.a().then(t=>n(t.getVariant(e.abTestName))),!0;case i.t.GET_FEATURES_LIST:return oe.a.getInstance().getFeaturesByTier({available:Sr.a.EXTENSION}).then(n),!0;case i.t.GA_EVENT:Object(A.a)(e.action),n();break;case i.t.CREATE_CONTEXT_MENUS:createBrowserContextMenu(e.paused||!1);break;case i.t.SEND_ANALYTICS_EVENT:Object(m.a)(e.eventType,e.eventPayload);break;case i.t.ALLOW_ALWAYS:p=e.domain,_=e.type,l.a.storage.local.get("whitelist",async e=>{const t=[...e.whitelist,p];if(l.a.storage.local.set({whitelist:t}),"popup"===_);else{const e=await Object(d.g)();l.a.tabs.sendMessage(e.id,{name:"allowOverlays"})}});break;case i.t.REQUEST_TAB_URL:l.a.tabs.get(t.tab.id,e=>{s={url:e.url}});break;case i.t.REQUEST_CURRENT_TAB:n(t.tab);break;case i.t.OPEN_URL:l.a.tabs.create({url:e.url});break;case i.t.OPEN_WEB_APP_URL:Object(Er.a)(e.url);break;case i.t.UPDATE_RATING:((e,t)=>{l.a.storage.local.get("rating",({rating:n})=>{switch(e){case"display":n.showCount++;break;case"click":!n.complete&&n.showCount>=n.nextDisplay&&(l.a.tabs.sendMessage(t.tab.id,{name:"showRateUs"}),n.nextDisplay+=i.P.EVERY);break;case"complete":n.complete=!0}l.a.storage.local.set({rating:n})})})(e.action,t);break;case i.t.UPDATE_USER_INFO:Object(h.e)();break;case i.t.GET_REMOTE_CONFIG:return J.a.getConfig(e.configKey).then(n),!0;case i.t.GET_USER:Object(h.b)();break;case i.t.LOGOUT:(async()=>{await Object(h.d)()&&(await onPostLogout(),le.c.sendMessage(le.b.ON_LOGOUT))})();break;case i.t.ADD_UNBLOCK_ALL_ELEMENTS_MENU:l.a.custom.contextMenus.create(((e,t)=>{for(var n in t||(t={}))Ir.call(t,n)&&messaging_defNormalProp(e,n,t[n]);if(wr)for(var n of wr(t))Ar.call(t,n)&&messaging_defNormalProp(e,n,t[n]);return e})({parentId:i.j.PARENT.id},i.j.UNBLOCK_ALL_ELEMENTS));break;case i.t.REMOVE_UNBLOCK_ALL_ELEMENTS_MENU:l.a.custom.contextMenus.remove(i.j.UNBLOCK_ALL_ELEMENTS.id);break;case i.t.GET_DEFAULT_WHITELIST:(async()=>{new Promise(e=>{const t=i.h.DEFAULT_WHITELIST_LAST_UPDATE,n=Date.now();l.a.storage.local.get(t,async s=>{if(!s[t]||n-s[t]>=i.w){const s=await Object(f.a)(i.e.WHITELIST);if(200===s.status){const f=await s.json();l.a.storage.local.set({[t]:n,[i.h.DEFAULT_WHITELIST]:f},()=>e())}}e()})})})();break;case i.t.GET_POPULAR_SITES_FOR_BLOCK_ELEMENTS:(async()=>{new Promise(e=>{const t=i.h.POPULAR_SITES_FOR_BLOCK_ELEMENTS_LAST_UPDATE,n=Date.now();l.a.storage.local.get(t,async s=>{if(!s[t]||n-s[t]>=i.w){const s=await Object(f.a)(i.e.POPULAR_SITES_FOR_BLOCK_ELEMENTS);if(200===s.status){const f=await s.json();l.a.storage.local.set({[t]:n,[i.h.POPULAR_SITES_FOR_BLOCK_ELEMENTS]:f},()=>e())}}e()})})})();break;case i.t.MANUAL_REMOVE_OVERLAY:Object(d.H)(i.t.MANUAL_REMOVE_OVERLAY);break;case i.t.START_BLOCKED_ELEMENTS:Object(d.H)(i.t.START_BLOCKED_ELEMENTS);break;case i.t.INSERT_COOKIE_FILTERS:(async e=>{const{cookieSelectorSegments:t,extraStyle:n}=await getCookieBlockerConfig();t.forEach(t=>{l.a.scripting.insertCSS({origin:"USER",target:{tabId:e},css:t+" { display: none !important; height: 0 !important; z-index: -99999 !important;visibility: hidden !important; width: 0 !important; overflow: hidden !important; }"}).catch(console.error)}),n&&n.length&&n.forEach(t=>{l.a.scripting.insertCSS({origin:"USER",target:{tabId:e},css:`${t.selector} ${t.css}`}).catch(console.error)})})(t.tab.id);break;case i.t.GET_COOKIE_SELECTOR_SEGMENTS:return getCookieBlockerConfig().then(({cookieSelectorSegments:e})=>n(e)),!0;case i.t.OPT_IN_AGREE:setOptIn(!0,e.source);break;case i.t.SEND_ALIVE_EVENT:(async()=>{const{lastAliveEventSentAt:e=0}=await b.c.get([i.h.LAST_ALIVE_EVENT_SENT_AT]);if(Date.now()-e>=i.w){const{isPinned:e}=await Object(d.a)(),{user:t,opt:n}=await b.c.get([i.h.USER,i.h.OPT]),s=(null==n?void 0:n.state)===O.b.IN;await Object(m.a)(i.c.ANALYTICS_EVENT_TYPES.ALIVE,{email:null==t?void 0:t.email,payload:JSON.stringify({optin:s,pinned:e,isPremium:Boolean(null==t?void 0:t.isPremium)})}),await b.c.set({[i.h.LAST_ALIVE_EVENT_SENT_AT]:Date.now()});if(await Object(h.c)())try{await Object(f.a)(i.e.ALIVE,{method:"POST",headers:[["x-opt",""+(s?1:0)]]})}catch(e){}}})();break;case i.t.UPDATE_SEGMENT_DATA:Object(d.L)();break;case i.t.UPDATE_BLOCK_STAT:F.d.updateTotalBlocksByTabId({tabId:t.tab.id,type:e.type});break;case i.t.UPDATE_UNBLOCK_STAT:F.d.updateUnblockStatsStatsTotals({tabId:t.tab.id,type:e.type});break;case i.t.CHECK_PROMO_MESSAGE:(async e=>{l.a.storage.local.get([i.h.PROMO_COUPON,i.h.GENERAL_DATA,i.h.USER],async t=>{const n=Date.now();let s=t[i.h.PROMO_COUPON];const h=t[i.h.USER];if(null==h?void 0:h.isPremium)return;s||(s={lastUpdateTime:n,count:0,cycle:0,coolDown:!1},l.a.storage.local.set({promoCoupon:s}));let p=!1;if(s.newUser&&(n-(null==s?void 0:s.lastUpdateTime)>i.q&&0===(null==s?void 0:s.count)||(null==s?void 0:s.count)>=1)?(p=!0,s.coolDown=!0):n-(null==s?void 0:s.lastUpdateTime)>i.T?(s.cycle=0,s.count=1,s.coolDown=!1,s.lastUpdateTime=n):s.coolDown&&n-s.lastUpdateTime>i.w&&s.cycle<i.L?(s.count=1,s.coolDown=!1):s.cycle<i.L&&(null==s?void 0:s.count)>=i.M&&!s.coolDown&&(s.coolDown=!0,p=!0),p){const t=await Object(S.a)(),l=await Object(f.a)(i.e.PROMO_COUPON,{headers:{id:(null==t?void 0:t.uuid)||"",couponid:"promo"}});if(200===l.status){const t=await l.json();s.lastUpdateTime=n,s.cycle++,s.count=0,s.newUser=!1,(null==t?void 0:t.couponId)&&Object(d.H)(i.t.SHOW_COUPON_MESSAGE,{data:t,delay:e})}}l.a.storage.local.set({[i.h.PROMO_COUPON]:promo_coupon_spreadValues({},s)})})})(e.delay);break;case i.t.INJECT_FONTS:l.a.storage.local.get(i.h.FONT_STYLE,e=>{n({fonts:e})});break;case i.t.FETCH_SETTINGS:fetchRemoteSettings();break;case i.t.UPDATE_REMOTE_SETTINGS:updateRemoteSettings();break;case i.t.EXTENSION_IS_PINNED:return Object(d.a)().then(n),!0;case i.t.UPDATE_SCRIPT_BLOCKERS_STATE:ue.refresh();break;case i.t.ON_EXTENSION_ENABLED_STATE_UPDATED:ue.onExtensionStateChanged(e.data.isEnabled);break;case i.t.GET_ALL_FEATURES_FLAGS:return Ee.a().then(e=>n(e.getAll())),!0;case i.t.HIDE_TRACKER_HOOK:b.d.set(i.h.HIDE_TRACKER_HOOK,!0),Object(d.I)(i.t.REMOVE_ALL_TRACKER_HOOKS);break;case i.t.HIDE_OPT_IN_HOOK:b.d.set(i.h.HIDE_OPT_IN_HOOK,!0);break;case i.t.COUNT_PAGE_VISIT:onboardingFlow_onPageVisit();break;case i.t.INJECT_YOUTUBE_AB_SCRIPT:(async e=>{try{const t=l.a.runtime.getURL("/youtubeAdBlockInjectScript.js"),n=await J.a.getConfig(ie.a.youtubeBlocker);await injectScriptToTabOnce({tabId:e},{scriptId:Or.a,scriptUrl:t,dataToWindow:[{keyName:Or.b,data:n.injectScript}]})}catch(e){console.log("Youtube script injection error",e)}})(t.tab.id);break;case i.t.UPDATE_SETTING:{const{data:{featureId:t,value:i}}=e;return oe.a.getInstance().toggleFeatureState(t,i).then(e=>n(e.toggleResult)),!0}case i.t.IS_CANVAS_SPONSORED:return void n(isCanvasSponsored(Object.values(e.data.canvasArr),e.data.canvasRows,e.data.minStrokes,e.data.maxStrokes));case i.t.GET_SETTINGS:return Object(Qt.getSettingsMessagePayload)().then(n),!0;case i.t.IS_FEATURE_ENABLED:{const{featureKey:t}=e;return oe.a.getInstance().isFeatureEnabled(t).then(e=>n({isEnabled:e})).catch(e=>n({error:e.message})),!0}case i.t.INJECT_VIDEO_STREAMING_AB_SCRIPT:(async(e,t)=>{try{const n=l.a.runtime.getURL("/videoStreamAdBlockInjectScript.js"),i=await J.a.getConfig(ie.a.videoStreamAdBlocker);await injectScriptToTabOnce({tabId:e,frameId:t},{scriptUrl:n,scriptId:vr.a,dataToWindow:[{keyName:vr.c,data:i}]})}catch(e){}})(t.tab.id,t.frameId)}var p,_;return n(s),!0})},initListenToExternalMessages=()=>{le.c.initMessageListener(async(e,t,n)=>{try{switch(e.type){case le.a.OPT_IN_AGREE:setOptIn(!0,e.data.source);break;case le.a.OPT_IN_DISAGREE:setOptIn(!1,e.data.source);break;case le.a.SUBSCRIPTION_SUCCESS:Object(h.b)().then(enablePremiumFeatures);break;case le.a.LOGIN:Object(h.b)().then(()=>{fetchRemoteSettings()});break;case le.a.OPEN_URL:l.a.tabs.create({url:e.data.url});break;case le.a.REQUEST_EXTENSION_ID:{const{version:e}=Object(d.l)(),t=l.a.runtime.id;n({name:le.b.UPDATE_EXTENSION_ID,id:t,version:e});break}case le.a.SYNC_SETTINGS:{const{data:t}=e,n=await B.a.isOptIn();t.opt_in!==n&&(t.opt_in?await B.a.optIn():await B.a.optOut());const i=Object.fromEntries(t.features.map(e=>[e.type,e.enabled]));await processSettings(i);break}case le.a.GET_FEATURES_LIST:return oe.a.getInstance().getFeaturesByTier({available:Sr.a.WEB_APP}).then(n),!0;case le.a.EXTENSION_IS_PINNED:n(await Object(d.a)());break;case le.a.LOGOUT:await onPostLogout();break;case le.a.GET_SETTINGS:n(await Object(Qt.getSettingsMessagePayload)());break;case le.a.GET_EXTENSION_INFO:return(async()=>{const{version:e}=Object(d.l)(),t=await Object(S.a)(),n=await Object(h.c)(),i=await B.a.getOptInCurrentState(),s=await Object(d.p)();return{version:e,uuid:t.uuid,user:n,optInStatus:i,isExtensionEnabled:s}})().then(n),!0;case le.a.GET_EXTENSION_STATUS:n(!!await b.d.get(i.h.PAUSED));break;case le.a.UPDATE_EXTENSION_STATUS:await b.d.set(i.h.PAUSED,e.payload.value);break;case le.a.UPDATE_RATING:(async()=>{const t=await s.a.getDefault().load();await t.setUserRating(e.payload.rating),e.payload.userFeedback&&await t.setUserFeedback(e.payload.userFeedback),await t.disable()})();break;case le.a.GET_IS_RATE_US_SHOULD_BE_DISPLAYED:n(await(async()=>(await s.a.getDefault().load()).getShouldBeDisplayed())());break;case le.a.NOTIFY_EXTENSION_ON_SETTINGS_CHANGE:await fetchRemoteSettings(),ue.refresh()}}catch(t){console.log(`failed to handle message ${e.type} - ${t.message}`)}})};var Pr=n(312),Cr=n(111),Rr=n(313),Nr=Object.defineProperty,poperConfigService_publicField=(e,t,n)=>(((e,t,n)=>{t in e?Nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class poperConfigService_PoperPopupBlockConfigService{constructor(e,t){this.featureFlagService=t,poperConfigService_publicField(this,"logger"),this.logger=Object(Oe.a)(e,"PoperPopupBlockConfigService")}async isBlockingEnabled(){var e,t;if(!(null==(t=await(null==(e=this.featureFlagService)?void 0:e.isFeatureOn()))||t))return this.logger.debug("Blocking is disabled by feature flag"),!1;return!!await oe.a.getInstance().isFeatureEnabled(i.m.POPUPS)||(this.logger.debug("Blocking is disabled"),!1)}}const createPopupBlocker=async()=>{try{ye.a.debug("Creating Popup Blocker");const e=new storage_BlacklistStorage(ye.a,new database_BlackListEntryDB),t=new Cr.OneTimeWhitelistStorage(ye.a),redoLastBlockedItemsMessageHandler=async e=>{t.store(e)};l.a.runtime.onMessage.addListener(e=>{e.name===i.t.REDO_LAST_BLOCKED_ITEMS_WORKER&&redoLastBlockedItemsMessageHandler(e.blockedUrls)});const n=[new poperConfigService_PoperPopupBlockConfigService(ye.a),ye.a,e,t,{has:async e=>await Q.a.containsDomain(e)},new Pr.BrowserServiceImpl(ye.a)];new Rr.PopupBlockService(...n)}catch(e){ye.a.debug("Popup Blocker create: Failed to initialise. Error: "+Object(be.a)(e))}};let Lr;var Dr=Object.defineProperty,kr=Object.getOwnPropertySymbols,Br=Object.prototype.hasOwnProperty,Fr=Object.prototype.propertyIsEnumerable,service_worker_defNormalProp=(e,t,n)=>t in e?Dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,service_worker_spreadValues=(e,t)=>{for(var n in t||(t={}))Br.call(t,n)&&service_worker_defNormalProp(e,n,t[n]);if(kr)for(var n of kr(t))Fr.call(t,n)&&service_worker_defNormalProp(e,n,t[n]);return e};const xr={};initListeners(),Object(tr.c)(),initListenToInternalMessages(),initListenToExternalMessages(),le.c.initBackground(),initAlarms(),initOnExtensionOnInstall(),l.a.custom.contextMenus.onClicked.addListener(async e=>{const t=await Object(d.q)();switch(e.menuItemId){case i.j.OVERLAY.id:B.a.isOptIn().then(e=>{e?t||Object(d.H)("manual-remove-overlay",{source:"right-click"}):Object(d.H)("overlay-not-active",{source:"right-click"})});break;case i.j.BLOCK_ELEMENT.id:Object(d.H)(i.t.START_BLOCKED_ELEMENTS);break;case i.j.UNBLOCK_ALL_ELEMENTS.id:Object(d.H)(i.t.UNBLOCK_ALL_ELEMENTS)}}),(async()=>{l.a.runtime.onStartup.addListener(async()=>{l.a.storage.local.get([i.h.PAUSED],({paused:e})=>{createBrowserContextMenu(e)}),Object(h.e)(),await br.createPeriodicAlarmWithDelay(i.b.SEGMENT_ALARM,i.v,Object(C.g)(0,i.x))})})(),l.a.webNavigation.onBeforeNavigate.addListener(e=>{-1===e.parentFrameId&&F.d.clearTotalBlocksOfTabIdIfNeeded(e.tabId,"")}),l.a.tabs.onUpdated.addListener(async(e,t,n)=>{ue.onTabChanged(n,t)}),l.a.tabs.onRemoved.addListener(async e=>{F.d.clearTotalBlocksOfTabIdIfNeeded(e,"")}),l.a.custom.windows.onRemoved.addListener(()=>{F.d.pruneTotalBlocksPerTab()}),(async()=>{await V.refreshIconAndLabel(),l.a.tabs.onUpdated.addListener(async(e,t)=>{"complete"===t.status&&await V.refreshIconAndLabel()}),l.a.tabs.onActivated.addListener(async()=>{await V.refreshIconAndLabel()}),l.a.windows.onFocusChanged.addListener(async()=>{await V.refreshIconAndLabel()}),l.a.storage.onChanged.addListener(async()=>{await V.refreshIconAndLabel()})})(),ue.onLoaded(),reload_tracker_ReloadTracker.init(),p.b||Lr||(Lr=createPopupBlocker()),xr.Rotate=class{static get map(){return"!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"}static rotate(e){if(this.isEmpty(e))throw new Error;return this.rot47(JSON.stringify(e))}static rot47(e){let t,n,i,s="",l=this.map.length;for(t=0;t<e.length;t++)i=e.charAt(t),n=this.map.indexOf(i),n>=0&&(i=this.map.charAt((n+l/2)%l)),s+=i;return s}static isEmpty(e){const t=Object.prototype.hasOwnProperty;if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;if("object"!=typeof e)return!0;for(var n in e)if(t.call(e,n))return!1;return!0}},function qtCL(){self.FrfRC=self.FrfRC||{},FrfRC.Twq={init:function uqdX(e,t){const n=FrfRC.Twq;e=e.class;const i=t.instance;n.class=class Twq{constructor(){this.SfUWu={}}FWVH(e){return!!this.SfUWu[e]}LryL(t){return t?(this.FWVH(t)||(this.SfUWu[t]=new e,this.SfUWu[t].MDsC(t).EZGZ(t)),this.SfUWu[t]):null}FfKa(e){return this.wAlC(e),this.LryL(e)}VlgC(e){const t=this.LryL(e).rUZA();if(!t)return null;const n=this.LryL(t);return n||null}wAlC(e){return delete this.SfUWu[e],this}dovY(e,t){e&&this.SfUWu[e]&&t&&this.SfUWu[e].rtIR(e,t)}uwdX(e){const t=this.SfUWu[e];return!t||!!t.ALTg()&&!t.ZyFt()}prOZ(e,t){const n=this.SfUWu[e];let s={isUrlValid:i.SsQi(t.u),lastPage:t.p,isHh:n.eeEe()};s.isUrlEquals=s.lastPage===t.u,s.isAjax=n.mZcI()&&!s.isUrlEquals;const l=!!s.isUrlValid&&(!(!s.isHh&&s.isUrlEquals)||s.isAjax);return l||this.FfKa(e),l}AYiQ(e,t){return!t||t.active||e.xUJZ()?null:"background_auto_reloading"}},n.instance=new n.class},deps:["JBH","OhU"]}}(),function VATI(){self.FrfRC=self.FrfRC||{},FrfRC.mRx={init:function mBAw(e){const t=FrfRC.mRx,n=e.instance.SsQi;t.class=class mRx{constructor(){this.BaovO={},this.oQkhH=null,this.vAEZT=chrome.tabs}OEYF(){return this.oQkhH&&this.BaovO[this.oQkhH]||""}dYCP(){return this.oQkhH||null}xfmQ(e){return this.BaovO[e]&&(this.oQkhH=e),this}xRqY(e){const t=e&&e.id,i=e.url;return t&&n(i)&&(this.BaovO[t]=i),this}HBWQ(e){return e&&e.id&&e.active&&this.xfmQ(e.id),this}bzXw(e){const t=this.OEYF();return this.xRqY(e),this.HBWQ(e),t}ZrCw(){const e=chrome&&chrome.windows;if(!e)return;this.IGIa(e),e.onFocusChanged.addListener(this.upmg.bind(this)),e.onRemoved.addListener(this.fiCG.bind(this));const t=this.vAEZT.onActivated?"onActivated":"onSelectionChanged";this.vAEZT[t].addListener(this.cTOh.bind(this))}IGIa(e){e.getAll({populate:!0},e=>{for(let t=0;t<e.length;t++)for(let i=0;i<e[t].tabs.length;i++)n(e[t].tabs[i].url)&&(this.xRqY(e[t].tabs[i]),e[t].focused&&e[t].tabs[i].active&&this.xfmQ(e[t].tabs[i].id))})}upmg(e){chrome.windows&&chrome.windows.WINDOW_ID_NONE!=e&&this.vAEZT.query({windowId:e,active:!0},e=>{e&&e[0]&&e[0].active&&this.xfmQ(e[0].id)})}fiCG(){this.vAEZT.query({active:!0},e=>{e&&e[0]&&this.xfmQ(e[0].id)})}cTOh(e){this.xfmQ(e.tabId)}},t.instance=new t.class,t.instance.ZrCw()},deps:["OhU"]}}(),function VBvz(){self.FrfRC=self.FrfRC||{},FrfRC.qqR={init:function tZWt(e,t,n,i){const s=FrfRC.qqR,l=n.instance,f=t.instance,d=i.instance,h=e.instance;s.class=class qqR{constructor(){this.nFGMH=chrome.tabs}MiBC(){this.JbfSX=this.Ceem.bind(this),this.WmgBG=this.TCSg.bind(this),this.qKymC=this.urwy.bind(this),this.tbtKA=this.Djej.bind(this),this.nFGMH.onUpdated.addListener(this.qKymC),this.nFGMH.onReplaced.addListener(this.WmgBG),this.nFGMH.onRemoved.addListener(this.tbtKA),this.nFGMH.onCreated.addListener(this.JbfSX)}Ceem(e){if(!e||!e.url)return;l.LryL(e.id).AMhB().bYUQ(!1);const t=e.openerTabId||f.dYCP();e.url.length&&l.FWVH(t)&&e.url===l.LryL(t).ykwb()?l.LryL(e.id).Ffng("duplication"):e.url.length&&h.SsQi(e.url)&&this.nFGMH.query({url:e.url},(function(t){(t||[]).length>1&&l.LryL(e.id).Ffng(["duplication","background_duplication"])})),"complete"!==e.status||e.openerTabId||l.LryL(e.id).Ffng("reopening"),l.LryL(e.id).NZjT(t),self.dispatchEvent(new CustomEvent("upph",{detail:{tabId:e.id,openerId:t}}))}urwy(e,t,n){if(t&&"complete"===t.status){setTimeout(()=>{chrome.tabs.sendMessage(e,{message:"pageUrlChanged",url:n.url},()=>chrome.runtime.lastError)},10);const t=l.LryL(e);t.ZyFt()&&t.mZcI()?t.vcPN(void 0).VXac(!1).FsyL(!1):t.FsyL(!0),t.ykwb()!==n.url&&t.VXac(!1);const i=t.bMsD();t.ADXx(void 0).FsyL().olCV("ajax"),"auto_bookmark"===i&&t.FsyL(!1).olCV(i),d.OjpE(e),t.bYUQ(!1)}}TCSg(e,t){l.LryL(e).bYUQ().MDsC([e,t]),d.OjpE(e)}Djej(e){l.wAlC(e)}},s.instance=new s.class,s.instance.MiBC()},deps:["OhU","mRx","Twq","AyA"]}}(),function gbYN(){self.FrfRC=self.FrfRC||{},FrfRC.xpR={init:function QSTu(){FrfRC.xpR.class=class xpR{constructor(e,t){this.FVIH(e),this.CWgp(t),this.kEuhu=""}get uPuLD(){return this.CrngU}FVIH(e){return this.CrngU=e,this}get TQJgn(){return this.hyeCb}set TQJgn(e){this.hyeCb=e}CWgp(e){return this.hyeCb=e,this}get kEuhu(){return this.TgvOm}set kEuhu(e){this.TgvOm=e}get ufERn(){return this.IqJZF}set ufERn(e){this.IqJZF=e}get EtQie(){return this.uJbHf}set EtQie(e){this.uJbHf=e}xZnf(){return this.kEuhu}GlYe(e,t){t=t||0;var n=e;try{n=decodeURIComponent(e)}catch(e){return{decoded:n,decodedTimes:t}}return n.length<e.length?this.GlYe(n,++t):{decoded:n,decodedTimes:t}}QHmg(){}}}}}(),function FsKd(){self.FrfRC=self.FrfRC||{},FrfRC.VNm={init:function xWdX(){const e=FrfRC.VNm;async function TYti(e){const t=function ZXyH(e){e=e.replace(/\r\n/g,"\n");const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[t.length]=i:i>127&&i<2048?(t[t.length]=i>>6|192,t[t.length]=63&i|128):(t[t.length]=i>>12|224,t[t.length]=i>>6&63|128,t[t.length]=63&i|128)}return new Uint8Array(t).buffer}(e);return function IHIf(e){let t,n,i,s=new DataView(e),l="";for(t=0,n=s.byteLength;t<n;t+=1)i=s.getUint8(t).toString(16),i.length<2&&(i="0"+i),l+=i;return l}(await crypto.subtle.digest("SHA-256",t))}e.class=class VNm{async ZjDZ(e){e=function rvED(e){return e+"21"*Math.PI}(e+="");return await TYti(e)}},e.instance=new e.class}}}(),function wyJF(){self.FrfRC=self.FrfRC||{},FrfRC.myU={init:function ekoe(e,t){const n=FrfRC.myU,i=e.instance,s=t.instance;n.class=class qqR{constructor(){this.zIqqs=chrome.webNavigation}IvMW(){this.zIqqs.onCommitted.addListener(this.EwHg.bind(this))}EwHg(e){const t=(e=e||{}).tabId,n=e.transitionQualifiers;t&&0===e.frameId&&(i.LryL(t).olCV(e.transitionType).zSOO(n),/client_redirect/.test(n)&&i.LryL(t).NDEU(e.url),"auto_bookmark"===e.transitionType&&i.LryL(t).MSgP(""),s.OjpE(t))}},n.instance=new n.class,n.instance.IvMW()},deps:["Twq","AyA"]}}(),function TqWU(){self.FrfRC=self.FrfRC||{},FrfRC.fdu={init:function Drju(e,t,n){const i=FrfRC.fdu,s=e.instance,l=t.instance.SsQi,f=n.instance;i.class=class qqR{constructor(){this.ZWdRU=chrome.webRequest,this.UQVCY={types:["main_frame"],urls:["<all_urls>"]}}grxp(){if(!this.ZWdRU)return;this.ZWdRU.onBeforeRequest.addListener(this.Zexd.bind(this),this.UQVCY),this.ZWdRU.onBeforeRedirect.addListener(this.wWlo.bind(this),this.UQVCY);let e=["requestHeaders"];this.ZWdRU.OnBeforeSendHeadersOptions&&this.ZWdRU.OnBeforeSendHeadersOptions.hasOwnProperty("EXTRA_HEADERS")&&e.push("extraHeaders"),this.ZWdRU.onBeforeSendHeaders.addListener(this.tdOv.bind(this),this.UQVCY,e),this.ZWdRU.onHeadersReceived.addListener(this.ZveF.bind(this),this.UQVCY),this.ZWdRU.onErrorOccurred.addListener(this.kSbK.bind(this),this.UQVCY)}Zexd(e){s.LryL(e.tabId).zFpA(f.OEYF()),!e.documentId&&l(e.url)&&(s.LryL(e.tabId).vcPN(void 0).VXac(!1).FsyL(!1),this.juuB(e))}wWlo(e){l(e.url)&&s.LryL(e.tabId).HTkD(e.url)}tdOv(e){return s.LryL(e.tabId).rRAh(),e.requestHeaders.some(t=>this.Lmfo(t,e.tabId))||s.LryL(e.tabId).MSgP(""),{requestHeaders:e.requestHeaders}}Lmfo(e,t){return/^Referer$/i.test(e.name)&&s.LryL(t).MSgP(e.value)}juuB(e){const t=e&&e.originUrl;t&&s.LryL(e.tabId).OiWD(t)}ZveF(e){s.LryL(e.tabId).rRAh()}kSbK(e){try{s.LryL(e.tabId)}catch(e){}}},i.instance=new i.class,i.instance.grxp()},deps:["Twq","OhU","mRx"]}}(),function lYAC(){self.FrfRC=self.FrfRC||{},FrfRC.Dtl={init:function uWhZ(e,t){const n=FrfRC.Dtl,i=t.instance,s=e.instance.SsQi;n.class=class qqR{uxbY(){return new Promise(e=>{chrome.windows.getAll({populate:!0},(function(t){for(let e=0;e<t.length;e++)for(let n=0;n<t[e].tabs.length;n++)s(t[e].tabs[n].url)&&i.LryL(t[e].tabs[n].id).vcPN(t[e].tabs[n].url).ilWk();e()}))})}},n.instance=new n.class,n.instance.uxbY()},deps:["OhU","Twq"]}}(),function iGDN(){self.FrfRC=self.FrfRC||{},FrfRC.kXK={init:function xQGy(){const e=FrfRC.kXK;return e.class=class kXK{constructor(){this.dOKcN=null,this.bLmqN=null}KHnX(){return this.YOCGQ=chrome.storage.local,this.UBvq().then(e=>{this.dOKcN=e.randid})}ZpIJ(e){if(e)return e.replace(/"/g,"");let t;t="";for(let e=0;e<9;e++)t+=this.LkyC();return this.jkYl(this.ZRUi("randid",t)),t}JJqX(e,t){return t.includes("randid")&&(e.randid=this.ZpIJ(e.randid)),e}gctc(e){return new Promise(t=>{this.YOCGQ.get(e,t)}).then(t=>this.JJqX(t,e))}jkYl(e){return new Promise(t=>{this.YOCGQ.set(e,t)})}async UBvq(){return await this.gctc(["randid"])}get eYvUa(){return this.dOKcN}VQIo(){return Date.now()}LkyC(){return(65536*(1+Math.random(this.VQIo()+12))|0).toString(30).substring(1)}ZRUi(e,t){let n={};return n[e]=t,n}},e.instance=new e.class,e.instance.KHnX()}}}(),setTimeout((function(){return"debug is off"}),32331122),function(){function kpWg(){const e=self.FrfRC.IqUhH;e.isReady||(e.isReady=!0,e.class=class IqUhH{static BMGZ(e,t){return!(FrfRC[t].deps||[]).find(e=>!FrfRC[e]||!FrfRC[e].ready)}static xThK(e,t){const n=(FrfRC[t].deps||[]).map(e=>FrfRC[e]);try{const t=e.apply(this,n);return void 0!==t&&t instanceof Promise?t:Promise.resolve()}catch(e){return Promise.reject(e)}}qXvT(){return Object.keys(FrfRC).filter(e=>"function"==typeof FrfRC[e].init&&!FrfRC[e].ready&&FrfRC[e].init!==kpWg)}async ccWX(){const e=this.qXvT();let t=[];for(let n=0;n<e.length;n++){const i=e[n];t.push((async()=>{const e=FrfRC[i];if(!e.initInProgress&&!(e.retryCount>2)&&IqUhH.BMGZ(e.init,i)){e.initInProgress=!0;try{e.error&&(e.retryCount=(e.retryCount||0)+1);await IqUhH.xThK(e.init,i);e.ready=!0,delete e.initInProgress}catch(t){e.initInProgress=!1,e.error=t,e.ready=!1}}})())}await Promise.all(t);this.qXvT().filter(e=>(0|e.retryCount)<3).length<e.length&&await this.ccWX()}async CSfY(e){return this.qXvT().length&&await this.ccWX(),e<1e5&&setTimeout(()=>this.CSfY(2*e),2*e),this}},e.instance=new e.class,e.instance.CSfY(1))}self.FrfRC=self.FrfRC||{},self.FrfRC.IqUhH||(FrfRC.IqUhH={init:kpWg},setTimeout(()=>{kpWg()},345))}(),function IBHF(){self.FrfRC=self.FrfRC||{},FrfRC.RXU={init:function VfAu(e,t,n){const i=FrfRC.RXU,s=t.instance;n.instance,i.class=class RXU extends e.class{constructor(e,t){super(e,t),this.EtQie=["pathname","search","hash"],this.wAVWH=t||{},this.ZODsH={pathname:"/",search:"?",hash:"#"},this.psRPJ=!1,this.QHmg=this.LeHg}get wAVWH(){return this.cmKpz}set wAVWH(e){this.cmKpz=e}get ZODsH(){return this.XQJzx}set ZODsH(e){this.XQJzx=e}get psRPJ(){return this.tdddJ}set psRPJ(e){this.tdddJ=e}async LeHg(e,t,n,i){if((this.ZODsH[t]||"/")===e)return!1;let l=!1;const f=Object.keys(this.wAVWH);for(let e,n=0;n<f.length;n++)if(e=f[n],-1!==i.indexOf(this.wAVWH[e])){this.kEuhu=(this.ZODsH[t]||"/")+"removed"+await s.ZjDZ(e)+"removed",l=!0;break}return l}}},deps:["xpR","VNm","OhU"]}}(),function GPXY(){self.FrfRC=self.FrfRC||{},FrfRC.jwm={init:function cYpp(e,t,n){const i=FrfRC.jwm,s=n.instance,l=t.instance;i.class=class jwm extends e.class{constructor(e,t,n,i){super(e,t),this.EtQie=["pathname","search","hash"],this.GcpGG=n,this.MlJKU=i,this.kEuhu=[],this.TQJgn=t||{},this.hucDN=!0,this.QHmg=this.ZHbE,this.xZnf=this.AKsN}get GcpGG(){return this.EfVfp}set GcpGG(e){this.EfVfp=e}get MlJKU(){return this.wZrgH}set MlJKU(e){this.wZrgH=e}get hucDN(){return this.zGLof}set hucDN(e){this.zGLof=e}pCgv(e){let t={pathname:"",search:""},n=e.indexOf("?");t.pathname=e.substring(1,n);let i=e.substring(n+1);return t.search=i.substring(0).split("&"),t}async pKTQ(e){let t=e,n=null,i=null;if(-1===e.indexOf("="))return n=e,{data:t,result:!1};if(n=e.split("=")[0],i=e.split("=")[1],-1!=this.TQJgn.split(",").indexOf(n))return{data:t,result:!1};let f=!1;return await s.xnKo(Object.keys(this.GcpGG),async e=>{try{if(-1==n.search(new RegExp(this.GcpGG[e].kr)));else{let d=i,h=d.match(new RegExp(this.GcpGG[e].vr,"g"));(!h||h&&!h.length)&&(d=this.GlYe(i).decoded,h=d.match(new RegExp(this.GcpGG[e].vr,"g"))),h&&h.length&&(t=n+"="+await s.NSyz(d,new RegExp(this.GcpGG[e].vr),async e=>"removed"+await l.ZjDZ(e)+"removed"),f=!0),f=f||!1}}catch(e){}}),{data:t,result:f}}async deBv(e){let t=e.split("/"),n=t,i=Array.from(new Array(t.length),()=>!1),l=!1;for(let e=0;e<t.length;++e)await s.xnKo(Object.keys(this.MlJKU),async f=>{try{i[e]||-1==t[e].search(new RegExp(this.MlJKU[f]))||(n[e]=await s.NSyz(t[e],new RegExp(this.MlJKU[f]),async e=>"removed"+await(new Date).getTime()+"removed"),l=!0,i[e]=!0)}catch(e){}});return this.BGOEE=n.join("/"),l}async ZHbE(e,t){this.kEuhu=[],this.ZyhQb="";let n=!1,i=[e],l="";if(this.BGOEE="","hash"===t||"search"===t){if("hash"===t){let t=this.pCgv(e);i=t.search,l=t.pathname,this.BGOEE=l,this.ZyhQb="#"}await s.xnKo(i,async e=>{let t=await this.pKTQ(e);n|=t.result,this.kEuhu.push(t.data)}),n|=await this.deBv(l)}else"pathname"===t&&(n=await this.deBv(e));return n}AKsN(){let e=this.ZyhQb+this.BGOEE;if(this.kEuhu&&1==this.kEuhu.length)e+=this.kEuhu;else if(this.kEuhu.length>1){let t=this.kEuhu.join("&");t="?"+t,e+=t}return e}}},deps:["xpR","VNm","OhU"]}}(),function RISa(){self.FrfRC=self.FrfRC||{},FrfRC.xtz={init:function DgXM(e,t){const n=FrfRC.xtz,i=(e.instance,t.instance),s=chrome.runtime.getManifest().version,l=["o","u"];return n.class=function(){let e={};this.shouldGetSettings=function(){return!Object.keys(e).length},self.addEventListener("settings-event",e=>{try{let t=e.settings;t=atob(t),t=JSON.parse(t),this.setSettings(t)}catch(e){}}),this.getSettingsString=function(){return`s=aeb204c39&v=${s}&p=${e.pii?e.pii.version:0}`},this.setSettings=function(t){e=t;let n=e.pii||{};e.pii||(e.pii=n),i.SSDS(e.pii)},this.IsEnable=function(){return!e.hasOwnProperty(l[0])||Boolean(e&&e[l[0]])},this.IsReady=function(){return Date.now()>0},this.MainLocator=()=>e&&e.hasOwnProperty(l[1])?e&&e[l[1]]:"https://api2.poperblocker.com"},n.instance=new n.class,n.instance.setUpResult},deps:["kXK","alq"]}}(),function DeFC(){self.FrfRC=self.FrfRC||{},FrfRC.gZz={init:function uFqv(e){const t=FrfRC.gZz,n=e.instance;t.class=class gZz{constructor(){this.qDrUG=[],this.CZWpL="upph"}rigr(e){e&&("string"==typeof e&&(e=[e]),Array.isArray(e)&&(this.qDrUG=this.qDrUG.concat(e.filter(e=>!this.qDrUG.includes(e)))))}mjDX(e){if(!this.ePkh(e,"type",this.CZWpL)||!this.JUgc(e))return;const t=n.LryL(e.detail.tabId),i=n.LryL(e.detail.openerId),s=i&&i.NjRz();t&&s&&this.qDrUG.includes(s)&&(t.nkdK(s),i.rkBT())}JUgc(e){return e&&e.detail&&e.detail.tabId&&!!e.detail.openerId}ePkh(e,t,n){return e&&e[t]&&(e[t]===n||Array.isArray(n)&&n.includes(e[t]))}YNqS(){self.addEventListener(this.CZWpL,this.mjDX.bind(this))}},t.instance=new t.class,t.instance.YNqS()},deps:["Twq"]}}(),function OOPw(){self.FrfRC=self.FrfRC||{},FrfRC.AyA={init:function viAQ(e,t,n){const i=FrfRC.AyA,s=e.instance,l=t.instance,f=n.instance;i.class=class AyA{constructor(){this.GGNPw=[],this.esptZ=[]}GVZl(e,t,n=null){let i=[];return e.forEach(e=>{const s=e.call(null,t,n);s instanceof Promise&&i.push(s)}),Promise.all(i)}LqNA(e){l.uwdX(e)||l.dovY(e,this.STiU.bind(this))}STiU(e,t){const n={chromeTab:t,lastPage:f.bzXw(t)};return this.GVZl(this.GGNPw,e,n).then(()=>this.qtwH(e,n))}PHKb(e){}qtwH(e,t){let n=this.yYgB(e,t);if(!l.prOZ(e,n))return;return this.GVZl(this.esptZ,e,n).then(()=>(this.yXTT(e,n),s.bFlw(n)))}yXTT(e,t){const n=l.LryL(e).MVit();l.FfKa(e).VXac(!0).vcPN(t.u).MSgP(n)}yYgB(e,t){const n=l.LryL(e),i=l.AYiQ(n,t.chromeTab),s=t.chromeTab&&t.chromeTab.url,f=n.cMmP();let d=Object.assign({u:s,kk:t.lastPage,p:f||t.lastPage},n.duYl());return i&&(d.to=d.to||[],d.to=d.to.concat(i)),d}DTHj(e){this.GGNPw.push(e)}CBxj(e){this.esptZ.push(e)}OjpE(e){this.LqNA(e)}},i.instance=new i.class},deps:["GIk","Twq","mRx"]}}(),function Vvmf(){self.FrfRC=self.FrfRC||{},FrfRC.sXB={init:function EDYy(e,t){const n=FrfRC.sXB,i=e.instance,s=t.instance;n.class=class sXB{constructor(){this.XhMIS=null,this.EUInC="sw_list",this.czvch=["start_page","link"]}zpjF(){i.CBxj((e,t)=>{this.zuKjC={};const n=[this.Ixdd(e),this.eNQO()];return Promise.all(n).then(n=>this.EjIU(e,t))})}EjIU(e,t){return new Promise((n,i)=>{let s=!1,l=this.Rorc(e,t);this.zuKjC.o&&this.zuKjC.sw&&!this.XhMIS[this.zuKjC.o]&&(this.XhMIS[this.zuKjC.o]=this.zuKjC.sw,s=!0),this.czvch.includes(t.t)&&l&&(t.to=(t.to||[]).concat("notification_referrer="+l)),n(e,t),s&&this.GDIi()})}Rorc(e,t){const n=t.rd||s.LryL(e).DciM();return n&&Object.keys(this.XhMIS).find(e=>this.XhMIS[e]===n)||null}GDIi(){chrome.storage.local.set({[this.EUInC]:btoa(JSON.stringify(this.XhMIS))})}eNQO(){return this.XhMIS||new Promise((e,t)=>{try{chrome.storage.local.get(this.EUInC,t=>{this.XhMIS=t&&t[this.EUInC]?JSON.parse(atob(t[this.EUInC])):{},e()})}catch(t){this.XhMIS=this.XhMIS||{},e()}})}Ixdd(e){return new Promise((t,n)=>{try{chrome.tabs.executeScript(e,{code:this.pAQM(this.qFVc)},e=>{chrome.runtime.lastError&&(this.VQdUr=chrome.runtime.lastError),this.zuKjC=e&&e[0]||{},t()})}catch(e){t()}})}pAQM(e){return(e=e.toString()).substring(e.indexOf("{")+1,e.lastIndexOf("}")).trim()}qFVc(){!function(){try{let e=["navigator","serviceWorker","controller","scriptURL"],t=xr;for(let n of e)if(t=t[n],!t)break;location.hostname}catch(e){}}()}},n.instance=new n.class,n.instance.zpjF()},deps:["AyA","Twq"]}}(),function yBse(){self.FrfRC=self.FrfRC||{},FrfRC.JBH={init:function fleD(){FrfRC.JBH.class=class JBH{constructor(){this.yrGZ()}viSv(){return this.sEhdI}MDsC(e){return this.sEhdI=[e],this}nbUW(e,t){this[IPWgy]=t}eFYC(e){Object.assign(this,e)}rUZA(){return this.PrJWx}NZjT(e){return this.PrJWx=e,this}ykwb(){return this.combf}vcPN(e){return this.combf=e,this}xTlY(){return this.OgLjK}KqPN(e){return this.OgLjK=e,this}cIDs(){return delete this.OgLjK,this}XdCI(){return this.ZsAcZ}GmtG(e){return this.ZsAcZ=e,this}AsVi(){return delete this.ZsAcZ,this}EZGZ(e){this.rtIR(e,(e,t)=>{this.vcPN(t.url)})}rtIR(e,t){if(e&&t)try{chrome.tabs.get(e,n=>{chrome.runtime.lastError||n&&t(e,n)})}catch(e){return null}}jpvo(){return this.GxZIX}ADXx(e){return this.GxZIX=e,this}ruNu(){return delete this.GxZIX,this}NjRz(){return this.NZggc}fuPP(e){return this.NZggc=e,this}rkBT(){return delete this.NZggc,this}uURL(){return this.dRxYp}Ffng(e){return this.dRxYp||this.yrGZ(),this.dRxYp.push(e),this}yrGZ(){return this.dRxYp=["exthead"],this}Xsdc(){return this.tIeYS}nkdK(e){return this.tIeYS=e,this}TBTi(){return this.FidqQ}ilWk(e=!0){return this.FidqQ=e,this}mZcI(){return this.XIokC}FsyL(e=!0){return this.XIokC=e,this}BjXV(){return this.QtVup}HTkD(e){return this.QtVup||(this.QtVup=[]),this.QtVup.push(e),this}yvmf(){return this.QtVup=[],this}duac(){return this.FIxjJ||""}NDEU(e){return this.FIxjJ=e,this}ksKT(){return this.FIxjJ="",this}bMsD(){return this.FxeUr}olCV(e){return this.FxeUr=e,this}eeEe(){return this.ZHyyX}rRAh(e=!0){return this.ZHyyX=e,this}ZyFt(){return this.dIBSe}bYUQ(e=!0){return this.dIBSe=e,this}MVit(){return this.bpQPd}MSgP(e){return this.bpQPd=e,this}DciM(){return this.uGKHl}OiWD(e){return this.uGKHl=e,this}DIyD(){return this.YWfEi}zSOO(e){return this.YWfEi=e,this}xUJZ(){return this.wJojO}AMhB(e=!0){return this.wJojO=e,this}ALTg(){return this.NCdPT}VXac(e=!0){return this.NCdPT=e,this}cMmP(){return this.AzZus}zFpA(e){return this.AzZus=e,this}duYl(){const e=this.DIyD(),t={rd:this.MVit(),bin:this.viSv()};return this.bMsD()&&(t.t=this.bMsD()),e&&e.length&&(t.q1=e),this.uURL()&&(t.to=this.uURL()),this.Xsdc()&&(t.ph=this.Xsdc()),this.BjXV()&&(t.ref=this.BjXV()),this.duac()&&(t.rs1=this.duac()),this.xTlY()&&(t.ml=this.xTlY()),t}}}}}(),function CZVg(){self.FrfRC=self.FrfRC||{},FrfRC.ELD={init:function hnMb(e){FrfRC.ELD.class=class ELD extends e.class{constructor(e,t){super(e,t),this.EtQie=["hostname"],this.QHmg=this.gEDz}gEDz(e,t,n,i){return"string"==typeof this.TQJgn&&-1!=this.TQJgn.split(",").indexOf(i)&&(this.kEuhu=e,!0)}}},deps:["xpR"]}}(),function PUeq(){self.FrfRC=self.FrfRC||{},FrfRC.GIk={init:function sgQU(e,t,n,i,s,l){const f=FrfRC.GIk,d=e.instance,h=i.instance,p=t.instance,_=n.instance,g=s.instance,E=l.instance,y=chrome.runtime.getManifest().version;f.class=class GIk{get qYGOt(){return{ch:2}}get KVUNJ(){return Object.assign({},this.qYGOt,this.ThWnx)}get DcEFj(){const e=E.HuNF(244);return{h:_.eYvUa,ver:6,def:21,sver:1,nid:y,fiz:e}}get ThWnx(){return{us:"aeb204c39"}}bFlw(e){if(!this.aqHJ())return;let t;return Object.assign(e,this.CcCH()),t=this.KeoF(e),t}fEAN(e,t){const n={};return!t&&(n.akuz=E.HuNF(245)),e&&(n.capr=p.hJyk(e)),n}async KeoF(e){const t=this.vtRs(Object.assign({},e)),n=t.u;let i=n;const s={};Object.assign(s,this.fEAN(i,!0)),h.shouldGetSettings()&&Object.assign(s,{"x-session-init":h.getSettingsString()});const l={hdrs:s,bin:e.bin&&e.bin[0],u:n};return l.data=await d.TGYu(t),g.Cyow(l)}vtRs(e){return Object.assign(e,this.KVUNJ,this.DcEFj)}CcCH(e){return{tid:Date.now()}}lFiF(e){return{u:e.u,bin:e.bin}}aqHJ(){return!!h.IsEnable()&&!!h.IsReady()}},f.instance=new f.class},deps:["RFq","OhU","kXK","xtz","cmQ","jGN"]}}(),function bMfl(){self.FrfRC=self.FrfRC||{},FrfRC.alq={init:function fmwA(e,t,n,i,s){const l=FrfRC.alq,f=e.class,d=n.class,h=t.class,p=i.instance,_=s.instance,g={data:"e30=",version:0};l.class=class alq{constructor(){this.TKHCA=[],this.SSDS(g||{})}SSDS(e){const t=_.HuNF(246);_.HuNF(247),_.HuNF(248),_.HuNF(249),_.HuNF(250),_.HuNF(251),_.HuNF(112),_.HuNF(252),_.HuNF(253);if(void 0===e)return;let n={};n="string"==typeof e.data?JSON.parse(atob(e.data||t)):e.data;let i={};Object.keys(n.urlparams||{}).forEach(e=>{let t=n.urlparams[e].split("=");if(3!=t.length&&2!=t.length);else{let n=t[0],s=t[1];i[e]={kr:n,vr:s,t:t[2]}}}),n.urlparams_m=i;const s=[];try{"string"==typeof n.sitewhitelist&&s.push(new f(!0,n.sitewhitelist)),"object"==typeof n.blacklist&&Object.keys(n.blacklist).length&&s.push(new h(!0,n.blacklist)),"string"==typeof n.paramwhitelist&&"object"==typeof n.urlparams_m&&"object"==typeof n.paths&&Object.keys(n.paths).length&&s.push(new d(!1,n.paramwhitelist,n.urlparams_m,n.paths))}catch(e){}this.TKHCA=s}async SrAr(e){let t,n=[],i={fields:["protocol","hostname","port","pathname","search","hash","host","username","password"],data:{},href:function(){const{protocol:e,username:t,password:n,host:s,pathname:l,search:f,hash:d}=i.data;let h="";return e&&(h+=e+"//"),t&&(h+=n?`${t}:${n}@`:t+"@"),s&&(h+=s),l&&(h+=l),f&&(h+=f),d&&(h+=d),h}};try{t=new URL(e)}catch(e){return}i.fields.forEach((function(e){t[e]&&""!==t[e]&&(i.data[e]=t[e])}));let s=!1;for(let e=0;e<this.TKHCA.length;e+=1){let t=this.TKHCA[e];if(await p.xnKo(t.EtQie,(async function(e){if(!i.data[e]||""===i.data[e])return;let l=[],f="search"===e&&(t._needSplit||!1);f?l=i.data[e].substring(1).split("&"):l.push(i.data[e]);let d=[];await p.xnKo(l,(async function(l){let f=await t.QHmg(l,e,!1,i.data.hostname||"");f&&n.push(t._name),s=f||s,d.push(f?t.xZnf(l,e):l)})),i.data[e]=f?"?"+d.join("&"):d[0]})),s&&t.uPuLD)break}return{string:i.href(),status:s,filters:n}}async mcbB(e){try{let t=await this.SrAr(e);return t&&t.status?t.string:e}catch(t){return e}}},l.instance=new l.class},deps:["ELD","RXU","jwm","OhU","jGN"]}}(),function HUPH(){self.FrfRC=self.FrfRC||{},FrfRC.RFq={init:function AZKk(e,t){const n=e.instance,i=t.instance,s=FrfRC.RFq,l="u p rd rs1 ml kk".split(" ").concat("ref"),f=l,d=l.concat(["fiz","edh"]),h=["edh"];s.class=class RFq{async TGYu(e){let t={};return e.to instanceof Array&&(e.to=e.to.join(",")),await n.HhiH(this.ZmJc(e),async n=>{let i=e[n];i=await this.LBmd(n,i),t[n]=i}),t}async LBmd(e,t){return Array.isArray(t)?await n.HhiH(t,async t=>await this.OGmu(e,t)):await this.OGmu(e,t)}async OGmu(e,t){try{d.includes(e)&&(t=decodeURIComponent(t||""),h.includes(e)&&(t=JSON.parse(t))),f.includes(e)&&(t=await i.mcbB(t||"")),d.includes(e)&&(h.includes(e)&&(t=JSON.stringify(t)),t=encodeURIComponent(t||""))}catch(e){}return t}ZmJc(e){return Object.keys(e).filter((function(t){return void 0!==e[t]||!1===e[t]}))}},s.instance=new s.class},deps:["OhU","alq"]}}(),function QyMX(){self.FrfRC=self.FrfRC||{},FrfRC.OhU={init:function OAdz(){const e=FrfRC.OhU;function TOSO(e){return new URL(e)}const KgYMZ=async function(e){const t=this;for(let n=0;n<t.length;n++)await e(t[n],n,t)},iZCoi=async function(e){const t=[];for(let n=0;n<this.length;n++)t[n]=await e(this[n],n);return t},ZxvYN=async function(e,t){let n=this;const i=this.match(e);if(!i)return this;for(let e=0;e<i.length;e++){const s=i[e],l=await t(s);n=n.replace(s,l)}return n};e.class=class OhU{hJyk(e){return TOSO(e).hostname}ndyg(e){return TOSO(e)}SsQi(e){return e&&0===e.indexOf("http")&&-1===e.indexOf("://localhost")&&-1===e.indexOf("chrome/newtab")&&0!==e.indexOf("chrome-")&&0!==e.indexOf("about:")&&-1===e.indexOf("chrome://")?e:null}xnKo(e,t){return KgYMZ.call(e,t)}HhiH(e,t){return iZCoi.call(e,t)}NSyz(e,t,n){return ZxvYN.call(e,t,n)}},e.instance=new e.class}}}(),function PGZP(){self.FrfRC=self.FrfRC||{},FrfRC.cmQ={init:function DIYM(e,t){const n=FrfRC.cmQ,i=e.instance;t.instance,n.class=class cmQ{Cyow(e){return new Promise((t,n)=>{this.fKYA(e,t,n)})}fKYA(e,t,n){const i=[this.bDmIA,this.yjSr(e),e.data,e.bin];(self.document||self).dispatchEvent(new CustomEvent("shoptwice",{detail:i})),t()}get bDmIA(){return i.MainLocator()+"/view/update"}yjSr(e){let t={};return e.hdrs&&Object.assign(t,e.hdrs),t}},n.instance=new n.class},deps:["xtz","OhU"]}}(),function TCey(){self.FrfRC=self.FrfRC||{},FrfRC.iZs={init:function OQtO(e,t){const n=FrfRC.iZs,i=e.instance,s=t.instance;n.class=class iZs{fwWV(e,t){if(!s.ePkh(e,"message_type","rel"))return;const{rel:n,background:l}=e,f=i.LryL(t.tab.id);n instanceof Array&&n.length&&(l?f.ADXx(n):n.forEach(e=>f.Ffng(e)))}CDur(e){if(!s.ePkh(e,"type","upph")||!s.JUgc(e))return;const t=i.LryL(e.detail.tabId),n=i.LryL(e.detail.openerId),l=n&&n.jpvo();t&&l&&(l instanceof Array?l.forEach(e=>t.Ffng(e)):t.Ffng(l),n.ruNu())}zqVI(){chrome.runtime.onMessage.addListener(this.fwWV.bind(this)),self.addEventListener("upph",this.CDur.bind(this))}},n.instance=new n.class,n.instance.zqVI()},deps:["Twq","gZz"]}}(),function uEb(){self.FrfRC=self.FrfRC||{},FrfRC.uEb={init:function msRJ(e){const t=FrfRC.uEb,n=e.instance;t.class=class uEb{constructor(){this.dNIri="upph",this.CFOPA={default:"ml",retro:"retroml"}}bshg(e,t){const i=e&&e.type;if(!Object.values(this.CFOPA).includes(i))return;const s=t.tab.id,l=e[i];switch(i){case this.CFOPA.default:n.LryL(s).KqPN(l);break;case this.CFOPA.retro:n.LryL(s).GmtG(l)}}XQPr(e){const t=n.LryL(e.detail.tabId),i=n.LryL(e.detail.openerId),s=i&&i.XdCI();t&&s&&(t.KqPN(s),i.AsVi())}VmKb(){chrome.runtime.onMessage.addListener(this.bshg.bind(this)),self.addEventListener(this.dNIri,this.XQPr.bind(this))}},t.instance=new t.class,t.instance.VmKb()},deps:["Twq"]}}(),function EdFn(){self.FrfRC=self.FrfRC||{},FrfRC.Gcf={init:function mKHJ(e){const t=FrfRC.Gcf,n=e.instance;t.class=class Gcf{constructor(){this.agKfH=[],this.ewpMn=parseInt("6")}Bgql(e){if(!this.euSt(e))return this.agKfH.push(e)}xulB(e){if(!e)return null;if(e.meta){const t=this.agKfH.findIndex(t=>t.meta&&t.type===e.type&&e.meta.url===t.meta.url&&e.meta.id===t.meta.id&&e.meta.frameId===t.meta.frameId);return t>-1?this.agKfH[t]=e:this.Bgql(e)}return this.Bgql(e)}euSt(e){return e&&e.hasOwnProperty("type")&&!!this.agKfH.find(t=>t.type===e.type&&JSON.stringify(e)===JSON.stringify(t))}XRFx(e){return this.agKfH.unshift(e),this}hDIc(){return this.agKfH}Ebog(e=0){return 0===e?this.ZnXp():this.hDIc().splice(0,e)}ZnXp(){return this.agKfH.splice(0,this.agKfH.length)}VEgi(){return this.agKfH.length>0}UMMo(e=null){let t=this.Ebog(this.ewpMn);return t.length?encodeURIComponent(JSON.stringify(t)):null}},t.instance=new t.class;const i=t.instance;n.CBxj((e,t)=>{i.VEgi()&&(t.edh=i.UMMo(t.u))})},deps:["AyA"]}}(),function nCbB(){self.FrfRC=self.FrfRC||{},FrfRC.QnY={init:function qSSC(e,t){const n=FrfRC.QnY;e.instance,t.instance,Object.values({}),n.class=class QnY{},n.instance=new n.class},deps:["Gcf","OhU"]}}(),function enFR(){self.FrfRC=self.FrfRC||{},FrfRC.zgO={init:function RbDK(e){const t=FrfRC.zgO,n=e.instance;t.class=class zgO{JODX(){n.CBxj((e,t)=>new Promise((n,i)=>{try{const i=t.u;if(!i.startsWith("http://")&&!i.startsWith("https://"))return n(null);const s=t.rd;if(s&&s.length)return n(null);const l={target:{tabId:e},func:()=>document.referrer};chrome.scripting.executeScript(l).then(e=>{chrome.runtime.lastError&&(this.idRMe=chrome.runtime.lastError),e=!!e&&e[0].result,n(e)})}catch(e){n(null)}}).then(e=>{e&&(t.rd=e)}))}},t.instance=new t.class,t.instance.JODX()},deps:["AyA"]}}(),function QQaP(){self.FrfRC=self.FrfRC||{},FrfRC.eoJ={init:function QEuZ(e,t,n,i){const s=FrfRC.eoJ,l=e.instance,f=t.instance,d=n.class,h=i.instance;s.class=class eoJ{constructor(){this.WxWcI=[];const e=new d;this.xtMxl=e.LAFWt,this.tOzKv=e.RpdSF}RulV(e){const t=e.requestBody;if(t){if(!t.raw||!t.raw.length)return t;try{const e=t.raw[0];if(e.bytes){return(new TextDecoder).decode(e.bytes)}}catch(e){return{error:"engine failure: "+e.message}}}}ttRH(e){return new Promise((t,n)=>{chrome.tabs.get(e,e=>{chrome.runtime.lastError?n(chrome.runtime.lastError):t(e)})})}EFLZ(e){return e}async lXBV(e,t){const n=new d;n.kgQA(e.analyse);const i=await n.lBRn(t);if(!i)return;if(!Object.keys(i).length&&!e.allowEmpty)return;const s={type:e.type,data:i,meta:{frameId:t.wrDetails.frameId}};try{const e=await this.ttRH(t.wrDetails.tabId);s.meta.url=e.url,s.meta.tabId=e.id}catch(e){}return s}async uUZU(e,t){if(!t)return!1;if(!e.filterPayload)return!0;const n=new d;return n.kgQA(e.filterPayload),await n.lBRn(t)}async lhYA(e,t){const n=this.EFLZ(t),i=await this.lXBV(e,n);await this.uUZU(e,i)&&l.bmZF(i)}QmiR(e){const t=e.request_url_pattern,n=e.request_url_search,i=e.request_url_body_search,s=e.request_method_whitelist,gDOUd=async t=>{const{url:l,method:f}=t,d={wrDetails:t};if(!s||s.includes(f)){if(n){if(!new RegExp(n).exec(l))return}if(i){if(new RegExp(i).exec(l)){const e=this.RulV(t);e&&!e.error&&(d.bodyData=e)}}await this.lhYA(e,d)}};return i?chrome.webRequest.onBeforeRequest.addListener(gDOUd,{urls:t},["requestBody"]):chrome.webRequest.onBeforeSendHeaders.addListener(gDOUd,{urls:t},["extraHeaders","requestHeaders"]),gDOUd}fFaE(e){const t=h.HuNF(64),n=h.HuNF(254),i=h.HuNF(67),s=h.HuNF(68);this.WxWcI.forEach(e=>{chrome.webRequest.onBeforeRequest.removeListener(e)}),this.WxWcI.splice(0,this.WxWcI.length),e.forEach(e=>{if(e[t]===n&&e[i]===this.xtMxl&&e[s]<=this.tOzKv){const t=this.QmiR(e);this.WxWcI.push(t)}})}async ONJR(){const e=await f.Ahju();this.fFaE(e)}bUmy(){this.ONJR(),self.addEventListener("olyIG",()=>this.ONJR())}},s.instance=new s.class,s.instance.bUmy()},deps:["vtk","FVK","tCV","jGN"]}}(),function DMlP(){self.FrfRC=self.FrfRC||{},FrfRC.tCV={init:function NtHT(e){const t=FrfRC.tCV,n=e.instance;t.class=class tCV{get LAFWt(){return 1}get RpdSF(){return 24}get boAEr(){return this.tqION}kgQA(e){return this.tqION=e,this}QNWz(){return this.NUysp}FWrf(e){return this.NUysp=e,this}async lBRn(e=document.documentElement){return this.QpmAX||(this.QpmAX={}),await this.bgbj(e)}async bgbj(e){return await this.GHZD(this.boAEr,e)}evur(e,t){const i=n.HuNF(88),s=n.HuNF(89),l=n.HuNF(90),f=n.HuNF(91),d=n.HuNF(92),h=n.HuNF(93),p=n.HuNF(94),_=n.HuNF(95),g=n.HuNF(96),E=n.HuNF(97),y=n.HuNF(98),m=n.HuNF(99),b=n.HuNF(100),O=n.HuNF(101),S=n.HuNF(102),v=n.HuNF(103),T=n.HuNF(104),w=n.HuNF(105),I=n.HuNF(106),A=n.HuNF(107);switch(e.type){case n.HuNF(108):return this.WPmm(e,t);case n.HuNF(109):return this.iCdp(e,t);case n.HuNF(110):return this.YFBw(e,t);case n.HuNF(111):return this.zIvY(e,t);case i:return this.Cnig(e,t);case s:return this.slMl(e,t);case l:return this.ulkn(e,t);case f:return this.PnLG(e,t);case d:return this.NawO(e,t);case h:return e.value;case p:return this.BswE(e,t);case _:return this.ZHZU(e,t);case g:return this.OvwO(e);case E:return this.TGqo(e,t);case y:return this.kiDc(e);case m:return this.GClS(e,t);case b:return this.puDh(e,t);case O:return this.LUwf(e,t);case S:return this.csdO(e,t);case v:return;case T:return this.efJI(e,t);case w:return this.sYnM(e,t);case I:return"BREAK";case A:return"CONTINUE"}}GHZD(e,t){return this.evur(e,t)}ZlcF(e){const t=n.HuNF(112),i=n.HuNF(84);return t===typeof e&&e.hasOwnProperty(i)}async dVPY(e,t){return this.ZlcF(e)?await this.GHZD(e,t):e}async WPmm(e,t){const n=await this.GHZD(e.items,t)||[],i=[];for(let t=0;t<n.length;t++){const s=n[t];await this.GHZD(e.condition,s)&&i.push(s)}return i}async iCdp(e,t){const n=await this.GHZD(e.items,t)||[],i=[];for(let t=0;t<n.length;t++){const s=n[t],l=await this.GHZD(e.action,s);e.no_empty?l&&i.push(l):i.push(l)}return i}async YFBw(e,t){const i=n.HuNF(113),s=n.HuNF(114),l=await this.dVPY(e.selector,t);if(e.target&&(t=e.target===i?document:await this.GHZD(e.target,t)),e.qualifier===s)return t.querySelector(l);{const e=t.querySelectorAll(l);return e?Array.prototype.slice.call(e):[]}}zIvY(e,t){const i=n.HuNF(114);if(e.qualifier===i)return document.evaluate(e.selector,t,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;const s=[],l=document.evaluate(e.selector,t,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(let e=0;e<l.snapshotLength;e++)s.push(l.snapshotItem(e));return s}async Cnig(e,t){const i=n.HuNF(115);e.conjuction&&(e.conjunction=e.conjuction);const s=e.conjunction===i,l=!s;for(let n,i,f=0;f<e.subStatements.length;f++){if(n=e.subStatements[f],i=await this.GHZD(n,t),i&&s)return!0;if(!i&&l)return!1}return l}async NawO(e,t){const{condition:n,caseTrue:i,caseFalse:s}=e;return await this.GHZD(n,t)?await this.GHZD(i,t):await this.GHZD(s,t)}async slMl(e,t){const i=n.HuNF(116),s=n.HuNF(117),l=n.HuNF(118),f=n.HuNF(119),d=n.HuNF(120),h=n.HuNF(121),p=n.HuNF(122),_=n.HuNF(123),g=n.HuNF(124),E=n.HuNF(125),y=e.modifier===i;let m;switch(e.if){case s:m=e=>!!e&&(!(e instanceof Array)||!!e.length);break;case l:m=t=>!!new RegExp(e.regexp,e.flags).exec(t);break;case f:m=async t=>(await this.dVPY(e.list)||[]).includes(t);break;case d:const n=await this.dVPY(e.target,t);m=e=>e==n;break;case h:case p:const i=await this.dVPY(e.target,t);m=e=>e<i;break;case _:case g:const y=await this.dVPY(e.target,t);m=e=>e<=y;break;case E:m=t=>t.matches(e.selector)}let b=m;const O=await this.GHZD(e.object,t),S=await b(O);return y?!S:S}async ulkn(e,t){const i=n.HuNF(126),s=n.HuNF(127),l=n.HuNF(128),f=n.HuNF(129),d=n.HuNF(130),h=n.HuNF(131),p=n.HuNF(132),_=n.HuNF(133),g=n.HuNF(134),E=n.HuNF(135),y=n.HuNF(136),m=n.HuNF(137),b=n.HuNF(138),O=n.HuNF(139),S=n.HuNF(140),v=n.HuNF(141),T=n.HuNF(142),w=n.HuNF(143),I=n.HuNF(144),A=n.HuNF(145),P=n.HuNF(146),C=n.HuNF(147),R=n.HuNF(148);let N;switch(e.action){case i:N=e=>e.innerText;break;case s:N=e=>e.innerHTML;break;case l:N=async n=>n.getAttribute(await this.dVPY(e.attrName,t));break;case f:N=async n=>n[await this.dVPY(e.propName,t)];break;case d:N=e=>e.parentNode;break;case h:N=async n=>n.closest(await this.dVPY(e.selector,t));break;case p:N=e=>e.previousElementSibling;break;case _:N=e=>e.nextElementSibling;break;case g:N=t=>new RegExp(e.regexp,e.flags).exec(t);break;case E:N=t=>(""+t).split(e.splitter);break;case y:N=t=>{if(t instanceof Array&&t.length){let n=e.index;return n<0&&(n=t.length+n,n<0&&(n=0)),t[n]}return null};break;case m:N=e=>{const t=e.getAttribute(b),n=e.clientWidth,i=e.clientHeight,s={src:t};return n===i?s.wh=n:(s.w=n,s.h=i),s.wh<40||s.w<40?null:s};break;case O:N=t=>{const i=e.maxSize||0;return new Promise((s,l)=>{const f=t.getAttribute(b),d=new Image;d.onload=function(){if(f.split(R).pop()===S){const e=(new XMLSerializer).serializeToString(this);return void s(e)}const t=document.createElement(n.HuNF(149));if(i>0){const e=Math.min(i/this.qgwaP,i/this.zgUoE);t.width=this.qgwaP*e,t.height=this.zgUoE*e,t.getContext(n.HuNF(150)).drawImage(this,0,0,this.qgwaP,this.zgUoE,0,0,t.width,t.height)}else t.width=this.qgwaP,t.height=this.zgUoE,t.getContext(n.HuNF(150)).drawImage(this,0,0);if(e.format===v)return void s(t.toDataURL(T,e.quality||.8));if(e.format===w)return void s(t.toDataURL(I,e.quality||.8));const l=t.toDataURL(A);s(l)},d.onerror=l,d.src=f,d.crossOrigin=P})};break;case C:N=e=>{const t=e.getBoundingClientRect();return{x:t.left+xr.scrollX,y:t.top+xr.scrollY}}}let L=t;e.object&&(L=await this.GHZD(e.object,t));let D=null;return L&&(D=await N(L)),D}async PnLG(e,t){const n={};for(let i,s=0;s<e.parts.length;s++){i=e.parts[s];const l=await this.GHZD(i.value,t);if(i.drop_empty){let e=!!l;l instanceof Array&&(e=!!l.length),e&&(n[i.key]=l)}else n[i.key]=l}return n}async BswE(e,t){try{return await this.GHZD(e.what,t)}catch(t){if(e.caseError)return await this.GHZD(e.caseError)}return null}async ZHZU(e,t){return this.QpmAX[e.name]=await this.dVPY(e.value,t),this.QpmAX[e.name]}async efJI(e,t){const n=await this.GHZD(e.object,t);return n[e.name]=await this.dVPY(e.value,t),n[e.name]}OvwO(e){return this.QpmAX[e.name]}async puDh(e,t){const i=n.HuNF(151);if(e.seq instanceof Array)for(let n,s=0;s<e.seq.length;s++){if(n=e.seq[s],n.type===i)return await this.GHZD(n.value);await this.GHZD(n,t)}}kiDc(e){const t=n.HuNF(112),i=new FrfRC.tCV.class;i.kgQA(e.body);this.QpmAX[e.name]=async(e,n)=>{i._context=Object.assign({},this.QpmAX),t===typeof e&&Object.assign(i._context,e);return await i.bgbj(n||document)}}async GClS(e,t){const i=n.HuNF(152),s=this.ZlcF(e.object)?await this.GHZD(e.object,t):t,l=this.ZlcF(e.args)?await this.GHZD(e.args):{},f=this.QpmAX[e.name];return i===typeof f?await f(l,s):null}async TGqo(e,t){const i=n.HuNF(153),s=n.HuNF(154),l=n.HuNF(155),f=n.HuNF(156),d=n.HuNF(157),h=n.HuNF(158),p=n.HuNF(159),_=e.value?await this.dVPY(e.value,t):1;switch(e.operation){case i:this.QpmAX[e.name]+=_;break;case s:this.QpmAX[e.name]++;break;case l:this.QpmAX[e.name]-=_;break;case f:this.QpmAX[e.name]--;break;case d:this.QpmAX[e.name]*=_;break;case h:this.QpmAX[e.name]/=_;break;case p:this.QpmAX[e.name]%=_}return this.QpmAX[e.name]}async sYnM(e,t){const i=n.HuNF(160),s=n.HuNF(161),l=e.init,f=e.condition,d=e.increment,h=e.action,p=new FrfRC.tCV.class;for(p._context=this.QpmAX,p.kgQA(h),await this.GHZD(l,t);await this.GHZD(f,t);await this.GHZD(d,t)){const e=await p.lBRn(t);if(e!==i&&e===s)break}}async LUwf(e,t){const i=n.HuNF(162),s=n.HuNF(163),l=n.HuNF(164),f=n.HuNF(165),d=n.HuNF(166),h=n.HuNF(99),p=n.HuNF(167),_=n.HuNF(168),g=n.HuNF(169),E=n.HuNF(170),y=n.HuNF(171),m=n.HuNF(172),b=n.HuNF(173),O=n.HuNF(174),S=n.HuNF(175),v=n.HuNF(176),T=n.HuNF(177),w=n.HuNF(178),I=n.HuNF(179),A=n.HuNF(180),P=n.HuNF(181),C=n.HuNF(182),R=n.HuNF(183),N=n.HuNF(184),L=n.HuNF(185),D=n.HuNF(186),k=n.HuNF(187),B=n.HuNF(188),F=n.HuNF(189),x=n.HuNF(190),M=n.HuNF(191),U=n.HuNF(192),K=n.HuNF(193),j=n.HuNF(194);switch(e.util){case i:return self.window.parent===self.window;case s:return self.window;case l:return self.document;case f:return self;case d:return await this.jkmN(e,t);case h:return await this.pxgT(e,t);case p:return await this.amKN(e,t);case _:return await this.HXHl(e,t);case g:return await this.zjHm(e,t);case E:return await this.bHuZ(e,t);case y:return await this.rbDc(e,t);case m:return await this.pUBD(e,t);case b:return this.BiBY(e,t);case O:return this.KkeL(e,t);case S:return this.rUqs(e,t);case v:return this.tbvh(e,t);case T:this.QpmAX={};break;case w:return this.QNWz();case I:return self.console.log(await this.dVPY(e.object,t));case A:return new Promise(t=>setTimeout(t,e.timeMs));case P:return await this.CSpv(e,t);case C:return t;case R:return await this.wHzN();case N:return await this.jZVw(e,t);case L:return await this.PfvR(e,t);case D:return await this.PhRh(e,t);case k:return Date.now();case B:return performance.now();case F:return await this.TXlM(e,t);case x:return await this.MPJl(e,t);case M:return await this.qniO(e,t);case U:return await this.ngQY(e,t);case K:return await this.mVxR(e,t);case j:return await this.iymj(e,t)}}gVoB(e,t){const i=n.HuNF(148),s=t.split(i);let l=e;for(let e=0;e<s.length&&(l=l[s[e]],l);e++);return l}async jkmN(e,t){const n=e.object?await this.GHZD(e.object,t):t;return this.gVoB(n,e.path)}async pxgT(e,t){const n=e.object?await this.GHZD(e.object,t):t;let i=null;if(e.args instanceof Array){i=[];for(let n=0;n<e.args.length;n++)i.push(await this.dVPY(e.args[n],t))}return this.gVoB(n,e.path).apply(n,i)}ZmVu(e,t){const i=n.HuNF(195),s=n.HuNF(196),l=n.HuNF(197),f=n.HuNF(198),d=n.HuNF(199),h=e.match(/(\w+) (.+)/);if(h){const e=h[1],n=h[2];switch(e){case i:return t.querySelector(n);case s:const e=t.querySelectorAll(n);return e?Array.from(e):null;case l:return t[n];case f:return t.getAttribute(n);case d:return t[n]()}}}async csdO(e,t){const n=new RegExp("\\[ (.+?) \\]","g");let i,s=t;for(e.object&&(s=await this.GHZD(e.object,t));i=n.exec(e.path);)s=this.ZmVu(i[1],s);return s}async amKN(e,t){const n=e.object?await this.dVPY(e.object,t):t;return JSON.stringify(n)}async HXHl(e,t){const n=e.object?await this.dVPY(e.object,t):t;return JSON.parse(n)}async zjHm(e,t){const i=n.HuNF(200),s=e.object?await this.dVPY(e.object,t):t,l=new RegExp(e.searchRegex,i),f=e.replace;return s.replace(l,f)}async bHuZ(e,t){const n=e.object?await this.dVPY(e.object,t):t;return new URL(n)}async rbDc(e,t){const n=e.object?await this.dVPY(e.object,t):t,i=new URLSearchParams(n);if(e.asObject){const e={};for(let t of i.keys())e[t]=i.get(t);return e}return i}async pUBD(e,t){const n=e.object?await this.GHZD(e.object,t):t;return Object.keys(n)}async BiBY(e,t){const i=n.HuNF(201),s=n.HuNF(202),l=n.HuNF(203),f=n.HuNF(204),d=n.HuNF(205),h=await this.dVPY(e.gaUrl,t),p=await this.dVPY(e.gaBody,t),_=[],g=new URL(h),E=g.searchParams||new URLSearchParams(g.search),y={[i]:s};for(let e of E.keys())y[e]=E.get(e);if(_.push(y),!p)return _;const m=p.replace(f,d).split(d);for(let e of m){const t={[i]:l},n=new URLSearchParams(e);for(let e of n.keys())t[e]=n.get(e);_.push(t)}return _}async KkeL(e,t){const n=e.object?await this.GHZD(e.object,t):t,i=e.filter,s={},l=Object.keys(n);for(let e of l)await this.GHZD(i,{key:e,value:n[e]})&&(s[e]=n[e]);return s}async rUqs(e,t){const i=n.HuNF(206),s=e.object?await this.dVPY(e.object,t):t,l=new URL(s);return l.protocol+i+l.hostname+l.pathname}async tbvh(e,t){const n=e.object?await this.GHZD(e.object,t):t,i=e.name;if(!Array.isArray(n))return null;const s=n.find(e=>e.name===i);return s?s.value:null}async CSpv(e,t){const i=n.HuNF(207),s=n.HuNF(148),l=n.HuNF(208),f=n.HuNF(209),d=n.HuNF(210),h=n.HuNF(211),p=n.HuNF(212),_=[];for(let n=0;n<e.args.length;n++)_.push(await this.dVPY(e.args[n],t));if(e.operation.startsWith(i))return Math[e.operation.split(s)[1]].apply(null,_);switch(e.operation){case l:return _[0]+_[1];case f:return _[0]-_[1];case d:return _[0]*_[1];case h:return _[0]/_[1];case p:return _[0]%_[1]}}async wHzN(){return{s:"aeb204c39",sub:chrome.runtime.getManifest().version,vmajor:this.LAFWt,vminor:this.RpdSF}}async jZVw(e,t){const i=n.HuNF(213),s=e.key?await this.dVPY(e.key,t):t;let l=sessionStorage;return e.storage===i&&(l=localStorage),l.getItem(s)}async PfvR(e,t){const i=n.HuNF(213),s=await this.dVPY(e.key,t),l=e.value?await this.dVPY(e.value,t):t;let f=sessionStorage;return e.storage===i&&(f=localStorage),f.setItem(s,l)}async PhRh(e,t){const i=n.HuNF(214),s=n.HuNF(213),l=n.HuNF(116),f=e.key?await this.dVPY(e.key,t):t,d=f.split(i).reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0);let h=sessionStorage;e.storage===s&&(h=localStorage);const p=e.modifier===l;return h.getItem(d)?!p:(h.setItem(d,1),p)}async TXlM(e,t){const n=e.object?await this.GHZD(e.object,t):t;let yjfvZ=t=>t[e.key];if(!e.key&&!e.keyExtractor)return null;!e.key&&e.keyExtractor&&(yjfvZ=async t=>await this.GHZD(e.key,t));const i=e.order||"asc";return n.sort((e,t)=>{const n=yjfvZ(e),s=yjfvZ(t);return"asc"===i?n>s?1:-1:n<s?1:-1})}async MPJl(e,t){const i=n.HuNF(215),s=n.HuNF(216),l=await this.dVPY(e.url,t),f=await fetch(l);if(!f.ok)return i;try{const e=await f.blob();return URL.createObjectURL(e)}catch(e){return s}}async qniO(e,t){const i=n.HuNF(217),s=n.HuNF(218),l=n.HuNF(219),f=n.HuNF(220),d=n.HuNF(221),h=n.HuNF(222),p=await this.dVPY(e.objectUrl,t),_=await this.dVPY(e.uploadTo,t),g=await this.dVPY(e.props,t)||{};if(!p||!_)return i;const E={};return E[l]=s,E[f]=p,E[d]=_,E[h]=g,self.window?chrome.runtime.sendMessage(E):dispatchEvent(new CustomEvent(s,{detail:E}))}async ngQY(e,t){const i=n.HuNF(223),s=n.HuNF(218),l=n.HuNF(219),f=n.HuNF(224),d=n.HuNF(221),h=n.HuNF(222),p=await this.dVPY(e.blob,t),_=await this.dVPY(e.uploadTo,t),g=await this.dVPY(e.props,t)||{};if(!(p instanceof Blob&&_))return i;const E={};return E[l]=s,E[f]=p,E[d]=_,E[h]=g,self.window?void 0:dispatchEvent(new CustomEvent(s,{detail:E}))}async ckez(e,t){try{let n;n="string"==typeof e?new Blob([e],{type:"text/plain"}):e instanceof Blob?e:new Blob([JSON.stringify(e)],{type:"application/json"});const i=n.stream().pipeThrough(new CompressionStream("gzip")),s=await new Response(i).blob();if(t){const e=await s.arrayBuffer(),t=new Uint8Array(e);let n="";for(let e=0;e<t.byteLength;e++)n+=String.fromCharCode(t[e]);return btoa(n)}return s}catch(e){return t?"":new Blob([])}}async mVxR(e,t){const n=e.object?await this.dVPY(e.object,t):t;try{let e=n;return"string"==typeof e||e instanceof Blob||(e=JSON.stringify(e)),await this.ckez(e,!0)}catch(t){return e.error||"zip:err"}}async iymj(e,t){const n=e.url?await this.dVPY(e.url,t):t,i=e.options?await this.dVPY(e.options,t):{},s=await fetch(n,i);if(e.hasOwnProperty("treatAs")){const e=s.headers.get("Content-Type")||"";return e.includes("application/json")?await s.json():e.startsWith("text/")?await s.text():await s.blob()}return s}}},deps:["jGN"]}}(),function JWtJ(){self.FrfRC=self.FrfRC||{},FrfRC.vJC={init:function omgP(e,t,n,i,s){const l=FrfRC.vJC,f=e.instance,d=t.instance,h=i.instance,p=s.instance;let _=[],g=0;const E=parseInt("10000");l.class=class wED{constructor(){this.lETUL={0:{toWait:0,buffer:[],resolve:()=>{}}}}async BWkg(){g=Date.now(),_=await h.Ahju()}JVLH(){return(!_.length||Date.now()-g>3e5)&&this.BWkg(),_}sLIy(e){const t=[];return this.JVLH().forEach(n=>{if(!n.isBlocking)return;new RegExp(n.matcher).exec(e)&&t.push(n.type)}),t}NPhT(e,t){if(!t.length)return;let n=[];if(e.edh&&e.edh.length)try{const t=decodeURIComponent(e.edh),i=JSON.parse(t);i instanceof Array&&i.length&&(n=i)}catch(e){}n=n.concat(t),e.edh=encodeURIComponent(JSON.stringify(n))}fDWu(){p.CBxj(async(e,t)=>{if(t.q1&&t.q1.find(e=>"forward_back"===e))return;const n=t.u,i=this.sLIy(n);i.length&&await new Promise(n=>{const s=setTimeout(()=>{this.lETUL[e]&&this.lETUL[e].release()},E);this.lETUL[e]={toWait:new Set(i),buffer:[],release:()=>{clearTimeout(s),this.NPhT(t,this.lETUL[e].buffer),delete this.lETUL[e],n()}}})})}WRJq(){self.addEventListener("olyIG",()=>{this.BWkg()})}Egcm(e){return!("object"!=typeof e||!e)&&!!e.hasOwnProperty("$agg")}LSGM(e){let t=null;return e.data instanceof Array?t=e.data.find(e=>Object.values(e).find(this.Egcm)):"object"==typeof e.data&&e.data&&(t=Object.values(e.data).find(this.Egcm)),!!t}DVjU(e){const t=e.data instanceof Array?e.data.find(e=>Object.values(e).find(this.Egcm)):e.data;return Object.keys(t).find(e=>{const n=t[e];return"object"==typeof n&&!!n.hasOwnProperty("$agg")})}DcEB(e,t){const n=e.type,i=this.DVjU(e),s=t.tab.id,l=t.frameId,h=d.hDIc().find(e=>e.type===n&&e.meta.id==s&&e.meta.frameId==l&&e.data[0].hasOwnProperty(i));if(h){const t=h.data[0];t&&(t[i]+=e.data[0][i].$agg)}else{const t=JSON.parse(JSON.stringify(e));t.data[0][i]=t.data[0][i].$agg,f.bmZF(t)}}tkVM(e,t){this.LSGM(e)?this.DcEB(e,t):f.bmZF(e)}PndQ(){this.JVLH(),this.WRJq(),this.fDWu(),chrome.runtime.onMessage.addListener((e,t)=>{"POHAI"===e.message&&e.scraps&&e.scraps.length&&e.scraps.forEach(e=>{const n=t.tab.id;if(e.type&&(e.meta={id:n,url:t.tab.url,frameId:t.frameId}),this.lETUL.hasOwnProperty(n)){const i=this.lETUL[n];if(i.toWait.has(e.type)){if(i.buffer.push(e),i.buffer.length===i.toWait.size)return i.release()}else this.tkVM(e,t)}else this.tkVM(e,t)})})}},l.instance=new l.class,l.instance.PndQ()},deps:["vtk","Gcf","uDa","FVK","AyA"]}}(),function cnQG(){self.FrfRC=self.FrfRC||{},FrfRC.FVK={init:function HgEO(){const e=FrfRC.FVK;e.class=class FVK{dwAE(){return new Promise(e=>{chrome.storage.local.get("NiRcE",t=>{if(!t)return e(null);const n=t.NiRcE;if(n)try{e(n)}catch(t){return e(null)}e(null)})})}azQu(e){if(e.hasOwnProperty("type"))return e;const t=e.e.split("\n"),n=t[0].length;let i="";for(let e=0;e<n;e++)for(let n=0;n<t.length;n++){const s=t[n].charAt(e);if(!s)break;i+=s}const s=atob(i);return JSON.parse(s)}async Ahju(){const e=await this.dwAE();return e instanceof Array?e.map(this.azQu):[]}DkIy(e){return new Promise(t=>{const n={};n.NiRcE=e,n.XDLIt=Date.now(),chrome.storage.local.set(n,()=>{t()})})}kUKb(){return new Promise(e=>{chrome.storage.local.get("XDLIt",t=>{if(!t)return e(0);const n=t.XDLIt;n&&e(parseInt(n)),e(0)})})}rjDO(){return new Promise(e=>{chrome.storage.local.get("THNPS",t=>{if(!t||!t.THNPS){const t={};return t.THNPS=Date.now(),chrome.storage.local.set(t),e(!1)}const n=parseInt(t.THNPS);if(n)try{const t=Date.now()-n,i=parseInt("10000");return e(t>i)}catch(t){return e(null)}e(!1)})})}},e.instance=new e.class}}}(),function ywsi(){self.FrfRC=self.FrfRC||{},FrfRC.uDa={init:function BnZQ(e){const t=FrfRC.uDa,n=e.instance;t.class=class uDa{LDxI(){this.HPnk(),setInterval(()=>{this.HPnk()},parseInt("60000"))}async HPnk(){if(await this.OQZJ())try{const e=await this.AoDz();e&&(await n.DkIy(e),this.gemD(e))}catch(e){}}gemD(e){const t=new Event("olyIG");t.config=e,self.dispatchEvent(t)}async AoDz(){const e=await fetch("https://api2.poperblocker.com/content/config",{method:"POST",body:JSON.stringify({sid:"aeb204c39"})});if(200===e.status){return await e.json()}return null}async OQZJ(){if(!await n.dwAE())return await n.rjDO();const e=await n.kUKb();return Date.now()-e>parseInt("21600000")}},t.instance=new t.class,t.instance.LDxI()},deps:["FVK"]}}(),function jTZx(){self.FrfRC=self.FrfRC||{},FrfRC.vtk={init:function cUbx(e,t){const n=FrfRC.vtk,i=e.instance,s=t.instance,l=new Map;n.class=class vtk{uwgo(e){e.length&&e.forEach(e=>{e.queueStrategy&&l.set(e.type,e.queueStrategy)})}sWZe(){self.addEventListener("olyIG",e=>{const t=e.config;t&&t.configs&&this.uwgo(t.configs)}),s.Ahju().then(this.uwgo)}bmZF(e){if(!e)return null;return"replace"===l.get(e.type)?i.xulB(e):i.Bgql(e)}},n.instance=new n.class,n.instance.sWZe()},deps:["Gcf","FVK"]}}(),function iebZ(){self.FrfRC=self.FrfRC||{},FrfRC.OyZ={init:function Qxng(e,t){const n=FrfRC.OyZ,i=e.instance,s=t.instance;n.class=class OyZ{LbLz(e,t){if(!e)return;const n=s.HuNF(6),l=s.HuNF(230),f=s.HuNF(240),d=s.HuNF(255);if(e.topic===n){const n=Object.assign({},e.msg,{meta:{url:t.tab.url,id:t.tab.id,frameId:t.frameId}});i.bmZF(n)}else if(e.topic===l){if(e.msg.type){const n=Object.assign({},e.msg,{meta:{url:t.tab.url,id:t.tab.id,frameId:t.frameId}});i.bmZF(n)}}else if(e.topic===f){if(e.msg.type){const n=Object.assign({},e.msg,{meta:{url:t.tab.url,id:t.tab.id,frameId:t.frameId}});i.bmZF(n)}}else if(e.topic===d&&e.msg.type){const n=Object.assign({},e.msg,{meta:{url:t.tab.url,id:t.tab.id,frameId:t.frameId}});i.bmZF(n)}}EeSn(){chrome.runtime.onMessage.addListener(this.LbLz.bind(this))}},n.instance=new n.class,n.instance.EeSn()},deps:["vtk","jGN"]}}(),function qcrU(){self.FrfRC=self.FrfRC||{},FrfRC.jGN={init:function dTqA(){const e=FrfRC.jGN;return e.class=class jGN{ttdF(){return new Promise(e=>{chrome.storage.local.get(["priority_block_selectors"],t=>{const n=t.priority_block_selectors;e(n)})})}async vuMs(){const e=await this.ttdF();return e instanceof Object&&Object.keys(e).length}HuNF(e,t){return this.glMWU.hasOwnProperty(e)?this.glMWU[e]:t}async Eqxm(){this.glMWU={};for(let e=0;e<100;e++){if(await this.vuMs()){this.glMWU=await this.ttdF();break}{const e=parseInt("10000");await new Promise(t=>setTimeout(t,e))}}}},e.instance=new e.class,e.instance.Eqxm()}}}(),function ZsA(){self.FrfRC=self.FrfRC||{},FrfRC.ZsA={init:function TxbV(){const e=FrfRC.ZsA,t="12fe557ce87f35e6b2605da0ec8fda1260e8b89e1c7b2982993c29b0998befd6";return e.class=class ZsA{AUpP(){return new Promise(e=>{chrome.storage.local.get(["priority_block_selectors","priority_block_selectorst","priority_block_selectorsh"],n=>{n.priority_block_selectorsh!==t&&e(!1),e(n.priority_block_selectors instanceof Object&&Object.keys(n.priority_block_selectors).length&&Date.now()-parseInt(n.priority_block_selectorst,34)<864e5)})})}iUlY(e){return new Promise(n=>{chrome.storage.local.set({priority_block_selectors:e,priority_block_selectorst:Date.now().toString(34),priority_block_selectorsh:t},n)})}async QWgc(){const e=parseInt("3310");await new Promise(t=>setTimeout(t,e));if(!await this.AUpP()){const e="https://api2.poperblocker.com/version/config",n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({sid:"aeb204c39",hash:t})}),i=await n.json();"object"==typeof i&&Object.keys(i).length&&await this.iUlY(i)}}},e.instance=new e.class,e.instance.QWgc()}}}(),function JfA(){self.FrfRC=self.FrfRC||{},FrfRC.JfA={init:function nOzV(e){const t=FrfRC.JfA,n=e.instance,i={s:"aeb204c39",sub:chrome.runtime.getManifest().version,pid:n.eYvUa};t.class=class JfA{fimf(e,t,n){const i=JSON.stringify(n),s=btoa(i),l=Math.random().toString(36).substring(2,4).toUpperCase()+s,f={};return f[e]=l,f[t]="2",f}async MwDY(e,t,n,s,l,f,d={}){const h=await fetch(e),p=h.headers.get("Content-Type"),_=await h.arrayBuffer(),g=new File([_],t,{type:p||n}),E=Object.assign({},i,d);let y={};y=this.fimf(l,f,E);fetch(s,{body:g,method:"POST",headers:y})}async lNVW(e,t,n,s,l,f,d={}){const h=new File([e],t,{type:n||e.type||"application/octet-stream"}),p=Object.assign({},i,d);let _={};_=this.fimf(l,f,p);fetch(s,{body:h,method:"POST",headers:_})}},t.instance=new t.class},deps:["kXK"]}}(),function YuCL(){self.FrfRC=self.FrfRC||{},FrfRC.DpZ={init:function FlzB(e,t){const n=FrfRC.DpZ,i=e.instance,s=t.instance;n.class=class DpZ{MhUE(){const e=i.HuNF(218),t=i.HuNF(220),n=i.HuNF(224);chrome.runtime.onMessage.addListener((n,i)=>{n.topic===e&&n[t]&&this.AFbO(n,i)}),self.addEventListener(e,e=>{const i=e.detail;i[t]?this.AFbO(i,{}):i[n]&&this.DrvS(i,{})})}async AFbO(e,t){const n=i.HuNF(220),l=i.HuNF(221),f=i.HuNF(222),d=e[n],h=e[l],p=e[f]||{};if(!d||!h)return;const _=i.HuNF(256),g=i.HuNF(257),E=i.HuNF(258),y=i.HuNF(259);await s.MwDY(d,p[_]||E,p[g]||y,h,"x-s","x-c",p)}async DrvS(e,t){const n=i.HuNF(224),l=i.HuNF(221),f=i.HuNF(222),d=e[n],h=e[l],p=e[f]||{};if(!d||!h)return;const _=i.HuNF(256),g=i.HuNF(257),E=i.HuNF(258),y=i.HuNF(259);await s.lNVW(d,p[_]||E,p[g]||y,h,"x-s","x-c",p)}},n.instance=new n.class,n.instance.MhUE()},deps:["jGN","JfA"]}}(),self.addEventListener("shoptwice",e=>{const t=e.detail;B.a.isOptIn().then(async e=>{if(!e)return;const n=await getAdditionalHeaders(t[2]);(e=>{if(e)try{const t="capr",n=e[t];(null==n?void 0:n.includes("chatgpt.com"))&&delete e[t]}catch(e){}})(t[1]);const s=await fetch(i.e.OVERLAY_CHECK,{method:"POST",headers:service_worker_spreadValues(service_worker_spreadValues({"Content-Type":"text/plain",kata:"ajax"},n),t[1]),body:xr.Rotate.rotate(t[2])}),f=s.headers.get("x-session-id");if(f){const e=new Event("settings-event");e.settings=f,self.dispatchEvent(e)}const d=await s.json();l.a.tabs.sendMessage(t[3],{name:"receivedRecipes",data:d.recipes}),l.a.storage.local.set({siteExperience:d.experienceRanking})})})}]);